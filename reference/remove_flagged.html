<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Remove flagged records — remove_flagged • RuHere</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Remove flagged records — remove_flagged"><meta name="description" content="This function removes occurrence records flagged as invalid by one or more
flagging functions. Additional manual control is available to force keeping
or removing specific records, regardless of their flag values."><meta property="og:description" content="This function removes occurrence records flagged as invalid by one or more
flagging functions. Additional manual control is available to force keeping
or removing specific records, regardless of their flag values."><meta property="og:image" content="https://wevertonbio.github.io/RuHere/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">RuHere</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html"><span class="fa fas fa-code"></span> Functions</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true"><span class="fa fas fa-book"></span> Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/obtaining_data.html">1. Obtaining and preparing occurrence data</a></li>
    <li><a class="dropdown-item" href="../articles/spatial_consistency.html">2. Ensuring spatial consistency</a></li>
    <li><a class="dropdown-item" href="../articles/flagging_records.html">3. Flagging Records Using Metadata</a></li>
    <li><a class="dropdown-item" href="../articles/flagging_records_species_list.html">4. Flagging Records with Specialists' Information</a></li>
    <li><a class="dropdown-item" href="../articles/sampling_bias.html">5. Reducing sampling bias</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/wevertonbio/RuHere/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch"><li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Remove flagged records</h1>
      <small class="dont-index">Source: <a href="https://github.com/wevertonbio/RuHere/blob/main/R/remove_flagged.R" class="external-link"><code>R/remove_flagged.R</code></a></small>
      <div class="d-none name"><code>remove_flagged.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function removes occurrence records flagged as invalid by one or more
flagging functions. Additional manual control is available to force keeping
or removing specific records, regardless of their flag values.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">remove_flagged</span><span class="op">(</span></span>
<span>  <span class="va">occ</span>,</span>
<span>  flags <span class="op">=</span> <span class="st">"all"</span>,</span>
<span>  additional_flags <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  force_keep <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  force_remove <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  remove_NA <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  column_id <span class="op">=</span> <span class="st">"record_id"</span>,</span>
<span>  save_flagged <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  output_dir <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  overwrite <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  output_format <span class="op">=</span> <span class="st">".gz"</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-occ">occ<a class="anchor" aria-label="anchor" href="#arg-occ"></a></dt>
<dd><p>(data.frame or data.table) a dataset with occurrence records that
has been processed by two or more flagging functions. See details.</p></dd>


<dt id="arg-flags">flags<a class="anchor" aria-label="anchor" href="#arg-flags"></a></dt>
<dd><p>(character) a character vector with the names of the flag
columns to be used for filtering records. See <em>details</em> for the available
options. Default is "all".</p></dd>


<dt id="arg-additional-flags">additional_flags<a class="anchor" aria-label="anchor" href="#arg-additional-flags"></a></dt>
<dd><p>(character) an optional named character vector with
the names of additional logical columns to be used as flags. Default is <code>NULL</code>.</p></dd>


<dt id="arg-force-keep">force_keep<a class="anchor" aria-label="anchor" href="#arg-force-keep"></a></dt>
<dd><p>(character) an optional character vector with the IDs of
records that were flagged but should still be kept. Default is <code>NULL</code>.</p></dd>


<dt id="arg-force-remove">force_remove<a class="anchor" aria-label="anchor" href="#arg-force-remove"></a></dt>
<dd><p>(character) an optional character vector with the IDs of
records that were not flagged but should still be removed. Default is <code>NULL</code>.</p></dd>


<dt id="arg-remove-na">remove_NA<a class="anchor" aria-label="anchor" href="#arg-remove-na"></a></dt>
<dd><p>(logical) whether to remove records that have NA in the
flags specified. Default is FALSE.</p></dd>


<dt id="arg-column-id">column_id<a class="anchor" aria-label="anchor" href="#arg-column-id"></a></dt>
<dd><p>(character) the name of the column containing unique record
IDs. Required if <code>force_keep</code> or <code>force_remove</code> is used. Default is <code>NULL</code>.</p></dd>


<dt id="arg-save-flagged">save_flagged<a class="anchor" aria-label="anchor" href="#arg-save-flagged"></a></dt>
<dd><p>(logical) whether to save the flagged (removed) records.
If <code>TRUE</code>, an <code>output_dir</code> must be provided. Default is <code>FALSE</code>.</p></dd>


<dt id="arg-output-dir">output_dir<a class="anchor" aria-label="anchor" href="#arg-output-dir"></a></dt>
<dd><p>(character) path to an existing directory where removed
flagged records will be saved. Only used when <code>save_flagged = TRUE</code>.</p></dd>


<dt id="arg-overwrite">overwrite<a class="anchor" aria-label="anchor" href="#arg-overwrite"></a></dt>
<dd><p>(logical)  whether to overwrite existing files in
<code>output_dir</code>. Only used when <code>save_flagged = TRUE</code>. Default is <code>FALSE</code>.</p></dd>


<dt id="arg-output-format">output_format<a class="anchor" aria-label="anchor" href="#arg-output-format"></a></dt>
<dd><p>(character) output format for saving removed records.
Options are <code>".csv"</code> or <code>".gz"</code>. Only used when <code>save_flagged = TRUE</code>.
Default is <code>".gz"</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A <code>data.frame</code> containing only the valid (kept) records according to the
flags and additional criteria.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The following flags are available: correct_country, correct_state, cultivated,
fossil, inaturalist, faunabr, florabr, wcvp, iucn, duplicated, thin_geo,
thin_env, .val, .equ, .zer, .cap, .cen, .sea, .urb, .otl, .gbf, .inst, and
.aohi.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Load example data</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"occ_flagged"</span>, package <span class="op">=</span> <span class="st">"RuHere"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Remove all flagged records</span></span></span>
<span class="r-in"><span><span class="va">occ_valid</span> <span class="op">&lt;-</span> <span class="fu">remove_flagged</span><span class="op">(</span>occ <span class="op">=</span> <span class="va">occ_flagged</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Remove flagged records and force removal of some unflagged records</span></span></span>
<span class="r-in"><span><span class="va">to_remove</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"gbif_5987"</span>, <span class="st">"specieslink_2301"</span>, <span class="st">"gbif_18761"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">occ_valid2</span> <span class="op">&lt;-</span> <span class="fu">remove_flagged</span><span class="op">(</span>occ <span class="op">=</span> <span class="va">occ_flagged</span>,</span></span>
<span class="r-in"><span>                             force_remove <span class="op">=</span> <span class="va">to_remove</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Remove flagged records but keep some flagged ones</span></span></span>
<span class="r-in"><span><span class="va">to_keep</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"gbif_14501"</span>, <span class="st">"gbif_12002"</span>, <span class="st">"gbif_5168"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">occ_valid3</span> <span class="op">&lt;-</span> <span class="fu">remove_flagged</span><span class="op">(</span>occ <span class="op">=</span> <span class="va">occ_flagged</span>,</span></span>
<span class="r-in"><span>                            force_keep <span class="op">=</span> <span class="va">to_keep</span><span class="op">)</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Weverton C. F. Trindade, Fernanda S. Caron.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

