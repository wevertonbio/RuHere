% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/flag_CoordinateCleaner.R
\name{flag_CoordinateCleaner}
\alias{flag_CoordinateCleaner}
\title{flag_CoordinateCleaner}
\usage{
flag_CoordinateCleaner(occ, species = "species", long = "decimalLongitude",
lat = "decimalLatitude", verbose = TRUE, countries = NULL,
tests = c("capitals", "centroids", "equal", "gbif", "institutions", "outliers",
"seas", "zeros"), capitals_rad = 10000, centroids_rad = 1000,
centroids_detail = "both", inst_rad = 100, outliers_method = "quantile",
outliers_mtp = 5, outliers_td = 1000, outliers_size = 7, range_rad = 0,
zeros_rad = 0.5, capitals_ref = NULL, centroids_ref = NULL, country_ref = NULL,
country_refcol = "iso_a3", country_buffer = NULL, inst_ref = NULL,
range_ref = NULL, seas_ref = NULL, seas_scale = 50, seas_buffer = NULL,
urban_ref = NULL, aohi_rad = NULL, value = "spatialvalid", report = FALSE)
}
\arguments{
\item{occ}{(data.frame) a data frame containing the occurrence records
to be flagged. Must contain columns for species, longitude, and latitude. \strong{Required.}}

\item{species}{(character) the name of the column in occ that contains the
species scientific names. Default is \code{species}.}

\item{long}{(character) the name of the column in occ that contains the
longitude values. Default is \code{decimalLongitude}.}

\item{lat}{(character) Tte name of the column in occ that contains the
latitude values. Default is \code{decimalLatitude}.}

\item{verbose}{(logical) if \code{TRUE}, prints messages about the progress and
the number of species being checked. Default is \code{TRUE.}}

\item{countries}{(character) a vector of countries (ISO2 or ISO3 codes)
to limit the check to. Only records assigned to one of these countries will be checked.
Default is \code{NULL} (no country restriction).}

\item{tests}{(character) a vector of tests to run (\code{"capitals"}, \code{"centroids"},
\code{"equal"}, \code{"gbif"}, \code{"institutions"}, \code{"outliers"}, \code{"seas"}, \code{"zeros"},
\code{"countries"}, \code{"duplicates"}, \code{"ranges"}, "\verb{urban"}).
Default is (\code{"capitals"}, \code{"centroids"}, \code{"equal"}, \code{"gbif"}, \code{"institutions"},
\code{"outliers"}, \code{"seas"}, \code{"zeros"}).}

\item{capitals_rad}{(numeric) radius around capitals (in meters) to flag records.
Default is 10000 m.}

\item{centroids_rad}{(numeric) radius around centroids (in meters) to flag records.
Default is 1000 m.}

\item{centroids_detail}{(character) retail for centroids check (\code{"country"},
\code{"provinces"}, or \code{"both"}). Default is \code{"both"}.}

\item{inst_rad}{(numeric) radius around biodiversity institutions (in meters)
to flag records. Default is 100 m.}

\item{outliers_method}{(character) method for the outlier test. Default is \code{"quantile"}.}

\item{outliers_mtp}{(numeric) multiplier for the outlier distance test.
Default is 5.}

\item{outliers_td}{(numeric) the minimum distance (in kilometers) for the
distance-based outlier test. Default is 1000 km.#'}

\item{outliers_size}{(numeric) minimum number of records per species to run
the outlier test. Default is 7.}

\item{range_rad}{(numeric) radius (in degrees) to flag records outside the
known geographic range. Default is 0 (no range check).}

\item{zeros_rad}{(numeric) radius (in degrees) to flag records that are
near the center of the coordinate system (0/0). Default is 0.5 degrees.}

\item{capitals_ref}{(data.frame) custom data set for country
capital coordinates. default uses CoordinateCleaner's internal data.}

\item{centroids_ref}{(data.frame) custom data set for country/state
centroid coordinates. Default uses CoordinateCleaner's internal data.}

\item{country_ref}{(SpatVector) custom spatial reference for
the geographic validity ("gbif") test. Default uses CoordinateCleaner's
internal data.}

\item{country_refcol}{(character) the name of the column in country_ref
used to match country information. Default is "iso_a3".}

\item{country_buffer}{(numeric) buffer (in degrees) applied to
country borders during the geographic validity test. Default is \code{NULL}.}

\item{inst_ref}{(data.frame) custom data set for biodiversity
institutional coordinates. Default uses CoordinateCleaner's internal data.}

\item{range_ref}{(data.frame) custom data set for species'
geographic range information. Default is \code{NULL}.}

\item{seas_ref}{(SpatVector) custom spatial layer for the
sea check. Default uses CoordinateCleaner's internal data.}

\item{seas_scale}{(numeric) scale of the map used for the sea check (e.g., 50, 110).
Default is 50 (medium resolution).}

\item{seas_buffer}{(numeric) buffer (in degrees) applied to the
coastline during the sea check. Default is \code{NULL}.}

\item{urban_ref}{(SpatVector) custom spatial layer for the
urban area check (test "urban", not in default tests). Default is NULL.}

\item{aohi_rad}{(numeric) Radius (in meters) around "all other human
habitation" points to flag records. Default is \code{NULL}.}

\item{value}{(character) the output value type returned by clean_coordinates.
Default is "spatialvalid", which returns the output data frame with validation columns.}

\item{report}{(logical) whether a summary is printed to the console.
Default is \code{FALSE}.}
}
\value{
A \code{data.frame} that is the original \code{occ} data frame augmented
with new columns named \code{flag_CoordinateCleaner_*}. These logical columns
indicate the results of the spatial tests, where \code{FALSE} indicates a
flagged (potentially erroneous) record. The summary column is named
\code{flag_CoordinateCleaner_summary}.
}
\description{
Flags (validates) occurrence records by running common spatial filtering tests
from the \code{CoordinateCleaner} package. This function wraps
\code{CoordinateCleaner::clean_coordinates} and standardizes the output column
names for easier interpretation and integration into a workflow. Records are
flagged for various issues like being near country capitals, institutional
centroids, or being spatial outliers.
}
\examples{
\dontrun{
occ <- RuHere::occurrences
occ$species <- "Paubrasilia echinata"

tests_to_run <- c(
  "capitals", "centroids", "equal", "gbif",
  "institutions", "outliers", "seas", "zeros"
)

res <- flag_CoordinateCleaner(
  occ = occ,
  species = "species",
  long = "decimalLongitude",
  lat = "decimalLatitude",
  tests = tests_to_run
)
}

}
