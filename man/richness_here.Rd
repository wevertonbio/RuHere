% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/richness_here.R
\name{richness_here}
\alias{richness_here}
\title{Species Richness and Occurrence Summary Mapping}
\usage{
richness_here(
  occ,
  species = "species",
  long = "decimalLongitude",
  lat = "decimalLatitude",
  raster_base = NULL,
  res = NULL,
  crs = "epsg:4326",
  mask = NULL,
  summary = "records",
  field = NULL,
  fun = mean,
  verbose = TRUE
)
}
\arguments{
\item{occ}{(data.frame) a dataset containing occurrence records. Must
include columns for species names and geographic coordinates.}

\item{species}{(character) the name of the column in \code{occ} that contains the
species scientific names. Default is \code{"species"}.}

\item{long}{(character) the name of the column in \code{occ} that contains the
longitude values. Default is \code{"decimalLongitude"}.}

\item{lat}{(character) the name of the column in \code{occ} that contains the
latitude values. Default is \code{"decimalLatitude"}.}

\item{raster_base}{(SpatRaster) an optional reference raster. If provided,
the output will match its resolution, extent, and CRS. Default is \code{NULL}.}

\item{res}{(numeric) the desired resolution (in decimal degrees if WGS84)
for the output grid. Only used if \code{raster_base} is \code{NULL}.}

\item{crs}{(character) the coordinate reference system of the raster.
(see ?terra::crs). Default is "epsg:4326". Only applicable if \code{raster_base}
is not provided.}

\item{mask}{(SpatRaster or SpatVector) an optional layer to mask the
final output. Default is \code{NULL}.}

\item{summary}{(character) the type of summary to calculate.
Either \code{"records"} (number of occurrences per cell) or \code{"species"}
(number of unique species per cell). Default is \code{"records"}.}

\item{field}{(character or named vector) columns in \code{occ} to summarize
(e.g., traits). If a named vector is provided, names must match species
in \code{occ}. Only used when \code{summary = "species"}. Default is \code{NULL}.}

\item{fun}{(function) the function to aggregate \code{field} values
(e.g., \code{mean}, \code{max}, \code{sum}). Default is \code{mean}.}

\item{verbose}{(logical) whether to print messages about the progress.
Default is \code{TRUE}}
}
\value{
A \code{SpatRaster} object representing the calculated richness,
density, or trait summary.
}
\description{
This function generates spatial grids (rasters) of species richness,
record density, or summarized biological traits from occurrence data.
It supports custom resolutions, masking, and automatic coordinate
reprojection to match reference rasters.
}
\examples{
# Load example data
data("occurrences", package = "RuHere")
occ <- occurrences

# Record density map
r_records <- richness_here(occ, res = 0.5, summary = "records")
terra::plot(r_records)

# Species richness map masked by Brazil's border
world <- terra::unwrap(RuHere::world) # Import world map
brazil <- world[world$name == "brazil",] # Subset Brazil
r_richness <- richness_here(occ, res = 1, mask = brazil, summary = "species")
terra::plot(r_richness)

# Average trait value per cell
sim_mass <- c(runif(length(unique(occ$species)), 10, 20))
names(sim_mass) <- unique(occ$species)

r_trait <- richness_here(occ, res = 0.5, summary = "species", mask = brazil,
                         field = sim_mass, fun = mean)
terra::plot(r_trait)

}
