[{"path":"https://wevertonbio.github.io/RuHere/articles/flagging_records.html","id":"introduction","dir":"Articles","previous_headings":"","what":"Introduction","title":"3. Flagging Records Using Associated Information","text":"Ensuring data quality critical step biodiversity analysis. vignette demonstrates clean occurrence records identifying flagging errors derived record metadata (invalid dates, fossils, cultivated specimens) spatial artifacts (coordinates fall capitals, biodiversity institutions, geographic outliers). use combination RuHere functions flagging metadata issues duplicates, CoordinateCleaner package additional spatial tests.","code":""},{"path":"https://wevertonbio.github.io/RuHere/articles/flagging_records.html","id":"proposed-workflow","dir":"Articles","previous_headings":"","what":"Proposed workflow","title":"3. Flagging Records Using Associated Information","text":"main idea package provide full control reproducibility record-removal process. achieved creating flag columns dataset, logical variables indicating whether record passed given test (TRUE) failed (FALSE). approach allows users : Visuallize inspect potentially erroneous records interactively deciding whether remove . Define exceptions; , retain records flagged remove records flagged. Save flagged records separate files, information indicating record excluded. Generate reports summarizing cleaning process, making transparent reproducible.","code":""},{"path":"https://wevertonbio.github.io/RuHere/articles/flagging_records.html","id":"overview-of-the-functions","dir":"Articles","previous_headings":"","what":"Overview of the functions:","title":"3. Flagging Records Using Associated Information","text":"remove_invalid_coordinates(): removes invalid geographic coordinates. flag_fossil(): scans description columns terms like “fossil” “paleontological” avoid mixing modern distribution data fossil records. flag_cultivated(): identifies specimens botanical gardens, greenhouses, plantations based habitat locality remarks. flag_inaturalist(): specifically targets iNaturalist records. setting research_grade = FALSE, flag observations haven’t peer-verified community. flag_year(): flags records collected outside plausible time range missing dates. flag_duplicates(): identifies flags duplicated records. remove_flagged(): removes flagged records.","code":""},{"path":"https://wevertonbio.github.io/RuHere/articles/flagging_records.html","id":"getting-ready","dir":"Articles","previous_headings":"","what":"Getting ready","title":"3. Flagging Records Using Associated Information","text":"stage, occurrence dataset standardized using format_columns() function merged bind_here(). additional details workflow, see vignette “1. Obtaining preparing species occurrence data”. Ideally, records also standardized spatial consistency country state information. See vignette “2. Ensuring Spatial Consistency” details. illustrate function works, use example occurrence dataset included package, contains records three species: Paraná pine (Araucaria angustifolia), azure jay (Cyanocorax caeruleus), yellow trumpet tree (Handroanthus albus).","code":"# Load RuHere library(RuHere) # Loading the example data data(\"occurrences\", package = \"RuHere\")"},{"path":"https://wevertonbio.github.io/RuHere/articles/flagging_records.html","id":"removing-invalid-coordinates-remove_invalid_coordinates","dir":"Articles","previous_headings":"","what":"Removing invalid coordinates (remove_invalid_coordinates())","title":"3. Flagging Records Using Associated Information","text":"conducting spatial validation modeling, essential ensure coordinates valid. remove_invalid_coordinates() function filters records coordinates non-numeric, missing (NA), fall outside valid global range (Latitude: -90 90; Longitude: -180 180). setting return_invalid = TRUE, function returns list containing clean ($valid) discarded ($invalid) records, useful want inspect records removed. update working dataset (occ) keep valid records.","code":"# Remove invalid coordinates and store the result as a list to separate valid/invalid data occ_split <- remove_invalid_coordinates(   occ = occurrences,   long = \"decimalLongitude\",   lat = \"decimalLatitude\",   return_invalid = TRUE )  # Records with invalid coordinates occ_split$invalid[, c(\"species\", \"decimalLongitude\", \"decimalLatitude\")] #>                         species decimalLongitude decimalLatitude #> 376      Araucaria angustifolia               NA              NA #> 3606       Cyanocorax caeruleus               NA              NA #> 3768 Handroanthus serratifolius               NA              NA  # Update the main 'occ' data frame to contain only the valid records occ <- occ_split$valid"},{"path":"https://wevertonbio.github.io/RuHere/articles/flagging_records.html","id":"flagging-based-on-metadata-information","dir":"Articles","previous_headings":"","what":"Flagging based on metadata information","title":"3. Flagging Records Using Associated Information","text":"ensuring coordinates valid, next step assess quality biological temporal information associated record. Occurrence datasets often contain valuable additional information describing conditions occurrence recorded. additional columns referred metadata. RuHere provides four specialized functions identify common metadata-related issues:","code":""},{"path":"https://wevertonbio.github.io/RuHere/articles/flagging_records.html","id":"fossil-records","dir":"Articles","previous_headings":"Flagging based on metadata information","what":"Fossil records","title":"3. Flagging Records Using Associated Information","text":"goal study contemporary distribution species, fossil records excluded. flag_fossil() function scans metadata terms indicating record corresponds fossil.","code":"occ <- flag_fossil(occ) # Scan for fossil-related terms # Number of records flagged as fossil sum(!occ$fossil_flag) # No records flagged as fossil #> [1] 0"},{"path":"https://wevertonbio.github.io/RuHere/articles/flagging_records.html","id":"cultivated-individuals","dir":"Articles","previous_headings":"Flagging based on metadata information","what":"Cultivated individuals","title":"3. Flagging Records Using Associated Information","text":"plants, cultivated individuals may represent populations occurring outside natural range species. flag_cultivated() function scans metadata terms indicating record corresponds cultivated individual. function heavily inspired getCult() function plantR package:","code":"occ <- flag_cultivated(occ) # Scan for fossil-related terms # Number of records flagged as fossil sum(!occ$cultivated_flag) #> [1] 14"},{"path":"https://wevertonbio.github.io/RuHere/articles/flagging_records.html","id":"records-from-inaturalist","dir":"Articles","previous_headings":"Flagging based on metadata information","what":"Records from iNaturalist","title":"3. Flagging Records Using Associated Information","text":"records, especially GBIF, sourced citizen science project iNaturalist. many occurrences recorded non-specialists, may wish exclude analyses. However, subset iNaturalist records classified Research Grade, indicating higher level confidence species identification. flag_inaturalist() function allows flag iNaturalist records classified Research Grade:","code":"# Flag all iNaturalist records (including Research Grade) occ_inat <- flag_inaturalist(occ,                               research_grade = TRUE) #Flag even when is research-grade sum(!occ_inat$inaturalist_flag) #Number of flagged records #> [1] 869  # Flag only iNaturalist records without Research Grade occ <- flag_inaturalist(occ,                          research_grade = FALSE) # Flags only non-peer-verified iNaturalist records sum(!occ$inaturalist_flag) #All inaturalist records are classified as Research Grade #> [1] 0"},{"path":"https://wevertonbio.github.io/RuHere/articles/flagging_records.html","id":"records-outside-a-year-range","dir":"Articles","previous_headings":"Flagging based on metadata information","what":"Records outside a year range","title":"3. Flagging Records Using Associated Information","text":"Depending objectives, may wish exclude records fall outside specific temporal range. example, fitting ecological niche models using climate variables, old records may represent populations collected regions since changed may longer suitable species. example, flag records collected 1980:","code":"occ <- flag_year(occ, lower_limit = 1980,                   upper_limit = NULL) #We could specify a upper limit as well sum(!occ$year_flag) #Number of flagged records #> [1] 198"},{"path":"https://wevertonbio.github.io/RuHere/articles/flagging_records.html","id":"flagging-duplicates","dir":"Articles","previous_headings":"","what":"Flagging duplicates","title":"3. Flagging Records Using Associated Information","text":"records duplicates, means, coordinates. full duplicates, means, additionaly coordinates, also metadata. example provided package, already removed duplicated records. ilustrate function, let’s create new dataset records duplicates:  RuHere provides several options deal duplicates: Flag duplicates based coordinates: cases, may wish keep one record among duplicated. default, kept record choosen randomly. RuHere can control record kept. example, can keep recent /prioritize records specific data_source:  Flag duplicates based coordinates metadata: cases, may wish consider duplicates records collected place also time. means, records collected place different years considered duplicates:  Flag duplicates based cells raster: SpatRaster, can consider duplicates records falls cell.  working large dataset, recommend flagging removing duplicate records first step data standardization. details remove flagged records provided .","code":"# Duplicated records new_occ <- rbind(occurrences[1:1000, ], occurrences[1:100,]) # Flag records and keep the most recent and preferably from GBIF: # Create vector to prioritize gbif records preferable_datasource <- c(\"gbif\", \"specieslink\", \"idigbio\") occ_dup1 <- flag_duplicates(occ = new_occ, continuous_variable = \"year\",                             categorical_variable = \"data_source\",                              priority_categories = preferable_datasource) sum(!occ_dup1$duplicated_flag) #Number of flagged records #> [1] 100 # Flag duplicates based on coordinates and year occ_dup2 <- flag_duplicates(occ = new_occ, additional_groups = \"year\") # Import raster data(\"worldclim\", package = \"RuHere\") wc <- terra::unwrap(worldclim) #Unpack raster # Flag duplicates based in raster cells and keep the most recent  occ_dup3 <- flag_duplicates(occ = new_occ, continuous_variable = \"year\",                              by_cell = TRUE, raster_variable = wc)"},{"path":"https://wevertonbio.github.io/RuHere/articles/flagging_records.html","id":"spatial-cleaning-coordinatecleaner","dir":"Articles","previous_headings":"","what":"Spatial cleaning (CoordinateCleaner)","title":"3. Flagging Records Using Associated Information","text":"verifying metadata, next step address spatial artifacts. stage, integrate CoordinateCleaner package workflow. package provides robust set ready--use functions fully compatible RuHere outputs, allowing automated identification common geographic errors biodiversity data. Spatial artifacts often occur coordinates assigned general locations, country’s capital, state center, biodiversity institution, rather actual collection site.","code":""},{"path":"https://wevertonbio.github.io/RuHere/articles/flagging_records.html","id":"implement-flags-from-coordinatecleaner","dir":"Articles","previous_headings":"Spatial cleaning (CoordinateCleaner)","what":"Implement flags from CoordinateCleaner","title":"3. Flagging Records Using Associated Information","text":"CoordinateCleaner R package performs automated tests identify suspicious geographic coordinates. Among various functions, compares occurrence coordinates reference databases country province centroids, country capitals, urban areas, biodiversity institutions. comprehensive overview available methods, see paper linked . RuHere fully compatible flags generated CoordinateCleaner, packages add logical flag columns dataset (prefixed .). apply desired coordinate checks, simply need use clean_coordinates() function:  final columns occurrence dataset contain results CoordinateCleaner validation. summary column reports whether record passed applied tests, can ignored purposes vignette.","code":"# Install the package if necessary # if(!require(\"CoordinateCleaner\")){ #   install.packages(\"CoordinateCleaner\") # }  # Loading the package library(CoordinateCleaner)  # Run spatial check using some tests occ <- clean_coordinates(x = occ,                          tests = c(\"capitals\", \"centroids\", \"equal\",                                     \"institutions\", \"zeros\")) #> Testing coordinate validity #> Flagged 0 records. #> Testing equal lat/lon #> Flagged 3 records. #> Testing zero coordinates #> Flagged 6 records. #> Testing country capitals #> Flagged 23 records. #> Testing country centroids #> Flagged 7 records. #> Testing biodiversity institutions #> Flagged 6 records. #> Flagged 39 of 4077 records, EQ = 0.01. head(occ[,19:25]) #>   .val .equ .zer .cap .cen .inst .summary #> 1 TRUE TRUE TRUE TRUE TRUE  TRUE     TRUE #> 2 TRUE TRUE TRUE TRUE TRUE  TRUE     TRUE #> 3 TRUE TRUE TRUE TRUE TRUE  TRUE     TRUE #> 4 TRUE TRUE TRUE TRUE TRUE  TRUE     TRUE #> 5 TRUE TRUE TRUE TRUE TRUE  TRUE     TRUE #> 6 TRUE TRUE TRUE TRUE TRUE  TRUE     TRUE"},{"path":"https://wevertonbio.github.io/RuHere/articles/flagging_records.html","id":"map-of-occurrence-flags","dir":"Articles","previous_headings":"","what":"Map of occurrence flags","title":"3. Flagging Records Using Associated Information","text":"records flagged, highly recommended visualize assess whether flagging accurate proceeding final record removal. RuHere provides two options mapping flagged records: interactive option via map_here(), uses mapview package, static option via ggmap_here(), uses ggplot2. Let’s see flagged record Paraná Pine: Note: vignette, map generated map_here() static snapshot interactive map produced RStudio.   ggmap_here(), can also plot flag separate panel setting facet_wrap = TRUE:","code":"# Interactive map with map_here() map_here(occ, species = \"Araucaria angustifolia\", label = \"record_id\", cex = 4) # Static map with ggplot ggmap_here(occ, species = \"Araucaria angustifolia\",             show_no_flagged = FALSE) # Do not show unflagged records ggmap_here(occ, species = \"Araucaria angustifolia\",             facet_wrap = TRUE)"},{"path":"https://wevertonbio.github.io/RuHere/articles/flagging_records.html","id":"get-consensus-across-multiple-flags","dir":"Articles","previous_headings":"Map of occurrence flags","what":"Get consensus across multiple flags","title":"3. Flagging Records Using Associated Information","text":"can obtain consensus across multiple flags. consensus can computed two ways: record considered valid (TRUE) specified flags valid (TRUE). record considered valid (TRUE) least one specified flag valid (TRUE). example, compute consensus using cultivated year flags. case, cultivated records flagged invalid also collected 1980. default, function creates new column named \"consensus_flag\", custom name can provided. , name new flag \"old_cultivated\".  can visualize custom flag using map_here() ggmap_here(). user-defined flag, must specified via additional_flags names_additional_flags arguments, color must also provided plotting:","code":"occ_consensus <- flag_consensus(occ,                                  flags = c(\"cultivated\", \"year\"),                                 consensus_rule = \"any_true\",                                 flag_name = \"old_cultivated\")  # Records flagged because they are cultivated and collected before 1980 occ_consensus_flagged <- occ_consensus[!occ_consensus$old_cultivated, ] occ_consensus_flagged[, c(\"species\", \"cultivated_flag\", \"year_flag\", \"old_cultivated\")] #>                         species cultivated_flag year_flag old_cultivated #> 1381     Araucaria angustifolia           FALSE     FALSE          FALSE #> 1388     Araucaria angustifolia           FALSE     FALSE          FALSE #> 1424     Araucaria angustifolia           FALSE     FALSE          FALSE #> 4769 Handroanthus serratifolius           FALSE     FALSE          FALSE ggmap_here(occ_consensus,             flags = c(\"year\", \"cultivated\"),            # Specific flags to show            additional_flags = \"old_cultivated\",        # Column name of the custom flag            names_additional_flags = \"Old & cultivated\",# Label used in the legend            col_additional_flags = \"red\",                # Color for the custom flag            show_no_flagged = FALSE)                      # Do not show unflagged records"},{"path":"https://wevertonbio.github.io/RuHere/articles/flagging_records.html","id":"removing-flagged-records","dir":"Articles","previous_headings":"Map of occurrence flags","what":"Removing flagged records","title":"3. Flagging Records Using Associated Information","text":"flagging potential issues, can use remove_flagged() function clean dataset. function highly flexible, allowing filter records based flags generated also apply manual overrides using force_keep force_remove arguments: force_keep: vector record IDs want keep dataset, even flagged FALSE one functions. force_remove: vector record IDs want exclude, even passed automated tests (flagged TRUE). example, suppose records \"gbif_17175\" \"gbif_6108\" known, valid herbarium specimens mistakenly flagged cultivated, \"gbif_5516\" \"specieslink_1091\" records know incorrect captured automated flag. can also specify directory save removed records. example, use temporary directory, practice define permanent location: can inspect directory specified path_to_save see files containing removed records. default, files saved GZIP format, compressed format can read using data.table::fread(). approach provides simple transparent way maintain control cleaning process, allowing incorporate expert knowledge researcher complement automated data-quality checks.","code":"# Create directory to save removed records path_to_save <- file.path(tempdir(), \"removed_records\") dir.create(path_to_save)  # Identify records to force keeping and removing to_keep <- c(\"gbif_17175\", \"gbif_6108\") to_remove <- c(\"gbif_5516\", \"specieslink_1091\")  # Remove flagged records with manual control # and save removed records to a folder occ_cleaned <- remove_flagged(occ = occ,                               flags = \"all\",                                 column_id = \"record_id\",                               force_keep = to_keep,                               force_remove = to_remove,                               save_flagged = TRUE,                               output_dir = path_to_save)  # Total number of records nrow(occ) #> [1] 4077 # Number of valid records nrow(occ_cleaned) #> [1] 3837 # Number of records removed nrow(occ) - nrow(occ_cleaned) #> [1] 240 fs::dir_tree(path_to_save) #> Temp/removed_records #> ├── Biodiversity Institution.gz #> ├── Capital centroid.gz #> ├── Country-Province centroid.gz #> ├── Cultivated.gz #> ├── Equal lat-long.gz #> └── Zero lat-long.gz"},{"path":"https://wevertonbio.github.io/RuHere/articles/flagging_records.html","id":"summarizing-flags","dir":"Articles","previous_headings":"Map of occurrence flags","what":"Summarizing flags","title":"3. Flagging Records Using Associated Information","text":"flagging records, can create bar plot summarizing number records flagged flagging function:  function returns data.frame summarizing number records per flag ggplot2 object displaying summary bar plot:   function can also read flagged occurrence data saved records removed. , simply specify directory used remove_flagged():  Since output ggplot2 object, can saved using ggplot2::ggsave():","code":"flag_summary <- summarize_flags(occ) # Data.frame summarizing the number of records per flag flag_summary$df_summary #>                        Flag    n #> 4            Equal lat-long    3 #> 5             Zero lat-long    6 #> 8  Biodiversity Institution    6 #> 7 Country-Province centroid    7 #> 1                Cultivated   14 #> 6          Capital centroid   23 #> 9                     Valid 4025 # Bar plot flag_summary$plot_summary # Summarize removed records using saved data flag_summary_dir <- summarize_flags(flagged_dir = path_to_save,                                      show_no_flagged = FALSE, #Do not show unflagged records                                     fill = \"firebrick\") # Change color of bars flag_summary_dir$plot_summary ggplot2::ggsave(filename = file.path(path_to_save, \"Summary.png\"),                  plot = flag_summary_dir$plot_summary, width = 8, height = 5,                  dpi = 600)"},{"path":"https://wevertonbio.github.io/RuHere/articles/flagging_records.html","id":"spatial-aggregation-of-records-and-flags","dir":"Articles","previous_headings":"","what":"Spatial aggregation of records and flags","title":"3. Flagging Records Using Associated Information","text":"visualizing individual points useful specific inspections, aggregating data spatial grids helps identify broad geographic patterns, “hotspots” record density regions high concentrations data quality issues.","code":""},{"path":"https://wevertonbio.github.io/RuHere/articles/flagging_records.html","id":"mapping-species-richness-and-record-density","dir":"Articles","previous_headings":"Spatial aggregation of records and flags","what":"Mapping species richness and record density","title":"3. Flagging Records Using Associated Information","text":"default, richness_here() calculates number unique species per cell. can also calculate total number records identify sampling effort. granularity grid controlled res argument, defines spatial resolution decimal degrees.","code":"# Create a grid of species richness r_richness <- richness_here(occ, summary = \"species\", res = 2)  # Create a grid of record density (total number of occurrences) r_records <- richness_here(occ, summary = \"records\", res = 2)  # Plotting the results ggrid_here(r_richness) ggrid_here(r_records)"},{"path":"https://wevertonbio.github.io/RuHere/articles/flagging_records.html","id":"mapping-data-quality-flags","dir":"Articles","previous_headings":"Spatial aggregation of records and flags","what":"Mapping data quality flags","title":"3. Flagging Records Using Associated Information","text":"can use field argument summarize specific quality flags. example, create density map records flagged year. helps identify certain regions higher prevalence cultivated specimens.  field argument highly flexible. used flags , can replace flag column numeric trait (e.g., plant height, seed mass) environmental variable. changing fun argument mean median, can easily generate maps average trait values across space. Additionally, provide vector multiple column names field argument, ggrid_here() automatically generate multi-panel plot. next vignette, demonstrate use expert-derived information biodiversity databases, IUCN World Checklist Vascular Plants, identify records fall outside natural range species.","code":"# Converting flag columns to numeric for plotting # We invert the logic so that errors (FALSE) become 1 and clean data (TRUE) become 0 occ$year_flag_num <- as.numeric(!occ$year_flag)  # Create the grid  r_flagged <- richness_here(occ,                             summary = \"records\",                             field = \"year_flag_num\",                             fun = mean,                            res = 2)  # Plot with ggrid_here ggrid_here(r_flagged,             low_color = \"white\",             mid_color = \"orange\",             high_color = \"firebrick\")"},{"path":"https://wevertonbio.github.io/RuHere/articles/flagging_records_species_list.html","id":"introduction","dir":"Articles","previous_headings":"","what":"Introduction","title":"4. Flagging Records with Species List Information","text":"One robust ways validate biodiversity data cross-reference occurrence records expert-curated distribution datasets. species known occur specific regions (states, biomes, countries) according official checklist (e.g., IUCN), records falling outside areas can flagged potential errors introductions. RuHere streamlines process providing functions : Download official datasets directly R environment. Check availability data species. Flag records fall outside known natural range.","code":""},{"path":"https://wevertonbio.github.io/RuHere/articles/flagging_records_species_list.html","id":"proposed-workflow","dir":"Articles","previous_headings":"","what":"Proposed workflow","title":"4. Flagging Records with Species List Information","text":"main idea package provide full control reproducibility record-removal process. achieved creating flag columns dataset, logical variables indicating whether record passed given test (TRUE) failed (FALSE). approach allows users : Visuallize inspect potentially erroneous records interactively deciding whether remove . Define exceptions; , retain records flagged remove records flagged. Save flagged records separate files, information indicating record excluded. Generate reports summarizing cleaning process, making transparent reproducible.","code":""},{"path":"https://wevertonbio.github.io/RuHere/articles/flagging_records_species_list.html","id":"overview-of-the-functions","dir":"Articles","previous_headings":"","what":"Overview of the functions:","title":"4. Flagging Records with Species List Information","text":"florabr_here(): downloads Flora e Funga Brasil database. faunabr_here(): downloads Taxonomic Catalog Brazilian Fauna. wcvp_here(): downloads World Checklist Vascular Plants (WCVP). iucn_here(): downloads species distribution information IUCN Red List. bien_here(): downloads range maps BIEN database. set_iucn_credentials(): stores IUCN API key securely. available_datasets(): checks datasets contain information target species. flag_florabr(): flags records based Brazilian state/biome distributions. flag_faunabr(): flags animal records based Brazilian distributions. flag_wcvp(): flags records based global native ranges WCVP. flag_iucn(): flags records based IUCN distribution data (native, extant, etc.). flag_bien(): flags records based BIEN range maps.","code":""},{"path":"https://wevertonbio.github.io/RuHere/articles/flagging_records_species_list.html","id":"getting-ready","dir":"Articles","previous_headings":"","what":"Getting ready","title":"4. Flagging Records with Species List Information","text":"stage, occurrence dataset standardized using format_columns() function merged bind_here(). additional details workflow, see vignette “1. Obtaining preparing species occurrence data”. Ideally, records also standardized spatial consistency country state information. See vignette “2. Ensuring Spatial Consistency” details. illustrate function works, use example occurrence dataset included package, contains records three species: Paraná pine (Araucaria angustifolia), azure jay (Cyanocorax caeruleus), yellow trumpet tree (Handroanthus albus).","code":"# Load RuHere and terra library(RuHere) library(terra) #> terra 1.8.93  # Loading the example data data(\"occurrences\", package = \"RuHere\")"},{"path":"https://wevertonbio.github.io/RuHere/articles/flagging_records_species_list.html","id":"downloading-distribution-datasets","dir":"Articles","previous_headings":"","what":"Downloading distribution datasets","title":"4. Flagging Records with Species List Information","text":"flagging, must download reference datasets. functions save data structured format within specified directory. Let’s create directory: Note: downloads can large take time. usually need run per project.","code":"# Define a directory for datasets (using a temporary one for this example) # In a real project, use a persistent path  dataset_dir <- file.path(tempdir(), \"datasets\") dir.create(dataset_dir, showWarnings = FALSE)"},{"path":"https://wevertonbio.github.io/RuHere/articles/flagging_records_species_list.html","id":"world-checklist-of-vascular-plants-wcvp","dir":"Articles","previous_headings":"Downloading distribution datasets","what":"World Checklist of Vascular Plants (WCVP)","title":"4. Flagging Records with Species List Information","text":"World Checklist Vascular Plants (WCVP) comprehensive, expert-reviewed list scientifically described plant species, compiled four decades peer-reviewed literature, authoritative scientific databases, herbaria, observational records. Geographic distribution information WCVP follows World Geographical Scheme Recording Plant Distributions (WGSRPD), system developed International Biodiversity Information Standards (TDWG) divides world “botanical countries” subdivides large countries states provinces. wcvp_here() function downloads full WCVP dataset corresponding WGSRPD shapefile:","code":"# Download WCVP wcvp_here(data_dir = dataset_dir) #> trying URL 'https://sftp.kew.org/pub/data-repositories/WCVP/wcvp.zip' #> Content type 'application/zip' length 105093449 bytes (100.2 MB) #> ================================================== #> downloaded 100.2 MB #>  #> trying URL 'https://zenodo.org/records/17455838/files/wgsrpd.gpkg?download=1' #> Content type 'application/octet-stream' length 8581120 bytes (8.2 MB) #> ================================================== #> downloaded 8.2 MB #>  #> Please don't forget to cite: #>  #> Govaerts, R., Nic Lughadha, E. et al. The World Checklist of Vascular Plants, a continuously updated resource for exploring global #> plant diversity. Sci Data, 8, 215 (2021). https://doi.org/10.1038/s41597-021-00997-6"},{"path":"https://wevertonbio.github.io/RuHere/articles/flagging_records_species_list.html","id":"botanical-information-and-ecology-network-bien","dir":"Articles","previous_headings":"Downloading distribution datasets","what":"Botanical Information and Ecology Network (BIEN)","title":"4. Flagging Records with Species List Information","text":"BIEN provides modeled range maps 90,000 species vascular plants New World. maps represent hypotheses potential species distributions, generated georeferenced occurrence data, associated environmental variables, ecological niche modeling (Qian, 2020). bien_here() function downloads range maps specified species.  function returns data.frame indicating whether range polygons species available BIEN. example, distributional information available yellow trumpet tree (Handroanthus serratifolius).","code":"# Set species spp <- unique(occurrences$species) spp #> [1] \"Araucaria angustifolia\"     \"Cyanocorax caeruleus\"       \"Handroanthus serratifolius\"  # Download BIEN maps for your species bien_here(data_dir = dataset_dir, species = spp) #>                       species range_available #>                        <char>          <lgcl> #> 1:     Araucaria angustifolia           FALSE #> 2:       Cyanocorax caeruleus           FALSE #> 3: Handroanthus serratifolius            TRUE"},{"path":"https://wevertonbio.github.io/RuHere/articles/flagging_records_species_list.html","id":"iucn","dir":"Articles","previous_headings":"Downloading distribution datasets","what":"IUCN","title":"4. Flagging Records with Species List Information","text":"Unfortunately, spatial range maps generated specialists provided IUCN (https://www.iucnredlist.org/resources/spatial-data-download) available automatic download. However, IUCN provide distributional information summarized botanical countries following WGSRPD scheme. use IUCN data, first need register API key https://api.iucnredlist.org/users/sign_up. obtained, store key securely R environment:  can now download distributional information IUCN:","code":"# Set your key (do this once) set_iucn_credentials(\"YOUR_IUCN_KEY_HERE\") # Download data for specific species iucn_here(data_dir = dataset_dir, species = spp) #> trying URL 'https://zenodo.org/records/17455838/files/wgsrpd.gpkg?download=1' #> Content type 'application/octet-stream' length 8581120 bytes (8.2 MB) #> ================================================== #> downloaded 8.2 MB"},{"path":"https://wevertonbio.github.io/RuHere/articles/flagging_records_species_list.html","id":"brazilian-flora-and-funga-florabr","dir":"Articles","previous_headings":"Downloading distribution datasets","what":"Brazilian Flora and Funga (florabr)","title":"4. Flagging Records with Species List Information","text":"Brazilian Flora Funga (florabr) comprehensive work reliably document Brazilian plant, algae fungi diversity. involves work hundreds taxonomists, integrating data plant (including algae) fungi collected Brazil last two centuries. florabr provides descriptive information based expert knowledge endemism level, federal states, biomes confirmed occurrences species Brazil, can use information validate records fall within Brazil. First, need download dataset using florabr R package Note: use dataset, please remember cite package: Trindade WCF (2024). “florabr: R package explore spatialize species distribution using Flora e Funga Brasil.” Applications Plant Sciences, e11616. doi:10.1002/aps3.11616 https://doi.org/10.1002/aps3.11616.","code":"florabr_here(data_dir = dataset_dir, data_version = \"latest\") #> Getting data from Flora e Funga do Brasil... #> Data will be saved in /datasets/florabr #>  #> Downloading version: 393.421 #>  #> Merging data. Please wait a moment... #>  #> Data downloaded and merged successfully. Final data saved in datasets/florabr/393.421/CompleteBrazilianFlora.rds #>  #> Please don't forget to cite: #> Trindade WCF (2024). “florabr: An R package to explore and spatialize species distribution using Flora e Funga do #>  Brasil.” Applications in Plant Sciences, e11616. doi:10.1002/aps3.11616 <https://doi.org/10.1002/aps3.11616> >>>>>>> Stashed changes"},{"path":"https://wevertonbio.github.io/RuHere/articles/flagging_records_species_list.html","id":"taxonomic-catalog-of-the-brazilian-fauna-faunabr","dir":"Articles","previous_headings":"Downloading distribution datasets","what":"Taxonomic Catalog of the Brazilian Fauna (faunabr)","title":"4. Flagging Records with Species List Information","text":"Taxonomic Catalog Brazilian Fauna (faunabr) sister project florabr represents collaborative efforts 500 zoologists, specializing different animal groups native Brazil. Similar florabr, provides expert-derived information Brazilian federal states countries confirmed species occurrences. , download dataset using faunabr R package: Note: use dataset, please remember cite package: Trindade WCF (2025) faunabr: R package explore taxonomic data map species distributions using Catálogo Taxonômico da Fauna Brasil. Zoologia 42: e25027. https://doi.org/10.1590/S1984-4689.v42.e25027.","code":"faunabr_here(data_dir = dataset_dir) #> Getting data from Taxonomic Catalog of the Brazilian Fauna ... #> Downloading version: 1.45 #>  #> Merging data. Please wait a moment... #>  #> Data will be saved in /datasets/faunabr #> Data downloaded and merged successfully. Final data saved in datasets/faunabr/1.45/CompleteBrazilianFauna.gz  #> Please don't forget to cite:  #> Trindade WCF (2025) faunabr: An R package to explore taxonomic data and map species distributions using the Catálogo Taxonômico da Fauna do Brasil. Zoologia 42: e25027. <https://doi.org/10.1590/S1984-4689.v42.e25027>."},{"path":"https://wevertonbio.github.io/RuHere/articles/flagging_records_species_list.html","id":"checking-data-availability","dir":"Articles","previous_headings":"Downloading distribution datasets","what":"Checking data availability","title":"4. Flagging Records with Species List Information","text":"downloading datasets, one folder data source:  can use available_datasets() function check databases provide distributional information species:  default, function returns datasets distributional information available species. return_distribution = TRUE, function also returns list containing SpatVector objects representing species ranges:   reference ranges used subsequent functions validate occurrence records: record falling outside specified ranges flagged invalid (FALSE).","code":"fs::dir_tree(dataset_dir) #> datasets #> ├── bien #> │   └── Handroanthus_serratifolius.gpkg #> ├── faunabr #> │   └── 1.43 #> │       └── CompleteBrazilianFauna.gz #> ├── florabr #> │   └── 393.420 #> │       └── CompleteBrazilianFlora.rds #> ├── iucn #> │   └── iucn_distribution.gz #> ├── wcvp #> │   └── wcvp.gz #> └── wgsrpd #>     └── wgsrpd.gpkg # Check availability for our species avail <- available_datasets(data_dir = dataset_dir, species = spp) avail #>                      species               datasets #> 1     Araucaria angustifolia      florabr;iucn;wcvp #> 2       Cyanocorax caeruleus                faunabr #> 3 Handroanthus serratifolius bien;florabr;iucn;wcvp # Get available ranges for species avail_ranges <- available_datasets(data_dir = dataset_dir, species = spp,                                     return_distribution = TRUE) # Plot ranges of Araucaria ranges_araucaria <- avail_ranges$species_range$`Araucaria angustifolia` par(mfrow = c(1, 3)) #Create grid plot(ranges_araucaria$florabr$states_biomes, main = \"florabr\") plot(ranges_araucaria$iucn, main = \"IUCN\") plot(ranges_araucaria$wcvp, main = \"WCVP\") dev.off() # Reset plotting layout #> null device  #>           1"},{"path":"https://wevertonbio.github.io/RuHere/articles/flagging_records_species_list.html","id":"flagging-with-expert-information","dir":"Articles","previous_headings":"","what":"Flagging with expert information","title":"4. Flagging Records with Species List Information","text":"downloading datasets, distributional information can used validate occurrence records. validation functions include buffer argument, expands distribution regions specified distance (20 km default).","code":""},{"path":"https://wevertonbio.github.io/RuHere/articles/flagging_records_species_list.html","id":"using-world-checklist-of-vascular-plants-wcvp","dir":"Articles","previous_headings":"Flagging with expert information","what":"Using World Checklist of Vascular Plants (WCVP)","title":"4. Flagging Records with Species List Information","text":"filtering records using WCVP, can specify whether consider regions species \"native\" (default) also include locations species \"introduced\", \"extinct\", marked \"location_doubtful\".  function returns original data.frame augmented new column named wcvp_flag, records falling outside WCVP-defined range flagged FALSE. WCVP provide distributional information Cyanocorax caeruleus (animal species), function returns NA values species.","code":"# Flag using WCVP-defined range occ <- flag_wcvp(data_dir = dataset_dir, #Directory where dataset was saved                  occ = occurrences) # Number of records flagged (FALSE) for each species table(occ$species, occ$wcvp_flag) #>                              #>                              FALSE TRUE #>   Araucaria angustifolia       111  813 #>   Cyanocorax caeruleus           0    0 #>   Handroanthus serratifolius    46 2075"},{"path":"https://wevertonbio.github.io/RuHere/articles/flagging_records_species_list.html","id":"using-iucn","dir":"Articles","previous_headings":"Flagging with expert information","what":"Using IUCN","title":"4. Flagging Records with Species List Information","text":"filtering records using IUCN, can specify origin presence type. origin categories include \"native\" (default), \"introduced\", \"reintroduced\", \"vagrant\", \"origin uncertain\", \"assisted colonisation\", \"\". available presence type categories include \"extant\", \"probably extant\", \"possibly extant\", \"extinct\", \"possibly extinct\", \"presence uncertain\", \"\" (default).  function returns original data.frame augmented new column named iucn_flag, records falling outside IUCN-defined range flagged FALSE. IUCN provide distributional information Cyanocorax caeruleus, function returns NA values species.","code":"# Flag using IUCN-defined range occ <- flag_iucn(data_dir = dataset_dir, #Directory where dataset was saved                  occ = occ) # Number of records flagged (FALSE) for each species table(occ$species, occ$iucn_flag) #>                              #>                              FALSE TRUE #>   Araucaria angustifolia       166  758 #>   Cyanocorax caeruleus           0    0 #>   Handroanthus serratifolius    44 2077"},{"path":"https://wevertonbio.github.io/RuHere/articles/flagging_records_species_list.html","id":"using-botanical-information-and-ecology-network-bien","dir":"Articles","previous_headings":"Flagging with expert information","what":"Using Botanical Information and Ecology Network (BIEN)","title":"4. Flagging Records with Species List Information","text":"BIEN range maps available, function checks records fall within modeled distribution polygons.  function returns original data.frame augmented new column named bien_flag, records falling outside BIEN-defined range flagged FALSE. , BIEN provides distributional information Handroanthus serratifolius:","code":"# Flag using BIEN-defined range occ <- flag_bien(data_dir = dataset_dir, #Directory where dataset was saved                  occ = occ) #> Checking the distribution from 1 of 3 species #> Checking the distribution from 1 of 3 species # Number of records flagged (FALSE) for each species table(occ$species, occ$bien_flag) #>                              #>                              FALSE TRUE #>   Araucaria angustifolia         0    0 #>   Cyanocorax caeruleus           0    0 #>   Handroanthus serratifolius    69 2052"},{"path":"https://wevertonbio.github.io/RuHere/articles/flagging_records_species_list.html","id":"using-brazilian-flora-and-funga-florabr","dir":"Articles","previous_headings":"Flagging with expert information","what":"Using Brazilian Flora and Funga (florabr)","title":"4. Flagging Records with Species List Information","text":"flagging using florabr, can specify origin (\"native\" (default), \"cultivated\", \"naturalized\"), well whether validate occurrences federal states (by_state = TRUE, default) /biomes (by_biome = TRUE, default). species endemic Brazil, can also choose flag records occurring outside country (by_endemism = TRUE, default).  function returns original data.frame augmented new column named florabr_flag, records falling outside florabr-defined range flagged FALSE. , florabr provide distributional information Cyanocorax caeruleus:","code":"# Flag using florabr-defined range occ <- flag_florabr(data_dir = dataset_dir, #Directory where dataset was saved                     occ = occ) # Number of records flagged (FALSE) for each species table(occ$species, occ$florabr_flag) #>                              #>                              FALSE TRUE #>   Araucaria angustifolia        25  899 #>   Cyanocorax caeruleus           0    0 #>   Handroanthus serratifolius     5 2116"},{"path":"https://wevertonbio.github.io/RuHere/articles/flagging_records_species_list.html","id":"using-taxonomic-catalog-of-the-brazilian-fauna-faunabr","dir":"Articles","previous_headings":"Flagging with expert information","what":"Using Taxonomic Catalog of the Brazilian Fauna (faunabr)","title":"4. Flagging Records with Species List Information","text":"flagging records using faunabr, can specify origin (\"native\", \"cryptogenic\", \"exotic\", default NULL, meaning origins considered), well whether validate occurrences federal states (by_state = TRUE, default) /countries (by_country= TRUE, default).  function returns original data.frame augmented new column named faunabr_flag, records falling outside faunabr-defined range flagged FALSE. , fauna provides distributional information Cyanocorax caeruleus:","code":"# Flag using florabr-defined range occ <- flag_faunabr(data_dir = dataset_dir, #Directory where dataset was saved                     occ = occ) # Number of records flagged (FALSE) for each species table(occ$species, occ$faunabr_flag) #>                              #>                              FALSE TRUE #>   Araucaria angustifolia         0    0 #>   Cyanocorax caeruleus           4 1031 #>   Handroanthus serratifolius     0    0"},{"path":"https://wevertonbio.github.io/RuHere/articles/flagging_records_species_list.html","id":"map-of-occurrence-flags","dir":"Articles","previous_headings":"","what":"Map of occurrence flags","title":"4. Flagging Records with Species List Information","text":"records flagged, highly recommended visualize assess whether flagging accurate proceeding final record removal. explained detail vignette 3. Flagging Records Using Associated Information, RuHere provides two options mapping flagged records: interactive option via map_here(), uses mapview package, static option via ggmap_here(), uses ggplot2. Let’s see flagged record Paraná Pine: Note: vignette, map generated map_here() static snapshot interactive map produced RStudio.  ggmap_here(), can also plot flag separate panel setting facet_wrap = TRUE:  Records flagged FALSE multiple expert sources strong candidates removal. can remove flagged records using remove_flagged() (details, see vignette 3. Flagging Records Using Record Information):","code":"# Interactive map with map_here() map_here(occ, species = \"Araucaria angustifolia\", label = \"record_id\", cex = 4) ggmap_here(occ, species = \"Araucaria angustifolia\", facet_wrap = TRUE) occ_cleaned <- remove_flagged(occ)"},{"path":"https://wevertonbio.github.io/RuHere/articles/flagging_records_species_list.html","id":"summarizing-flags","dir":"Articles","previous_headings":"Map of occurrence flags","what":"Summarizing flags","title":"4. Flagging Records with Species List Information","text":"previous vignette (3. Flagging Records Using Record Information), can create bar plot summarizing number records flagged flagging function:  function returns data.frame summarizing number records per flag ggplot2 object displaying summary bar plot:   final vignette (5. Reducing Sampling Bias), show mitigate sampling bias thinning records geographic environmental space.","code":"flag_summary <- summarize_flags(occ) # Data.frame summarizing the number of records per flag flag_summary$df_summary #>              Flag    n #> 2 Outside faunabr    4 #> 1 Outside florabr   30 #> 5    Outside BIEN   69 #> 3    Outside WCVP  157 #> 4    Outside IUCN  210 #> 6           Valid 4080 # Bar plot flag_summary$plot_summary"},{"path":"https://wevertonbio.github.io/RuHere/articles/obtaining_data.html","id":"introduction","dir":"Articles","previous_headings":"","what":"Introduction","title":"1. Obtaining and preparing species occurrence data","text":"Species occurrence records foundation biodiversity studies. However, working multiple data sources (GBIF, SpeciesLink, BIEN, iDigBio) presents two major challenges: data acquisition format standardization. database uses different column names structures, creating potential problem researchers. , use example species Araucaria angustifolia, also known Paraná Pine. emblematic coniferous tree native subtropical highlands Brazil, Argentina, Paraguay. Due historical overexploitation severe habitat loss, species currently classified Critically Endangered (CR) IUCN Red List. conservation status makes accurate comprehensive occurrence data crucial ecological modeling, understanding population decline, guiding reforestation efforts. Araucaria forest southern Brazil vignette demonstrates configure access credentials, download occurrence data multiple sources, standardize unify results, finally convert spatial objects ready ecological analysis.","code":"# Load RuHere package library(RuHere)"},{"path":"https://wevertonbio.github.io/RuHere/articles/obtaining_data.html","id":"overview-of-the-functions","dir":"Articles","previous_headings":"","what":"Overview of the functions:","title":"1. Obtaining and preparing species occurrence data","text":"set_specieslink_credentials(): stores SpeciesLink API key R environment. set_gbif_credentials(): stores GBIF credentials (username, email, password) R environment. get_specieslink(): retrieves occurrence data SpeciesLink network using user-defined filters. prepare_gbif_download(): prepares query data required robust GBIF download request. request_gbif(): submits asynchronous request download occurrence data GBIF. import_gbif(): imports dataset processed downloaded GBIF using request key generated request_gbif(). get_bien(): downloads occurrence records Botanical Information Ecology Network (BIEN) database. get_idigbio(): downloads species occurrence records iDigBio (Integrated Digitized Biocollections) database. format_columns(): formats standardizes column names data types occurrence dataset using built-template custom metadata object. create_metadata(): creates custom metadata template maps column names external (non-standard) dataset package’s required standardized schema. bind_here(): combines multiple standardized occurrence data frames single dataset. spatialize(): converts unified occurrence data frame SpatVector object.","code":""},{"path":"https://wevertonbio.github.io/RuHere/articles/obtaining_data.html","id":"setting-up-credentials","dir":"Articles","previous_headings":"","what":"Setting up credentials","title":"1. Obtaining and preparing species occurrence data","text":"databases require authentication access API. recommended configure starting downloads.","code":""},{"path":"https://wevertonbio.github.io/RuHere/articles/obtaining_data.html","id":"gbif","dir":"Articles","previous_headings":"Setting up credentials","what":"GBIF","title":"1. Obtaining and preparing species occurrence data","text":"download data GBIF using asynchronous API, must account store credentials (username, email, password) R environment. can find GBIF username e-mail address associated account GBIF website (https://www.gbif.org/user/profile).","code":"set_gbif_credentials(   gbif_username = \"your_username\",   gbif_email = \"your_email@domain.com\",   gbif_password = \"your_password\",   verbose = FALSE )"},{"path":"https://wevertonbio.github.io/RuHere/articles/obtaining_data.html","id":"specieslink","dir":"Articles","previous_headings":"Setting up credentials","what":"SpeciesLink","title":"1. Obtaining and preparing species occurrence data","text":"retrieve records SpeciesLink network, API key required. can create check API key : https://specieslink.net/aut/profile/apikeys. Note: GBIF SpeciesLink require credentials configured beforehand. BIEN iDigBio databases require API authentication retrieving occurrence data.","code":"set_specieslink_credentials(specieslink_key = \"your_api_key\", verbose = FALSE)"},{"path":"https://wevertonbio.github.io/RuHere/articles/obtaining_data.html","id":"data-acquisition","dir":"Articles","previous_headings":"","what":"Data acquisition","title":"1. Obtaining and preparing species occurrence data","text":"download occurrence data Araucaria angustifolia example.","code":""},{"path":"https://wevertonbio.github.io/RuHere/articles/obtaining_data.html","id":"gbif-1","dir":"Articles","previous_headings":"Data acquisition","what":"GBIF","title":"1. Obtaining and preparing species occurrence data","text":"ensure access large datasets, GBIF download process split three steps: prepare, request, import. download record GBIF, need define directory save files. function returns data.frame containing information species GBIF, including total number records, number records geographic coordinates (longitude latitude), GBIF key (ID), taxonomic classification. confirming information correct indeed species want download records, can use object request download GBIF. default, function retrieves records geographic coordinates without spatial issues, can modified. function also supports complex download requests allowing predicates passed via additional_predicates argument. See help(rgbif::pred) details. request processed GBIF may take several minutes complete (usually less 15 minutes, potentially several hours depending number occurrences). can check status download using rgbif package. process complete, following message returned: Now can download occurrence records import R: default, function imports dataset 25 columns required functions package. behavior can changed setting select_columns = FALSE explicitly specifying columns import via columns_to_import argument.","code":"# Store downloads in a temporary directory # In your own project, replace this with a permanent directory output_dir <- file.path(tempdir(), \"occ_data\") dir.create(output_dir) # Prepare the taxonomic query gbif_prep <- prepare_gbif_download(species = \"Araucaria angustifolia\") gbif_prep #> with_coordinates n_records                species usageKey                          scientificName          canonicalName #> 1             3056     15696 Araucaria angustifolia  2684940 Araucaria angustifolia (Bertol.) Kuntze Araucaria angustifolia #>     rank   status confidence matchType kingdom       phylum   order        family     genus kingdomKey phylumKey classKey #> 1 SPECIES ACCEPTED         97     EXACT Plantae Tracheophyta Pinales Araucariaceae Araucaria          6   7707728      194 #>   orderKey familyKey genusKey speciesKey     class          verbatim_name #> 1      640      3924  2684910    2684940 Pinopsida Araucaria angustifolia # Submit the request to GBIF gbif_req <- request_gbif(   gbif_info = gbif_prep,   hasCoordinate = TRUE,      # Retrieve only records with coordinates   hasGeospatialIssue = FALSE # Exclude records with geospatial issues ) rgbif::occ_download_wait(gbif_req) #> status: succeeded #> download is done, status: succeeded # Import the processed file occ_gbif <- import_gbif(request_key = gbif_req) #> Download file size: 2.04 MB head(occ_gbif) #> # A tibble: 6 × 25 #>   scientificName                acceptedScientificName occurrenceID collectionCode catalogNumber decimalLongitude #> decimalLatitude #>   <chr>                         <chr>                  <chr>        <chr>          <chr>                    <dbl>           #> <dbl> #> 1 Araucaria angustifolia (Bert… Araucaria angustifoli… urn:catalog… ALTA-VP        74703                    -52.8          #> -26.4  #> 2 Araucaria angustifolia (Bert… Araucaria angustifoli… https://www… Observations   329390275                -49.2          #> -25.4  #> 3 Araucaria angustifolia (Bert… Araucaria angustifoli… https://www… Observations   329483122                -49.5          #> -28.0  #> 4 Araucaria angustifolia (Bert… Araucaria angustifoli… https://www… Observations   329455309                -74.0            #> 4.68 #> 5 Araucaria angustifolia (Bert… Araucaria angustifoli… https://www… Observations   329576016                -45.6          #> -22.7  #> 6 Araucaria angustifolia (Bert… Araucaria angustifoli… https://www… Observations   329805643                175.           #> -39.9  #> # ℹ 18 more variables: coordinateUncertaintyInMeters <dbl>, elevation <dbl>, continent <chr>, countryCode <chr>, #> #   stateProvince <chr>, municipality <chr>, locality <chr>, verbatimLocality <chr>, year <int>, eventDate <chr>, #> #   recordedBy <chr>, identifiedBy <chr>, basisOfRecord <chr>, occurrenceRemarks <chr>, habitat <chr>, datasetName <chr>, #> #   datasetKey <chr>, speciesKey <int>"},{"path":"https://wevertonbio.github.io/RuHere/articles/obtaining_data.html","id":"specieslink-bien-and-idigbio","dir":"Articles","previous_headings":"Data acquisition","what":"SpeciesLink, BIEN, and iDigBio","title":"1. Obtaining and preparing species occurrence data","text":"GBIF used database obtaining occurrence records. However, unique records can found databases. RuHere package, implement functions downloading records 3 databases: SpeciesLink: large-scale biodiversity information portal created Brazil. records found SpeciesLink also found GBIF, also provide unique records. BIEN: occurrence records cleaned standardized Botanical Information Ecology Network. iDigBio: occurrence records cleaned standardized Integrated Digitized Biocollections project. databases allow direct downloading single function call.","code":"# SpeciesLink: Filtering by Species occ_sl <- get_specieslink(species = \"Araucaria angustifolia\", verbose = FALSE)  # BIEN: Natives only, excluding cultivated records occ_bien <- get_bien(species = \"Araucaria angustifolia\",                      cultivated = FALSE,                      natives.only = TRUE,                      verbose = FALSE) #> Getting page 1 of records  # iDigBio:  occ_idig <- get_idigbio(species = \"Araucaria angustifolia\")"},{"path":"https://wevertonbio.github.io/RuHere/articles/obtaining_data.html","id":"standardization-and-unification","dir":"Articles","previous_headings":"","what":"Standardization and unification","title":"1. Obtaining and preparing species occurrence data","text":"stage, four occurrence datasets (occ_gbif, occ_sl, occ_bien, occ_idig). can merge datasets using bind_here() function. However, get error try merge raw datasets: occurs data source may provide datasets different column names (e.g., decimalLongitude vs. longitude vs. long). Another common issue involves column classes. instance, date-related fields (collection dates) may stored character vectors, numeric values, objects class Date. Special characters can also cause problems, datasets different text encodings may fail bind correctly. issues can addressed using format_columns() function. function applies metadata templates standardize column names data types, ensuring datasets consistent can safely combined.","code":"all_occ <- bind_here(occ_gbif, occ_sl, occ_bien, occ_idig) #> Error: All datasets must have the same columns."},{"path":"https://wevertonbio.github.io/RuHere/articles/obtaining_data.html","id":"standardizing-columns-format_columns","dir":"Articles","previous_headings":"Standardization and unification","what":"Standardizing columns (format_columns)","title":"1. Obtaining and preparing species occurrence data","text":"apply function dataset, specifying source metadata argument. standardizes column names, extracts clean binomials, fixes data types. may sometimes encounter warning “NAs introduced coercion”. occurs column expected store numeric values (example, year) contains data another class (character strings) converted numeric. cases, incompatible values replaced NA. Now, can safelly bind occurrences:","code":"# Standardizing GBIF gbif_std <- format_columns(occ_gbif, metadata = \"gbif\")  # Standardizing SpeciesLink (checking for encoding issues) sl_std <- format_columns(occ_sl, metadata = \"specieslink\", check_encoding = TRUE) #> Warning: NAs introduced by coercion>   # Standardizing BIEN bien_std <- format_columns(occ_bien, metadata = \"bien\")  # Standardizing iDigBio idig_std <- format_columns(occ_idig, metadata = \"idigbio\") all_occ <- bind_here(gbif_std, sl_std, bien_std, idig_std) # Number of records by database table(all_occ$data_source) #>       bien        gbif     idigbio specieslink  #>        137        3000        1271        1224"},{"path":"https://wevertonbio.github.io/RuHere/articles/obtaining_data.html","id":"customizing-metadata-create_metadata","dir":"Articles","previous_headings":"Standardization and unification","what":"Customizing Metadata (create_metadata)","title":"1. Obtaining and preparing species occurrence data","text":"functions automatically standardize data package contains internal metadata templates (“presets”) GBIF, SpeciesLink, BIEN, iDigBio. However, import occurrence data external source (e.g., local CSV file) different column names, must first create metadata template using create_metadata(). maps original column names package’s standardized schema. following example demonstrates handle data external source, using occurrences cougar (Puma concolor) originally atlanticr R package (included RuHere demonstration purposes). summary, arguments must filled names columns occurrence dataset equivalent expected fields. example, example dataset, scientificName stored \"actual_species_name\" column, coordinates stored \"longitude\" \"latitude\" columns. three columns mandatory ones, strongly recommend providing many additional columns possible order take full advantage functions package. Even though occurrence dataset different species, can merge cougar occurrences Araucaria: result robust dataset containing essential standardized columns species, decimalLongitude, decimalLatitude, year.","code":"# Import data example data(\"puma_atlanticr\", package = \"RuHere\")  # Create metadata to standardize the occurrences puma_metadata <- create_metadata(occ = puma_atlanticr,                                  scientificName = \"actual_species_name\",                                  decimalLongitude = \"longitude\",                                  decimalLatitude = \"latitude\",                                  elevation = \"altitude\",                                  country = \"country\",                                  stateProvince = \"state\",                                  municipality = \"municipality\",                                  locality = \"study_location\",                                  year = \"year_finish\",                                  habitat = \"vegetation_type\",                                  datasetName = \"reference\")  # Now, we can use this metadata to standardize the columns puma_occ <- format_columns(occ = puma_atlanticr, metadata = puma_metadata,                            binomial_from = \"actual_species_name\",                            data_source = \"atlanticr\")  head(puma_occ[, 1:5]) #>     record_id       species scientificName collectionCode catalogNumber #> 1 atlanticr_1 Puma concolor  Puma concolor           <NA>          <NA> #> 2 atlanticr_2 Puma concolor  Puma concolor           <NA>          <NA> #> 3 atlanticr_3 Puma concolor  Puma concolor           <NA>          <NA> #> 4 atlanticr_4 Puma concolor  Puma concolor           <NA>          <NA> #> 5 atlanticr_5 Puma concolor  Puma concolor           <NA>          <NA> #> 6 atlanticr_6 Puma concolor  Puma concolor           <NA>          <NA> occ_araucaria_cougar <- bind_here(all_occ, #Occurrences of Araucaria                                   puma_occ) #Occurrences of cougar # Number of records per species table(occ_araucaria_cougar$species) #> Araucaria angustifolia          Puma concolor  #>                  5632                    139"},{"path":"https://wevertonbio.github.io/RuHere/articles/obtaining_data.html","id":"spatialization-spatialize","dir":"Articles","previous_headings":"","what":"Spatialization (spatialize)","title":"1. Obtaining and preparing species occurrence data","text":"visualize data map perform geospatial operations, can convert data frame SpatVector object. object can plotted using terra package (terra::plot) displayed interactive map using mapview package:","code":"# Convert to spatial object occ_spatial <- spatialize(occ = occ_araucaria_cougar)  # Load mapview library(mapview)  # Plot the distribution using mapview mapview(occ_spatial, zcol = \"species\", layer.name = \"Species\", cex = 4)"},{"path":"https://wevertonbio.github.io/RuHere/articles/sampling_bias.html","id":"introduction","dir":"Articles","previous_headings":"","what":"Introduction","title":"5. Reducing sampling bias","text":"studies relying primary biodiversity data, sampling bias can problem creates clusters points reflect accessible areas preferences researchers collected data, rather ecological preferences species. Two common approaches mitigate sampling bias involve thinning occurrence records (.e., removing records close ). Thinning can performed either geographic environmental space. RuHere package allows use approaches also enables combining results methods. example, let’s use records Araucaria angustifolia available package, removing records flagged potentially problematic:","code":"# Load packages library(RuHere) library(terra) #> terra 1.8.93 library(mapview)  # Import occurrence data data(\"occ_flagged\", package = \"RuHere\") # Remove flagged records occ <- remove_flagged(occ = occ_flagged) # Plot records ggmap_here(occ = occ)"},{"path":"https://wevertonbio.github.io/RuHere/articles/sampling_bias.html","id":"heatmap-for-occurrence-data","dir":"Articles","previous_headings":"","what":"Heatmap for occurrence data","title":"5. Reducing sampling bias","text":"starting thinning process, let’s create heatmap based kernel density estimation records:  can use function ggmap_here() plot occurrences heatmap (use map_here() prefer interactive version).  can observe notable hotspot cluster records around Curitiba city (capital Paraná, southern Brazil), indicates strong sampling bias. Let’s evaluate effect thinning records geographic space.","code":"# Generate heatmap heatmap <- spatial_kde(occ = occ, resolution = 0.2, buffer_extent = 50,                        radius = 2, zero_as_NA = TRUE) ggmap_here(occ = occ, size_points = 0.5, heatmap = heatmap)"},{"path":"https://wevertonbio.github.io/RuHere/articles/sampling_bias.html","id":"thinning-in-geographic-space","dir":"Articles","previous_headings":"","what":"Thinning in geographic space","title":"5. Reducing sampling bias","text":"thin_geo() function flags occurrence records thinning keeping one record per species within radius d kilometers. function similar thin() spThin package, important difference: allows specifying priority order retaining records. thinning distance provided (e.g., 10 km), function identifies clusters records within distance. Within cluster, retains record highest priority according column defined prioritary_column (example, using recent record prioritary_column = \"year\"), flags remaining nearby records removal. prioritary_column NULL, priority follows original row order input occ data frame. Let’s thin records using 10 km radius keep recent record priority:  function flagged 1,860 records removal. Let’s visualize flagged records using map_here() create heatmap remaining records.  thinned dataset (green) produces spatially uniform heatmap reduces strong sampling bias around Curitiba. explore different distance thresholds next section.","code":"# Thin records using a 10 km distance threshold occ_thin <- thin_geo(occ = occ, d = 10, prioritary_column = \"year\") sum(!occ_thin$thin_geo_flag)  # Number of records flagged for removal #> [1] 1860 # Remove flagged records occ_thin_geo <- remove_flagged(occ = occ_thin) # Create heatmap heatmap_thin_geo <- spatial_kde(occ = occ_thin_geo, resolution = 0.2,                                  buffer_extent = 50, radius = 2,                                  zero_as_NA = TRUE) # Plot ggmap_here(occ_thin, size_points = 0.5, heatmap = heatmap_thin_geo)"},{"path":"https://wevertonbio.github.io/RuHere/articles/sampling_bias.html","id":"selecting-the-best-distance-to-thin-records","dir":"Articles","previous_headings":"","what":"Selecting the best distance to thin records","title":"5. Reducing sampling bias","text":"key question determining optimal thinning distance, since rarely sufficient biological justification choosing specific value. address issue, adapted approach Velazco et al. (2020), computes spatial autocorrelation (Moran’s ) datasets generated using different thinning distances selects distance yields lowest average spatial autocorrelation. extended procedure adjusting selection rules avoid choosing datasets records unrealistically low Moran’s values. See help(flag_geo_moran) full details selection procedure. example, let’s test effect thinning using distances 1, 3, 5, 7, 10, 15, 20, 30 km. computing spatial correlation, need raster containing environmental variables. , specify priority retaining records (recent ones).  results tested distance returned imoran data.frame. includes Moran’s variable summary statistics across variables (mean, median, minimum, maximum), along number retained records (n_filtered) proportion records flagged (prop_lost).  “best” distance reduces spatial autocorrelation without discarding many records 15km. Using threshold, 2,040 records flagged.  Visual inspection shows even uniform heatmap:  potential issue filtering records geographic space two nearby records may actually occur distinct environmental conditions, especially highly heterogeneous regions. can lead loss unique information species’ niche environmental tolerances. address , can instead apply thinning environmental space, explored next sections.","code":"# Load example of raster variables data(\"worldclim\", package = \"RuHere\") # Unwrap Packed raster r <- terra::unwrap(worldclim) # Select thinned occurrences occ_geo_moran <- flag_geo_moran(occ = occ,                                  d = c(1, 3, 5, 7, 10, 15, 20, 30),                                  prioritary_column = \"year\",                                 env_layers = r) #> Filtering records... #> Calculating spatial autocorrelation using Moran Index... occ_geo_moran$imoran #>                   species Distance      bio_1     bio_7    bio_12 median_moran #> 1  Araucaria angustifolia        1 0.26797715 0.4154464 0.2700062    0.2700062 #> 3  Araucaria angustifolia        3 0.20037829 0.3587940 0.1982657    0.2003783 #> 5  Araucaria angustifolia        5 0.17522297 0.3368257 0.1765754    0.1765754 #> 7  Araucaria angustifolia        7 0.16065669 0.3235316 0.1695589    0.1695589 #> 10 Araucaria angustifolia       10 0.15567148 0.2954804 0.1622244    0.1622244 #> 15 Araucaria angustifolia       15 0.14275985 0.2697169 0.1536365    0.1536365 #> 20 Araucaria angustifolia       20 0.13085143 0.2802101 0.1463788    0.1463788 #> 30 Araucaria angustifolia       30 0.09891003 0.2382515 0.1634006    0.1634006 #>    mean_moran  min_moran max_moran n_filtered all_records prop_lost #> 1   0.3178099 0.26797715 0.4154464       1236        2426 0.4905194 #> 3   0.2524793 0.19826573 0.3587940        878        2426 0.6380874 #> 5   0.2295414 0.17522297 0.3368257        732        2426 0.6982688 #> 7   0.2179157 0.16065669 0.3235316        634        2426 0.7386645 #> 10  0.2044587 0.15567148 0.2954804        517        2426 0.7868920 #> 15  0.1887044 0.14275985 0.2697169        386        2426 0.8408904 #> 20  0.1858135 0.13085143 0.2802101        313        2426 0.8709810 #> 30  0.1668540 0.09891003 0.2382515        206        2426 0.9150866 # Best distance selected occ_geo_moran$distance #> [1] \"15\" # Number of flagged records using this distance to thin sum(!occ_geo_moran$occ$thin_geo_flag) #> [1] 2040 # Remove flagged records occ_thin_geo_moran <- remove_flagged(occ = occ_geo_moran$occ) # Create heatmap heatmap_thin_geo_moran <- spatial_kde(occ = occ_thin_geo_moran,                                        resolution = 0.2,                                        buffer_extent = 50, radius = 2,                                       zero_as_NA = TRUE) ggmap_here(occ = occ_geo_moran$occ, size_points = 0.5,             heatmap = heatmap_thin_geo_moran)"},{"path":"https://wevertonbio.github.io/RuHere/articles/sampling_bias.html","id":"thinning-in-environmental-space","dir":"Articles","previous_headings":"","what":"Thinning in environmental space","title":"5. Reducing sampling bias","text":"Thinning environmental space removes records similar environmental conditions, representing redundant ecological information. achieved building multidimensional grid environmental space, dividing variable n_bins equally sized intervals. record assigned unique environmental block (combination bins), records within block (.e., environmentally similar) flagged removal. illustrate environmental grid works, let’s use get_env_bins() 10 bins:  function returns environmental block IDs record. can visualize grid two variables:  can see several records fall block, meaning environmentally similar therefore redundant. Let’s flag redundant records using thin_env():  function flagged 2,227 records. Let’s visualize create heatmap remaining data.  Thinning environmental space produces spatial pattern differs dataset filtered exclusively geographic space. Similar thinning process geographic space, can test different numbers bins (see next section).","code":"# Get bins b <- get_env_bins(occ = occ, env_layers = r, n_bins = 10) head(b$data) #>      bio_1  bio_7 bio_12 bio_1_bin bio_7_bin bio_12_bin block_id #> 1 17.69396 18.667   1523         5         5          3    5_5_3 #> 2 17.10746 17.701   1397         5         4          2    5_4_2 #> 3 16.44496 19.445   1698         4         6          4    4_6_4 #> 4 18.17946 22.320   1872         6         9          5    6_9_5 #> 5 19.71071 18.632   1496         7         5          3    7_5_3 #> 6 17.77913 19.411   1576         5         6          3    5_6_3 # Plot plot_env_bins(b, x_var = \"bio_1\", y_var = \"bio_12\",               xlab = \"Temperature\", ylab = \"Precipitation\") # Flag records that are close to each other in the enviromnetal space occ_thin_env <- thin_env(occ = occ, env_layers = r, n_bins = 10,                           prioritary_column = \"year\") # Number of flagged (redundant) records sum(!occ_thin_env$thin_env_flag) #Number of flagged records #> [1] 2227 # Remove flagged records occ_thinned_env <- remove_flagged(occ = occ_thin_env) # Create heatmap heatmap_thin_env <- spatial_kde(occ = occ_thinned_env, resolution = 0.2,                                  buffer_extent = 50, radius = 2,                                  zero_as_NA = TRUE) ggmap_here(occ_thin_env, size_points = 0.5, heatmap = heatmap_thin_env)"},{"path":"https://wevertonbio.github.io/RuHere/articles/sampling_bias.html","id":"selecting-the-best-number-of-environmental-bins","dir":"Articles","previous_headings":"","what":"Selecting the best number of environmental bins","title":"5. Reducing sampling bias","text":"geographic thinning, key parameter distance. environmental thinning, number bins. bins result finer partitions environmental space, reducing chances records falling block. geographic thinning, can test multiple bin values select one reduces spatial autocorrelation without discarding many records. , test 5, 10, 20, 30, 40, 50, 60, 70, 80 bins:  , results returned imoran data frame. includes Moran’s variable summary statistics across variables (mean, median, minimum, maximum), along number retained records (n_filtered) proportion records flagged (prop_lost).  “best” number bins reduces spatial autocorrelation without discarding many records 70. threshold, 1,659 records flagged.  Let’s check distribution records heatmap generated unflagged records:","code":"# Select thinned occurrences occ_env_moran <- flag_env_moran(occ = occ,                                  n_bins = c(5, 10, 20, 30, 40, 50, 60, 70, 80),                                  prioritary_column = \"year\",                                 env_layers = r) #> Filtering records... #> Calculating spatial autocorrelation using Moran Index... occ_env_moran$imoran #>                   species n_bins     bio_1     bio_7    bio_12 median_moran #> 5  Araucaria angustifolia      5 0.2401256 0.3282298 0.1749087    0.2401256 #> 10 Araucaria angustifolia     10 0.2099819 0.3770858 0.1764008    0.2099819 #> 20 Araucaria angustifolia     20 0.1762887 0.3638996 0.1923568    0.1923568 #> 30 Araucaria angustifolia     30 0.1787372 0.3657022 0.1944775    0.1944775 #> 40 Araucaria angustifolia     40 0.1903925 0.3540410 0.1927357    0.1927357 #> 50 Araucaria angustifolia     50 0.1873899 0.3515700 0.1926828    0.1926828 #> 60 Araucaria angustifolia     60 0.1839720 0.3525726 0.1930614    0.1930614 #> 70 Araucaria angustifolia     70 0.1839973 0.3561391 0.1930398    0.1930398 #> 80 Araucaria angustifolia     80 0.1865604 0.3558738 0.1934019    0.1934019 #>    mean_moran min_moran max_moran n_filtered all_records prop_lost #> 5   0.2477547 0.1749087 0.3282298         57        2426 0.9765045 #> 10  0.2544895 0.1764008 0.3770858        199        2426 0.9179720 #> 20  0.2441817 0.1762887 0.3638996        504        2426 0.7922506 #> 30  0.2463056 0.1787372 0.3657022        658        2426 0.7287716 #> 40  0.2457231 0.1903925 0.3540410        715        2426 0.7052762 #> 50  0.2438809 0.1873899 0.3515700        748        2426 0.6916735 #> 60  0.2432020 0.1839720 0.3525726        757        2426 0.6879637 #> 70  0.2443921 0.1839973 0.3561391        767        2426 0.6838417 #> 80  0.2452787 0.1865604 0.3558738        769        2426 0.6830173 # Best distance selected occ_env_moran$n_bins #> [1] \"70\" # Number of flagged records using this distance to thin sum(!occ_env_moran$occ$thin_env_flag) #> [1] 1659 # Remove flagged records occ_thin_env_moran <- remove_flagged(occ = occ_env_moran$occ) # Create heatmap heatmap_thin_env_moran <- spatial_kde(occ = occ_thin_env_moran,                                        resolution = 0.2,                                        buffer_extent = 50, radius = 2,                                       zero_as_NA = TRUE) ggmap_here(occ = occ_env_moran$occ, size_points = 0.5,             heatmap = heatmap_thin_env_moran)"},{"path":"https://wevertonbio.github.io/RuHere/articles/sampling_bias.html","id":"consensus-between-environmental-and-geographic-thinning","dir":"Articles","previous_headings":"","what":"Consensus between environmental and geographic thinning","title":"5. Reducing sampling bias","text":"Thinning environmental space can suffer opposite issue geographic thinning: environmentally similar records may geographically far apart, potentially removing important information species’ geographic range. address , flag_consensus() function can used flag records redundant geographic environmental space.  Let’s visualize records flagged geographic thinning, environmental thinning, :  Red points indicate records thinned geographic space; yellow points indicate thinning environmental space; blue points indicate records thinned . Note retained records flagged geographic thinning, flagged environmental thinning, flagged either method.","code":"# Flag occurrences by thinning in geographic space occ_geo_moran <- flag_geo_moran(occ = occ,                                  d = c(1, 3, 5, 7, 10, 15, 20, 30),                                  prioritary_column = \"year\",                                 env_layers = r) #> Filtering records... #> Calculating spatial autocorrelation using Moran Index...  # Flag occurrences by thinning in environmental space occ_env_moran <- flag_env_moran(occ = occ_geo_moran$occ,                                  n_bins = c(5, 10, 20, 30, 40, 50, 60, 70, 80),                                  prioritary_column = \"year\",                                 env_layers = r) #> Filtering records... #> Calculating spatial autocorrelation using Moran Index... # Get consensus occ_consensus <- flag_consensus(occ = occ_env_moran$occ,                                 flags = c(\"thin_geo\", \"thin_env\"),                                 consensus_rule = \"any_true\",                                 flag_name = \"thin_geo_env_flag\") # Remove flagged occ_consensus_filtered <- remove_flagged(occ = occ_consensus, flags = NULL,                                          additional_flags = c(\"thin_geo_env\" = \"thin_geo_env_flag\"))  # Create heatmap heatmap_consensus_filtered <- spatial_kde(occ = occ_consensus_filtered,                                           resolution = 0.2,                                           buffer_extent = 50,                                           radius = 2, zero_as_NA = TRUE) ggmap_here(occ = occ_consensus,            flags = c(\"thin_geo\", \"thin_env\"),            additional_flags = \"thin_geo_env_flag\",            names_additional_flags = \"Thinned geo-env\",            col_additional_flags = \"blue\",           size_points = 0.5,           heatmap = heatmap_consensus_filtered)"},{"path":"https://wevertonbio.github.io/RuHere/articles/spatial_consistency.html","id":"introduction","dir":"Articles","previous_headings":"","what":"Introduction","title":"2. Ensuring spatial consistency: countries, states, and coordinates","text":"Even initial formatting, species occurrence data often retain spatial inconsistencies can compromise subsequent analyses. Common issues include varying spellings country (.e., Brasil, Brazil BR) state name, missing administrative information, coordinates fall outside political-administrative jurisdiction assigned record. vignette demonstrates ensure spatial consistency occurrence records addressing name standardization, data imputation, verification, correction.","code":"# Load RuHere package library(RuHere)"},{"path":"https://wevertonbio.github.io/RuHere/articles/spatial_consistency.html","id":"overview-of-the-functions","dir":"Articles","previous_headings":"","what":"Overview of the functions:","title":"2. Ensuring spatial consistency: countries, states, and coordinates","text":"standardize_countries(): standardizes country names codes. standardize_states(): standardizes state/province names codes. country_from_coords(): extracts country name geographic coordinates. states_from_coords(): extracts state/province name geographic coordinates. check_countries(): verifies coordinates fall within boundaries assigned country. check_states(): verifies coordinates fall within boundaries assigned state/province. fix_countries(): identifies corrects common coordinate errors based country jurisdiction.","code":""},{"path":"https://wevertonbio.github.io/RuHere/articles/spatial_consistency.html","id":"standardizing-country-and-state-names","dir":"Articles","previous_headings":"","what":"Standardizing country and state names","title":"2. Ensuring spatial consistency: countries, states, and coordinates","text":"Standardizing administrative names first step ensure spelling variations codes mapped single accepted format.","code":""},{"path":"https://wevertonbio.github.io/RuHere/articles/spatial_consistency.html","id":"occurrence-data","dir":"Articles","previous_headings":"Standardizing country and state names","what":"Occurrence data","title":"2. Ensuring spatial consistency: countries, states, and coordinates","text":"stage, occurrence dataset standardized using format_columns() function merged bind_here(). additional details workflow, see vignette “1. Obtaining preparing species occurrence data”. illustrate function works, use example occurrence dataset included package, contains records three species: Paraná pine (Araucaria angustifolia), azure jay (Cyanocorax caeruleus), yellow trumpet tree (Handroanthus albus).","code":"# Loading package occurrence data data(\"occurrences\", package = \"RuHere\") # Number of records per species table(occurrences$species) #>  #>     Araucaria angustifolia       Cyanocorax caeruleus  #>                        924                       1035  #> Handroanthus serratifolius  #>                       2121"},{"path":"https://wevertonbio.github.io/RuHere/articles/spatial_consistency.html","id":"standardizing-countries-standardize_countries","dir":"Articles","previous_headings":"Standardizing country and state names","what":"Standardizing countries (standardize_countries)","title":"2. Ensuring spatial consistency: countries, states, and coordinates","text":"function harmonizes country names using exact matching fuzzy matching correct typos variations. compares input comprehensive dictionary names codes provided rnaturalearthdata::map_units110(). function returns list two elements: $occ: original data frame two new columns: country_suggested (standardized corrected country name) country_source (whether suggested country came original metadata imputed coordinates). $report: summary corrections made, showing original name suggested/standardized name. first rows modified data frame standardization report:","code":"# Standardize country names occ_country_std <- standardize_countries(     occ = occurrences,     country_column = \"country\",     max_distance = 0.1,      # Maximum error distance for fuzzy matching     lookup_na_country = TRUE # Try to extract country from coords if value is      # NA using the country_from_coords() function internally ) # Printing first rows and columns occ_country_std$occ[1:3, 1:5] #>   country country_suggested country_source  record_id               species #> 1      AR         argentina       metadata  gbif_5516  Araucaria angustifolia #> 2      AR         argentina       metadata gbif_15849  Araucaria angustifolia #> 3      AR         argentina       metadata  gbif_4935  Araucaria angustifolia  occ_country_std$report[1:5, ] #>      country country_suggested #> 1  argentina         argentina #> 2    bolivia           bolivia #> 3     brasil            brazil #> 4         UY           uruguay #> 5         PT          portugal"},{"path":"https://wevertonbio.github.io/RuHere/articles/spatial_consistency.html","id":"standardizing-states-standardize_states","dir":"Articles","previous_headings":"Standardizing country and state names","what":"Standardizing states (standardize_states)","title":"2. Ensuring spatial consistency: countries, states, and coordinates","text":"Similarly, function standardizes state province names. uses previously standardized country column (country_suggested) disambiguate states might share names across different countries, using reference names postal codes provided rnaturalearthdata::states50(). Like standardize_countries(), standardize_states() function returns list two elements: $occ: input data frame two new columns: state_suggested (standardized corrected state/province name) state_source (indicates whether suggested state came original metadata imputed coordinates). $report: summary table corrections standardizations made, showing original name suggested name, constrained suggested country. first rows modified data frame standardization report:","code":"# Standardize state names occ_state_std <- standardize_states(     occ = occ_country_std$occ,     state_column = \"stateProvince\",     country_column = \"country_suggested\",     max_distance = 0.1,     lookup_na_state = TRUE # Try to extract state from coords if value is NA ) occ_state_std$occ[1:3, 1:6] #>   stateProvince state_suggested state_source country_suggested country country_source #> 1          acre            acre     metadata            brazil  brazil       metadata #> 2          acre            acre     metadata            brazil  brazil       metadata #> 3          acre            acre     metadata            brazil  brazil       metadata  occ_state_std$report[1:3, ] #>       stateProvince           state_suggested  country_suggested #> 1        sa£o paulo                 sao paulo             brazil #> 2         tocantins                 tocantins             brazil #> 3               RS          rio grande do sul             brazil"},{"path":"https://wevertonbio.github.io/RuHere/articles/spatial_consistency.html","id":"imputing-geographic-information-from-coordinates","dir":"Articles","previous_headings":"","what":"Imputing geographic information from coordinates","title":"2. Ensuring spatial consistency: countries, states, and coordinates","text":"Sometimes, records valid coordinates lack administrative labels entirely. can use spatial intersection retrieve information.","code":""},{"path":"https://wevertonbio.github.io/RuHere/articles/spatial_consistency.html","id":"extracting-country-from-coordinates-country_from_coords","dir":"Articles","previous_headings":"Imputing geographic information from coordinates","what":"Extracting country from coordinates (country_from_coords)","title":"2. Ensuring spatial consistency: countries, states, and coordinates","text":"function uses geographic coordinates (long, lat) reference world map (rnaturalearthdata::map_units110()) determine country point.","code":"# Explicitly extract country from coordinates for all records occ_with_country_xy <- country_from_coords(     occ = occ_state_std$occ,     from = \"all\", # 'all' extracts for every record; 'na_only' extracts for missing ones     output_column = \"country_xy\" )  # Compare the original country vs. the one derived from coordinates head(occ_with_country_xy[, c(\"country\", \"country_xy\")]) #>   country country_xy #> 1  brazil     brazil #> 2  brazil     brazil #> 3  brazil     brazil #> 4      BR     brazil #> 5      BR     brazil #> 6      BR     brazil"},{"path":"https://wevertonbio.github.io/RuHere/articles/spatial_consistency.html","id":"extracting-state-from-coordinates-states_from_coords","dir":"Articles","previous_headings":"Imputing geographic information from coordinates","what":"Extracting state from coordinates (states_from_coords)","title":"2. Ensuring spatial consistency: countries, states, and coordinates","text":"Similarly, can extract state province names. , demonstrate filling records (= \"\") appending source column track data came .","code":"# Extract state from coordinates for all records occ_imputed <- states_from_coords(     occ = occ_with_country_xy,     from = \"all\",     state_column = \"stateProvince\",     output_column = \"state_xy\" )  head(occ_imputed[, c(\"stateProvince\", \"state_xy\", \"state_source\")]) #>   stateProvince state_xy state_source #> 1          acre     acre     metadata #> 2          acre     acre     metadata #> 3          acre     acre     metadata #> 4          acre amazonas     metadata #> 5          acre     acre     metadata #> 6          acre     acre     metadata"},{"path":"https://wevertonbio.github.io/RuHere/articles/spatial_consistency.html","id":"checking-and-fixing-spatial-inconsistencies","dir":"Articles","previous_headings":"","what":"Checking and fixing spatial inconsistencies","title":"2. Ensuring spatial consistency: countries, states, and coordinates","text":"critical quality control step verifying whether coordinates actually fall within administrative unit assigned . Discrepancies often indicate errors either label coordinates.","code":""},{"path":"https://wevertonbio.github.io/RuHere/articles/spatial_consistency.html","id":"checking-country-consistency-check_countries","dir":"Articles","previous_headings":"Checking and fixing spatial inconsistencies","what":"Checking country consistency (check_countries)","title":"2. Ensuring spatial consistency: countries, states, and coordinates","text":"function compares coordinates boundaries country assigned country_suggested column. column correct_country added, indicating TRUE point falls within country. set try_to_fix = TRUE, function internally calls fix_countries() identify correct errors like swapped latitude/longitude, recording action country_issues.","code":"# Check if coordinates fall within the assigned country occ_checked_country <- check_countries(     occ = occ_imputed,     country_column = \"country_suggested\",     distance = 5,      # Allows a 5 km buffer for border points     try_to_fix = TRUE  # Automatically attempts to fix inverted/swapped coordinates ) #> Testing countries... #> 468 records fall in wrong countries #> Task 1 of 7: testing if longitude is inverted #> 0 coordinates with longitude inverted #> Task 2 of 7: testing if latitude is inverted #> 0 coordinates with latitude inverted #> Task 3 of 7: testing if longitude and latitude are inverted #> 2 coordinates with longitude and latitude inverted #> Task 4 of 7: testing if longitude and latitude are swapped #> 1 coordinates with longitude and latitude swapped #> Task 5 of 7: testing if longitude and latitude are swapped with longitude inverted #> 0 coordinates with longitude and latitude swapped and latitude inverted #> Task 6 of 7: testing if longitude and latitude are swapped - with latitude inverted #> 0 coordinates with longitude and latitude swapped and longitude inverted #> Task 7 of 7: testing if longitude and latitude are swapped - with longitude latitude inverted #> 0 coordinates with longitude and latitude swapped and inverted  # The 'correct_country' column indicates validity head(occ_checked_country[, c(\"country_suggested\", \"correct_country\", \"country_issues\")]) #>   country_suggested correct_country country_issues #> 1            brazil            TRUE        correct #> 2            brazil            TRUE        correct #> 3            brazil            TRUE        correct #> 4            brazil            TRUE        correct #> 5            brazil            TRUE        correct #> 6            brazil            TRUE        correct"},{"path":"https://wevertonbio.github.io/RuHere/articles/spatial_consistency.html","id":"checking-state-consistency-check_states","dir":"Articles","previous_headings":"Checking and fixing spatial inconsistencies","what":"Checking state consistency (check_states)","title":"2. Ensuring spatial consistency: countries, states, and coordinates","text":"perform similar verification states. Note check_states verifies points state_suggested column. correct_country correct_states columns represent first set flags: records marked FALSE indicate potentially erroneous entries. additional details explore remove flagged records, see vignette “3. Flagging Records Using Record Information”.","code":"# Check if coordinates fall within the assigned state occ_checked_state <- check_states(     occ = occ_checked_country,     state_column = \"state_suggested\",     distance = 5,     try_to_fix = FALSE # We just want to flag issues here, not auto-fix ) #> Testing states... #> 87 records fall in wrong states  head(occ_checked_state[, c(\"state_suggested\", \"correct_state\")]) #>   state_suggested correct_state #> 1            acre          TRUE #> 2            acre          TRUE #> 3            acre          TRUE #> 4            acre         FALSE #> 5            acre          TRUE #> 6            acre          TRUE"},{"path":"https://wevertonbio.github.io/RuHere/articles/spatial_consistency.html","id":"fixing-coordinate-errors-explicitly-fix_countries","dir":"Articles","previous_headings":"Checking and fixing spatial inconsistencies","what":"Fixing coordinate errors explicitly (fix_countries)","title":"2. Ensuring spatial consistency: countries, states, and coordinates","text":"prefer run fixing process separately (instead inside check_countries), can use fix_countries(). function runs seven distinct tests detect issues inverted signs swapped coordinates. Records identified “inverted” “swapped” corrected place, country_issues column updated reflect specific error type found. Now can dataset countries states standardized checked, can go next step: 3. Flagging Records Using Associated Information”.","code":"# This step is only necessary if you did NOT set try_to_fix = TRUE above fixing_example <- fix_countries(    occ = occ_checked_country,    country_column = \"country_suggested\",    correct_country = \"correct_country\" # Column created by check_countries ) #> Task 1 of 7: testing if longitude is inverted #> 0 coordinates with longitude inverted #> Task 2 of 7: testing if latitude is inverted #> 0 coordinates with latitude inverted #> Task 3 of 7: testing if longitude and latitude are inverted #> 0 coordinates with longitude and latitude inverted #> Task 4 of 7: testing if longitude and latitude are swapped #> 0 coordinates with longitude and latitude swapped #> Task 5 of 7: testing if longitude and latitude are swapped with longitude inverted #> 0 coordinates with longitude and latitude swapped and latitude inverted #> Task 6 of 7: testing if longitude and latitude are swapped - with latitude inverted #> 0 coordinates with longitude and latitude swapped and longitude inverted #> Task 7 of 7: testing if longitude and latitude are swapped - with longitude latitude inverted #> 0 coordinates with longitude and latitude swapped and inverted"},{"path":"https://wevertonbio.github.io/RuHere/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Weverton C. F. Trindade. Author, maintainer. Fernanda S. Caron. Author.","code":""},{"path":"https://wevertonbio.github.io/RuHere/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Trindade W, Caron F (2026). RuHere: Flags Spatial Errors Biological Collection Data Using Specialists' Information. R package version 0.0.0.9000, https://wevertonbio.github.io/RuHere/.","code":"@Manual{,   title = {RuHere: Flags Spatial Errors in Biological Collection Data Using Specialists' Information},   author = {Weverton C. F. Trindade and Fernanda S. Caron},   year = {2026},   note = {R package version 0.0.0.9000},   url = {https://wevertonbio.github.io/RuHere/}, }"},{"path":[]},{"path":"https://wevertonbio.github.io/RuHere/index.html","id":"are-your-species-records-really-where-they-say-they-are","dir":"","previous_headings":"","what":"Are your species records really where they say they are?","title":"Flags Spatial Errors in Biological Collection Data Using Specialists' Information","text":"Check using metadata specialists’ range information! Authors: Weverton C. F. Trindade Fernanda S. Caron","code":""},{"path":"https://wevertonbio.github.io/RuHere/index.html","id":"package-overview","dir":"","previous_headings":"","what":"Package overview","title":"Flags Spatial Errors in Biological Collection Data Using Specialists' Information","text":"Primary biodiversity data documenting species distributions central understand conserve biodiversity. major challenge using data presence erroneous overly imprecise geographic coordinates associated occurrence records. , present RuHere, R package designed manage species occurrence data, flag potential errors, support iterative exploration problematic records. package supports robust preparation occurrence datasets ecological conservation applications ecological niche modelling, main strength flexibility control provides deal explore potentially erroneous records.","code":""},{"path":"https://wevertonbio.github.io/RuHere/index.html","id":"workflow-in-ruhere","dir":"","previous_headings":"","what":"Workflow in RuHere","title":"Flags Spatial Errors in Biological Collection Data Using Specialists' Information","text":"RuHere package facilitates several key steps species occurrence data preparation validation: Data Acquisition: Download species occurrences multiple global databases. Standardization: Merge standardize disparate datasets unified format. Metadata Flagging: Identify problematic records using associated metadata information. Expert Validation: Flag records using specialist range information sourced external databases. Bias Mitigation: Reduce spatial sampling bias record thinning. Exploration: Visualize investigate flagged issues within final datasets. main functions package presented figure : Figure 1. Overview RuHere workflow species occurrence data preparation validation","code":""},{"path":"https://wevertonbio.github.io/RuHere/index.html","id":"package-website","dir":"","previous_headings":"","what":"Package website","title":"Flags Spatial Errors in Biological Collection Data Using Specialists' Information","text":"See package website (https://wevertonbio.github.io/RuHere/) functions explanation vignettes.","code":""},{"path":"https://wevertonbio.github.io/RuHere/index.html","id":"installing-the-package","dir":"","previous_headings":"","what":"Installing the package","title":"Flags Spatial Errors in Biological Collection Data Using Specialists' Information","text":"Note: Internet connection required install package. install latest release RuHere use following line code: development version RuHere can installed using code .","code":"# Installing from CRAN  #install.packages(\"RuHere\")  # in progress # Installing and loading packages if(!require(remotes)){   install.packages(\"remotes\") }  # To install the package use remotes::install_github(\"wevertonbio/RuHere\")  # To install the package and its vignettes use (if needed use: force = TRUE)   # remotes::install_github(\"wevertonbio/RuHere\", build_vignettes = TRUE) # in progress"},{"path":"https://wevertonbio.github.io/RuHere/reference/available_datasets.html","id":null,"dir":"Reference","previous_headings":"","what":"Check the available distribution datasets for a set of species — available_datasets","title":"Check the available distribution datasets for a set of species — available_datasets","text":"function checks datasets contain distributional information given set species, based expert-curated sources. searches selected datasets reports whether species available distribution data.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/available_datasets.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Check the available distribution datasets for a set of species — available_datasets","text":"","code":"available_datasets(   data_dir,   species,   datasets = \"all\",   return_distribution = FALSE )"},{"path":"https://wevertonbio.github.io/RuHere/reference/available_datasets.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Check the available distribution datasets for a set of species — available_datasets","text":"data_dir (character) directory path datasets saved. See Details information. species (character) vector species names checked availability distributional information. datasets (character) vector indicating datasets search. Options \"\", \"florabr\", \"wcvp\", \"iucn\", \"bien\", \"faunabr\". Default searches datasets. return_distribution (logical) whether return spatial objects (SpatVector) representing distribution regions species found selected datasets. Default FALSE.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/available_datasets.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Check the available distribution datasets for a set of species — available_datasets","text":"return_distribution = FALSE, data.frame containing species names datasets distributional information available. return_distribution = TRUE, also returns list containing SpatVector objects representing species ranges.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/available_datasets.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Check the available distribution datasets for a set of species — available_datasets","text":"distribution datasets can obtained using functions florabr_here(), wcvp_here(), bien_here(), faunabr_here(), download prepare corresponding sources use RuHere.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/available_datasets.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Check the available distribution datasets for a set of species — available_datasets","text":"","code":"# Set directory where datasets were saved # Here, we'll use the directory where the example datasets are stored datadir <- system.file(\"extdata\", \"datasets\",  package = \"RuHere\") # Check available datasets d <- available_datasets(data_dir = datadir,                         species = c(\"Araucaria angustifolia\",                                     \"Handroanthus serratifolius\",                                     \"Cyanocorax caeruleus\")) # Check available datasets and return distribution d2 <- available_datasets(data_dir = datadir,                          species = c(\"Araucaria angustifolia\",                                      \"Handroanthus serratifolius\",                                      \"Cyanocorax caeruleus\"),                          return_distribution = TRUE)"},{"path":"https://wevertonbio.github.io/RuHere/reference/bien_here.html","id":null,"dir":"Reference","previous_headings":"","what":"Download species distribution information from BIEN — bien_here","title":"Download species distribution information from BIEN — bien_here","text":"function downloads distribution information BIEN database, required filtering occurrence records using specialists' information via flag_bien() function.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/bien_here.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Download species distribution information from BIEN — bien_here","text":"","code":"bien_here(   data_dir,   species,   synonyms = NULL,   overwrite = TRUE,   progress_bar = FALSE,   verbose = TRUE )"},{"path":"https://wevertonbio.github.io/RuHere/reference/bien_here.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Download species distribution information from BIEN — bien_here","text":"data_dir (character) directory save data downloaded BIEN. species (character) vector species names retrieve distribution information. synonyms (data.frame) optional data.frame containing synonyms target species. first column must contain target species names, second column corresponding synonyms. Default NULL. See details information. overwrite (logical) whether overwrite existing files. Default TRUE. progress_bar (logical) whether display progress bar processing. TRUE, 'pbapply' package must installed. Default FALSE. verbose (logical) whether display progress messages. Default TRUE.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/bien_here.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Download species distribution information from BIEN — bien_here","text":"data frame indicating whether polygon(s) representing species range available BIEN. range available, GeoPackage file (.gpkg) saved data_dir/bien. file name corresponds species name, underscore (“_”) replacing space genus specific epithet.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/bien_here.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Download species distribution information from BIEN — bien_here","text":"function uses BIEN::BIEN_ranges_load_species() function retrieve polygons representing distribution ranges species available BIEN database. taxonomic information BIEN may outdated, can optionally provide table synonyms broaden search. synonyms data.frame accepted species first column synonyms second. See RuHere::synonys example.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/bien_here.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Download species distribution information from BIEN — bien_here","text":"","code":"# Define a directory to save the data data_dir <- tempdir() # Here, a temporary directory  # Download species distribution information from BIEN bien_here(data_dir = data_dir, species = \"Handroanthus serratifolius\") #>                       species range_available #>                        <char>          <lgcl> #> 1: Handroanthus serratifolius            TRUE"},{"path":"https://wevertonbio.github.io/RuHere/reference/bind_here.html","id":null,"dir":"Reference","previous_headings":"","what":"Bind occurrences after standardizing columns — bind_here","title":"Bind occurrences after standardizing columns — bind_here","text":"Combines multiple occurrence data frames (example, GBIF, SpeciesLink, BIEN, iDigBio) single standardized dataset. particularly useful using format_columns() ensure column compatibility across data sources.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/bind_here.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Bind occurrences after standardizing columns — bind_here","text":"","code":"bind_here(..., fill = FALSE)"},{"path":"https://wevertonbio.github.io/RuHere/reference/bind_here.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Bind occurrences after standardizing columns — bind_here","text":"... (data.frame) two data frames occurrence records combine. fill (logical) whether fills missing columns NA. Default FALSE.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/bind_here.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Bind occurrences after standardizing columns — bind_here","text":"data.frame containing occurrence records combined.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/bind_here.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Bind occurrences after standardizing columns — bind_here","text":"fill = TRUE, columns shared among input data frames added filled NA, ensuring columns align binding. Internally, function uses data.table::rbindlist() efficient row binding.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/bind_here.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Bind occurrences after standardizing columns — bind_here","text":"","code":"# Import and standardize GBIF data(\"occ_gbif\", package = \"RuHere\") #Import data example gbif_standardized <- format_columns(occ_gbif, metadata = \"gbif\") # Import and standardize SpeciesLink data(\"occ_splink\", package = \"RuHere\") #Import data example splink_standardized <- format_columns(occ_splink, metadata = \"specieslink\") # Import and standardize BIEN data(\"occ_bien\", package = \"RuHere\") #Import data example bien_standardized <- format_columns(occ_bien, metadata = \"bien\") # Import and standardize idigbio data(\"occ_idig\", package = \"RuHere\") #Import data example idig_standardized <- format_columns(occ_idig, metadata = \"idigbio\") # Merge all all_occ <- bind_here(gbif_standardized, splink_standardized,                       bien_standardized, idig_standardized)"},{"path":"https://wevertonbio.github.io/RuHere/reference/check_countries.html","id":null,"dir":"Reference","previous_headings":"","what":"Check if the records fall in the country assigned in the metadata — check_countries","title":"Check if the records fall in the country assigned in the metadata — check_countries","text":"Check records fall country assigned metadata","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/check_countries.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Check if the records fall in the country assigned in the metadata — check_countries","text":"","code":"check_countries(   occ,   long = \"decimalLongitude\",   lat = \"decimalLatitude\",   country_column,   distance = 5,   try_to_fix = FALSE,   progress_bar = FALSE,   verbose = TRUE )"},{"path":"https://wevertonbio.github.io/RuHere/reference/check_countries.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Check if the records fall in the country assigned in the metadata — check_countries","text":"occ (data.frame) dataset occurrence records, preferably country information standardized using standardize_countries(). long (character) column name longitude. Default 'decimalLongitude'. lat lat (character) column name latitude. Default 'decimalLatitude'. country_column (character) column name containing country information. distance (numeric) maximum distance (kilometers) record can fall outside country assigned country_column. Default 5. try_to_fix (logical) whether check coordinates inverted transposed (see fix_countries() details). TRUE, coordinates identified inverted transposed corrected. Default FALSE. progress_bar (logical) whether display progress bar processing. TRUE, 'pbapply' package must installed. Default FALSE. verbose (logical) whether print messages function progress. Default TRUE.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/check_countries.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Check if the records fall in the country assigned in the metadata — check_countries","text":"original occ data.frame additional column (correct_country) indicating whether record falls within country specified metadata (TRUE) (FALSE).","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/check_countries.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Check if the records fall in the country assigned in the metadata — check_countries","text":"","code":"# Load example data data(\"occurrences\", package = \"RuHere\") #Import data example # Standardize country names occ_country <- standardize_countries(occ = occurrences,                                      return_dictionary = FALSE) # Check whether records fall within assigned countries occ_country_checked <- check_countries(occ = occ_country,                                        country_column = \"country_suggested\") #> Warning: The following countries listed in the 'country_suggested' column were absent in the world map used for validation: NA #> Testing countries... #> 54 records fall in wrong countries"},{"path":"https://wevertonbio.github.io/RuHere/reference/check_states.html","id":null,"dir":"Reference","previous_headings":"","what":"Check if the records fall in the state assigned in the metadata — check_states","title":"Check if the records fall in the state assigned in the metadata — check_states","text":"Check records fall state assigned metadata","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/check_states.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Check if the records fall in the state assigned in the metadata — check_states","text":"","code":"check_states(   occ,   long = \"decimalLongitude\",   lat = \"decimalLatitude\",   state_column,   distance = 5,   try_to_fix = FALSE,   progress_bar = FALSE,   verbose = TRUE )"},{"path":"https://wevertonbio.github.io/RuHere/reference/check_states.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Check if the records fall in the state assigned in the metadata — check_states","text":"occ (data.frame) dataset occurrence records, preferably country information standardized using standardize_states(). long (character) column name longitude. Default 'decimalLongitude'. lat lat (character) column name latitude. Default 'decimalLatitude'. state_column (character) column name containing state information. distance (numeric) maximum distance (kilometers) record can fall outside state assigned state_column. Default 5. try_to_fix (logical) whether check coordinates inverted transposed (see fix_states() details). TRUE, coordinates identified inverted transposed corrected. Default FALSE. progress_bar (logical) whether display progress bar processing. TRUE, 'pbapply' package must installed. Default FALSE. verbose (logical) whether print messages function progress. Default TRUE.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/check_states.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Check if the records fall in the state assigned in the metadata — check_states","text":"original occ data.frame additional column (correct_state) indicating whether record falls within state specified metadata (TRUE) (FALSE).","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/check_states.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Check if the records fall in the state assigned in the metadata — check_states","text":"","code":"# Load example data data(\"occurrences\", package = \"RuHere\") #Import data example # Subset occurrences for Araucaria angustifolia occ <- occurrences[occurrences$species == \"Araucaria angustifolia\", ] # Standardize country names occ_country <- standardize_countries(occ = occ,                                      return_dictionary = FALSE) # Standardize state names occ_state <- standardize_states(occ = occ_country,                                 country_column = \"country_suggested\",                                 return_dictionary = FALSE) # Check whether records fall within assigned states occ_state_checked <- check_states(occ = occ_state,                                     state_column = \"state_suggested\") #> Warning: The following states listed in the 'state_suggested' column were absent in the world map used for validation: NA, mexico #> Testing states... #> 13 records fall in wrong states"},{"path":"https://wevertonbio.github.io/RuHere/reference/country_dictionary.html","id":null,"dir":"Reference","previous_headings":"","what":"Country dictionary for standardizing country names and codes — country_dictionary","title":"Country dictionary for standardizing country names and codes — country_dictionary","text":"country_dictionary provides set lookup tables used standardize country names country codes occurrence datasets. dictionary built rnaturalearthdata::map_units110 consolidates wide variety country name variants (several languages formats), well multiple coding systems, single suggested standardized name. object used internally functions clean harmonize country fields, ensuring country names occurrence datasets (e.g., \"Brasil\",\"brasil\", \"BR\", \"BRA\", \"République Française\") mapped consistently single standardized form (\"brazil\", \"france\", etc.).","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/country_dictionary.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Country dictionary for standardizing country names and codes — country_dictionary","text":"","code":"country_dictionary"},{"path":"https://wevertonbio.github.io/RuHere/reference/country_dictionary.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Country dictionary for standardizing country names and codes — country_dictionary","text":"named list two data frames: country_name data frame two columns: country_name Character. Lowercased accent-stripped country name variants (multiple rnaturalearthdata fields name, name_long, abbrev, formal_en, alternative names several languages). country_suggested Character. standardized country name, derived name column map_units110, also lowercased accent-stripped. country_code data frame two columns: country_code Character. Country codes several systems, including ISO-2, ISO-3, FIPS, postal codes, others, filtering invalid ambiguous codes. country_suggested Character. standardized country name corresponding code.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/country_dictionary.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Country dictionary for standardizing country names and codes — country_dictionary","text":"dictionary generated : extracting multiple name code fields rnaturalearthdata::map_units110, converting names lowercase removing accents, converting codes uppercase, removing invalid ambiguous codes (e.g., -99, \"J\", various country mismatches), ensuring uniqueness across entries.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/country_dictionary.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Country dictionary for standardizing country names and codes — country_dictionary","text":"","code":"data(country_dictionary)  head(country_dictionary$country_name) #>                  country_name        country_suggested #> 1                        fiji                     fiji #> 2 united republic of tanzania                 tanzania #> 3              western sahara                w. sahara #> 4                      canada                   canada #> 5    united states of america united states of america #> 6                  kazakhstan               kazakhstan head(country_dictionary$country_code) #>   country_code        country_suggested #> 1          FJI                     fiji #> 2          TZA                 tanzania #> 3          SAH                w. sahara #> 4          CAN                   canada #> 5          US1 united states of america #> 6          KA1               kazakhstan"},{"path":"https://wevertonbio.github.io/RuHere/reference/country_from_coords.html","id":null,"dir":"Reference","previous_headings":"","what":"Extract country from coordinates — country_from_coords","title":"Extract country from coordinates — country_from_coords","text":"Extracts country occurrence record based coordinates.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/country_from_coords.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Extract country from coordinates — country_from_coords","text":"","code":"country_from_coords(   occ,   long = \"decimalLongitude\",   lat = \"decimalLatitude\",   country_column = NULL,   from = \"all\",   output_column = \"country_xy\",   append_source = FALSE )"},{"path":"https://wevertonbio.github.io/RuHere/reference/country_from_coords.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Extract country from coordinates — country_from_coords","text":"occ (data.frame) dataset occurrence records, preferably standardized using format_columns(). long (character) column name longitude. Default 'decimalLongitude'. lat (character) column name latitude. Default 'decimalLatitude'. country_column (character) column name containing country. applicable = na_only. Default NULL. (character) whether extract country records ('') records missing country information ('na_only'). 'na_only', must provide name column country information. Default ''. output_column (character) column name created occ store countries extracted. Default 'country_xy'. append_source (logical) whether create new column occ called 'country_source', indicates whether country derived coordinates. Default FALSE.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/country_from_coords.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Extract country from coordinates — country_from_coords","text":"original occ data.frame additional column containing countries extracted coordinates.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/country_from_coords.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Extract country from coordinates — country_from_coords","text":"countries extracted coordinates using map retrieved rnaturalearthdata::map_units110.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/country_from_coords.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Extract country from coordinates — country_from_coords","text":"","code":"# Import and standardize GBIF data(\"occ_gbif\", package = \"RuHere\") #Import data example gbif_standardized <- format_columns(occ_gbif, metadata = \"gbif\") gbif_countries <- country_from_coords(occ = gbif_standardized)"},{"path":"https://wevertonbio.github.io/RuHere/reference/create_metadata.html","id":null,"dir":"Reference","previous_headings":"","what":"Create metadata template — create_metadata","title":"Create metadata template — create_metadata","text":"function creates metadata template used format_columns() formatting standardizing column names classes occurrence datasets. column names specified arguments must present occ dataset. obtained data GBIF, SpeciesLink, BIEN iDigBio using functions provided RuHere package, need use function, package already includes metadata templates datasets.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/create_metadata.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create metadata template — create_metadata","text":"","code":"create_metadata(   occ,   scientificName,   decimalLongitude,   decimalLatitude,   collectionCode = NA,   catalogNumber = NA,   coordinateUncertaintyInMeters = NA,   elevation = NA,   country = NA,   stateProvince = NA,   municipality = NA,   locality = NA,   year = NA,   eventDate = NA,   recordedBy = NA,   identifiedBy = NA,   basisOfRecord = NA,   occurrenceRemarks = NA,   habitat = NA,   datasetName = NA,   datasetKey = NA,   key = NA )"},{"path":"https://wevertonbio.github.io/RuHere/reference/create_metadata.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create metadata template — create_metadata","text":"occ (data.frame data.table) dataset occurrence records standardized. scientificName (character) column name occ scientific name species. decimalLongitude (character) column name occ longitude. decimalLatitude (character) column name occ latitude. collectionCode (character) optional column name occ collection code. catalogNumber (character) optional column name occ catalog number. coordinateUncertaintyInMeters (character) optional column name coordinate uncertainty meters. elevation (character) optional column name elevation information. country (character) optional column name country record. stateProvince (character) optional column name state province record. municipality (character) optional column name municipality record. locality (character) optional column name locality description. year (character) optional column name year occurrence recorded. eventDate (character) optional column name event date. recordedBy (character) optional column name name collector recorder. identifiedBy (character) optional column name name identifier. basisOfRecord (character) optional column name basis record. occurrenceRemarks (character) optional column name remarks occurrence. habitat (character) optional column name habitat description. datasetName (character) optional column name dataset name. datasetKey (character) optional column name dataset key. key (character) optional column name unique occurrence identifier.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/create_metadata.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create metadata template — create_metadata","text":"data.frame containing metadata template can directly used format_columns() function.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/create_metadata.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Create metadata template — create_metadata","text":"","code":"# Load data example # Occurrences of Puma concolor from the atlanticr R package data(\"puma_atlanticr\", package = \"RuHere\") # Create metadata to standardize the occurrences puma_metadata <- create_metadata(occ = puma_atlanticr,                                  scientificName = \"actual_species_name\",                                  decimalLongitude = \"longitude\",                                  decimalLatitude = \"latitude\",                                  elevation = \"altitude\",                                  country = \"country\",                                  stateProvince = \"state\",                                  municipality = \"municipality\",                                  locality = \"study_location\",                                  year = \"year_finish\",                                  habitat = \"vegetation_type\",                                  datasetName = \"reference\") # Now, we can use this metadata to standardize the columns puma_occ <- format_columns(occ = puma_atlanticr, metadata = puma_metadata,                            binomial_from = \"actual_species_name\",                            data_source = \"atlanticr\") #> Warning: NAs introduced by coercion"},{"path":"https://wevertonbio.github.io/RuHere/reference/cultivated.html","id":null,"dir":"Reference","previous_headings":"","what":"Dictionary of terms used to flag cultivated individuals — cultivated","title":"Dictionary of terms used to flag cultivated individuals — cultivated","text":"cultivated list character vectors containing keywords used identify whether occurrence record refers cultivated non-cultivated individuals. object used internally flag_cultivated() scan occurrence fields (notes, habitat descriptions, remarks) classify records cultivated cultivated based textual patterns. list combines terms plantR (plantR:::cultivated plantR:::notCultivated) additional multilingual variants commonly found herbarium metadata.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/cultivated.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Dictionary of terms used to flag cultivated individuals — cultivated","text":"","code":"cultivated"},{"path":"https://wevertonbio.github.io/RuHere/reference/cultivated.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Dictionary of terms used to flag cultivated individuals — cultivated","text":"named list two elements: cultivated Character vector. Terms indicate individual cultivated. Imported plantR:::cultivated. not_cultivated Character vector. Terms suggesting individual cultivated (e.g., “cultivated”, “planted”, “plantada”, “cultivada”), including terms plantR:::notCultivated.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/cultivated.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Dictionary of terms used to flag cultivated individuals — cultivated","text":"terms matched case-insensitively text cleaning (e.g., lowercasing accent removal).","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/cultivated.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Dictionary of terms used to flag cultivated individuals — cultivated","text":"de Lima, Renato AF, et al. plantR: R package workflow managing species records biological collections. Methods Ecology Evolution, 14.2 (2023): 332-339.","code":""},{"path":[]},{"path":"https://wevertonbio.github.io/RuHere/reference/cultivated.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Dictionary of terms used to flag cultivated individuals — cultivated","text":"","code":"data(cultivated)  cultivated$cultivated #>  [1] \"cultivated\"        \"cultivada\"         \"cultivado\"         #>  [4] \"cultivato\"         \"cultivad\"          \"under cultivation\" #>  [7] \"exotic\"            \"exótica\"           \"plantada\"          #> [10] \"plantado\"          \"planted\"           \"plantio\"           #> [13] \"arboreto\"          \"arboretum\"         \"pomar\"             #> [16] \"área de visitação\" \"cult\\\\.\"           \"cant\\\\. [a-z]\"     #> [19] \"cant [A-Z]\"        \"cant\\\\. [0-9]\"     \"cant \\\\. [0-9]\"    #> [22] \"cant [0-9]\"        \"\\\\(cult\\\\)\"        \"\\\\(cult \\\\)\"       #> [25] \"in cultivo\"        \"in cultis\"         \" quadra [a-z]\"     #> [28] \"quadra [a-z] do\"   \"naturalised\"       \"em experimento de\" cultivated$not_cultivated #>  [1] \"nativa\"               \"espontânea\"           \"pastagem cultivada\"   #>  [4] \"área do arboreto\"     \"presença de exóticas\" \" área cultivada\"      #>  [7] \" cultivated area\"     \"no plantada\"          \"no cultivada\"         #> [10] \"not cultivated\"       \"not planted\""},{"path":"https://wevertonbio.github.io/RuHere/reference/fake_data.html","id":null,"dir":"Reference","previous_headings":"","what":"Fake occurrence data for testing coordinate validation functions — fake_data","title":"Fake occurrence data for testing coordinate validation functions — fake_data","text":"fake_data synthetic dataset created testing functions validate correct country- state-level geographic coordinates. Controlled coordinate errors introduced (e.g., inverted signs, swapped values, combinations swaps inversions) simulate common georeferencing mistakes. dataset intended automated testing functions check_countries() check_states().","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/fake_data.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Fake occurrence data for testing coordinate validation functions — fake_data","text":"","code":"fake_data"},{"path":"https://wevertonbio.github.io/RuHere/reference/fake_data.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Fake occurrence data for testing coordinate validation functions — fake_data","text":"data frame structure all_occ, containing occurrence records intentionally manipulated coordinates. additional column data_source = \"fake_data\" identifies records.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/fake_data.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Fake occurrence data for testing coordinate validation functions — fake_data","text":"coordinate errors include: Inverted longitude: multiplying longitude −1. Inverted latitude: multiplying latitude −1. coordinates inverted. Swapped coordinates: (lon, lat) → (lat, lon). Swapped + inverted four combinations: swapped , swapped + inverted longitude, swapped + inverted latitude, swapped + inverted.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/fake_data.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Fake occurrence data for testing coordinate validation functions — fake_data","text":"","code":"data(fake_data)"},{"path":"https://wevertonbio.github.io/RuHere/reference/faunabr_here.html","id":null,"dir":"Reference","previous_headings":"","what":"Download the latest version of the Fauna do Brazil (Taxonomic Catalog of the Brazilian Fauna) — faunabr_here","title":"Download the latest version of the Fauna do Brazil (Taxonomic Catalog of the Brazilian Fauna) — faunabr_here","text":"function downloads Taxonomic Catalog Brazilian Fauna database, required filtering occurrence records using specialists' information via flag_faunabr() function.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/faunabr_here.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Download the latest version of the Fauna do Brazil (Taxonomic Catalog of the Brazilian Fauna) — faunabr_here","text":"","code":"faunabr_here(   data_dir,   data_version = \"latest\",   solve_discrepancy = TRUE,   overwrite = TRUE,   remove_files = TRUE,   verbose = TRUE )"},{"path":"https://wevertonbio.github.io/RuHere/reference/faunabr_here.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Download the latest version of the Fauna do Brazil (Taxonomic Catalog of the Brazilian Fauna) — faunabr_here","text":"data_dir (character) directory save data downloaded Fauna Brazil. data_version (character) version Fauna Brazil database download. Use \"latest\" get recent version, updated frequently. Alternatively, specify older version (e.g., data_version=\"1.2\"). Default value \"latest\". solve_discrepancy (logical) whether resolve inconsistencies species subspecies information. set TRUE (default), species information updated based unique data subspecies. example, subspecies occurs certain state, implies species also occurs state. overwrite (logical) TRUE, data overwritten. Default TRUE. remove_files (logical) whether remove downloaded files used building final dataset. Default TRUE. verbose (logical) whether display messages function execution. Set TRUE enable display, FALSE run silently. Default TRUE.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/faunabr_here.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Download the latest version of the Fauna do Brazil (Taxonomic Catalog of the Brazilian Fauna) — faunabr_here","text":"message indicating data successfully saved directory specified data_dir.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/faunabr_here.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Download the latest version of the Fauna do Brazil (Taxonomic Catalog of the Brazilian Fauna) — faunabr_here","text":"","code":"if (FALSE) { # \\dontrun{ # Define a directory to save the data data_dir <- tempdir() # Here, a temporary directory  # Download the latest version of the Flora e Funga do Brazil database faunabr_here(data_dir = data_dir) } # }"},{"path":"https://wevertonbio.github.io/RuHere/reference/fix_countries.html","id":null,"dir":"Reference","previous_headings":"","what":"Identify and correct coordinates based on country information — fix_countries","title":"Identify and correct coordinates based on country information — fix_countries","text":"function identifies correct inverted transposed coordinates based country information","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/fix_countries.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Identify and correct coordinates based on country information — fix_countries","text":"","code":"fix_countries(   occ,   long = \"decimalLongitude\",   lat = \"decimalLatitude\",   country_column,   correct_country = \"correct_country\",   distance = 5,   progress_bar = FALSE,   verbose = TRUE )"},{"path":"https://wevertonbio.github.io/RuHere/reference/fix_countries.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Identify and correct coordinates based on country information — fix_countries","text":"occ (data.frame) dataset occurrence records, preferably country information checked using check_countries(). long (character) column name longitude. Default 'decimalLongitude'. lat lat (character) column name latitude. Default 'decimalLatitude'. country_column (character) name column containing country information. correct_country (character) name column logical value indicating whether record falls within country specified metadata. Default 'correct_country'. See details. distance (numeric) maximum distance (kilometers) record can fall outside country assigned country_column. Default 5. progress_bar (logical) whether display progress bar processing. TRUE, 'pbapply' package must installed. Default FALSE. verbose (logical) whether print messages function progress. Default TRUE.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/fix_countries.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Identify and correct coordinates based on country information — fix_countries","text":"original occ data.frame coordinates long lat columns corrected, additional column (country_issues) indicating whether coordinates : correct: record falls within assigned country; inverted: longitude /latitude reversed signs; swapped: longitude latitude transposed (.e., appears 's column). incorrect: record falls outside assigned country corrected.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/fix_countries.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Identify and correct coordinates based on country information — fix_countries","text":"function checks corrects coordinate errors occurrence records testing whether point falls within expected country polygon (RuHere’s internal world map). input occurrence data must contain column (specified correct_country argument) logical values indicating records check fix — marked FALSE processed. column can obtained running check_countries() function. runs series seven tests detect common issues inverted signs swapped latitude/longitude values. Inverted coordinates signs flipped (e.g., -45 instead 45), placing point opposite hemisphere, swapped coordinates latitude longitude values exchanged (e.g., -47, -15 instead -15, -47). test, country borders buffered distance km account minor positional errors. type issue (\"correct\") recorded new column, country_issues. Records match assigned country correction updated accordingly, remaining mismatches labeled \"incorrect\". function can used internally check_countries() automatically identify fix common coordinate errors.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/fix_countries.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Identify and correct coordinates based on country information — fix_countries","text":"","code":"# Load example data data(\"occurrences\", package = \"RuHere\") # Import example data  # Standardize country names occ_country <- standardize_countries(occ = occurrences,                                      return_dictionary = FALSE)  # Check whether records fall within the assigned countries occ_country_checked <- check_countries(occ = occ_country,                                        country_column = \"country_suggested\") #> Warning: The following countries listed in the 'country_suggested' column were absent in the world map used for validation: NA #> Testing countries... #> 54 records fall in wrong countries  # Fix records with incorrect or misassigned countries occ_country_fixed <- fix_countries(occ = occ_country_checked,                                    country_column = \"country_suggested\") #> Task 1 of 7: testing if longitude is inverted #> 0 coordinates with longitude inverted #> Task 2 of 7: testing if latitude is inverted #> 0 coordinates with latitude inverted #> Task 3 of 7: testing if longitude and latitude are inverted #> 1 coordinates with longitude and latitude inverted #> Task 4 of 7: testing if longitude and latitude are swapped #> 1 coordinates with longitude and latitude swapped #> Task 5 of 7: testing if longitude and latitude are swapped - #>             with longitude inverted #> 0 coordinates with longitude and latitude swapped and latitude inverted #> Task 6 of 7: testing if longitude and latitude are swapped - with latitude inverted #> 0 coordinates with longitude and latitude swapped and longitude inverted #> Task 7 of 7: testing if longitude and latitude are swapped - with longitude latitude inverted #> 0 coordinates with longitude and latitude swapped and inverted"},{"path":"https://wevertonbio.github.io/RuHere/reference/fix_states.html","id":null,"dir":"Reference","previous_headings":"","what":"Identify and correct coordinates based on state information — fix_states","title":"Identify and correct coordinates based on state information — fix_states","text":"function identifies correct inverted transposed coordinates based state information.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/fix_states.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Identify and correct coordinates based on state information — fix_states","text":"","code":"fix_states(   occ,   long = \"decimalLongitude\",   lat = \"decimalLatitude\",   state_column,   correct_state = \"correct_state\",   distance = 5,   progress_bar = FALSE,   verbose = TRUE )"},{"path":"https://wevertonbio.github.io/RuHere/reference/fix_states.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Identify and correct coordinates based on state information — fix_states","text":"occ (data.frame) dataset occurrence records, preferably state information checked using state_countries(). long (character) column name longitude. Default 'decimalLongitude'. lat lat (character) column name latitude. Default 'decimalLatitude'. state_column (character) name column containing state information. correct_state (character) name column logical value indicating whether record falls within state specified metadata. Default 'correct_state'. See details. distance (numeric) maximum distance (kilometers) record can fall outside state assigned state_column. Default 5. progress_bar (logical) whether display progress bar processing. TRUE, 'pbapply' package must installed. Default FALSE. verbose (logical) whether print messages function progress. Default TRUE.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/fix_states.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Identify and correct coordinates based on state information — fix_states","text":"original occ data.frame coordinates long lat columns corrected, additional column (state_issues) indicating whether coordinates : correct: record falls within assigned state; inverted: longitude /latitude reversed signs; swapped: longitude latitude transposed (.e., appears 's column). incorrect: record falls outside assigned state corrected.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/fix_states.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Identify and correct coordinates based on state information — fix_states","text":"function checks corrects coordinate errors occurrence records testing whether point falls within expected state polygon (RuHere’s internal world map). input occurrence data must contain column (specified correct_state argument) logical values indicating records check fix — marked FALSE processed. column can obtained running check_states() function. runs series seven tests detect common issues inverted signs swapped latitude/longitude values. Inverted coordinates signs flipped (e.g., -45 instead 45), placing point opposite hemisphere, swapped coordinates latitude longitude values exchanged (e.g., -47, -15 instead -15, -47). test, state borders buffered distance km account minor positional errors. type issue (\"correct\") recorded new column, state_issues. Records match assigned state correction updated accordingly, remaining mismatches labeled \"incorrect\". function can used internally check_states() automatically identify fix common coordinate errors.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/fix_states.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Identify and correct coordinates based on state information — fix_states","text":"","code":"# Load example data data(\"occurrences\", package = \"RuHere\") # Import example data # Subset records of Araucaria occ <- occurrences[occurrences$species == \"Araucaria angustifolia\", ] # Standardize country names occ_country <- standardize_countries(occ = occ,                                      return_dictionary = FALSE)  # Standardize state names occ_state <- standardize_states(occ = occ_country,                                 country_column = \"country_suggested\",                                 return_dictionary = FALSE)  # Check whether records fall within the assigned states occ_states_checked <- check_states(occ = occ_state,                                    state_column = \"state_suggested\") #> Warning: The following states listed in the 'state_suggested' column were absent in the world map used for validation: NA, mexico #> Testing states... #> 13 records fall in wrong states  # Fix records with incorrect or misassigned states occ_states_fixed <- fix_states(occ = occ_states_checked,                                state_column = \"state_suggested\") #> Task 1 of 7: testing if longitude is inverted #> 0 coordinates with longitude inverted #> Task 2 of 7: testing if latitude is inverted #> 0 coordinates with latitude inverted #> Task 3 of 7: testing if longitude and latitude are inverted #> 1 coordinates with longitude and latitude inverted #> Task 4 of 7: testing if longitude and latitude are swapped #> 0 coordinates with longitude and latitude swapped #> Task 5 of 7: testing if longitude and latitude are swapped - #>             with latitude inverted #> 0 coordinates with longitude and latitude swapped and latitude inverted #> Task 6 of 7: testing if longitude and latitude are swapped - with latitude inverted #> 0 coordinates with longitude and latitude swapped and longitude inverted #> Task 7 of 7: testing if longitude and latitude are swapped - with longitude latitude inverted #> 0 coordinates with longitude and latitude swapped and inverted"},{"path":"https://wevertonbio.github.io/RuHere/reference/flag_bien.html","id":null,"dir":"Reference","previous_headings":"","what":"Identify records outside natural ranges according to BIEN — flag_bien","title":"Identify records outside natural ranges according to BIEN — flag_bien","text":"Flags (validates) occurrence records based known distribution data Botanical Information Ecology Network (BIEN) data. function checks occurrence point given species falls within documented distribution, allowing user-defined buffers around region. Records flagged valid (TRUE) fall inside documented distribution (plus optional buffer) species BIEN dataset.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/flag_bien.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Identify records outside natural ranges according to BIEN — flag_bien","text":"","code":"flag_bien(   data_dir,   occ,   species = \"species\",   long = \"decimalLongitude\",   lat = \"decimalLatitude\",   buffer = 10,   progress_bar = FALSE,   verbose = TRUE )"},{"path":"https://wevertonbio.github.io/RuHere/reference/flag_bien.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Identify records outside natural ranges according to BIEN — flag_bien","text":"data_dir (character) Required directory path BIEN data saved occ (data.frame data.table) data frame containing occurrence records flagged. Must contain columns species, longitude, latitude. species (character) name column occ contains species scientific names. Default \"species\". long (character) name column occ contains longitude values. Default \"decimalLongitude\". lat (character) name column occ contains latitude values. Default \"decimalLatitude\". buffer (numeric) buffer distance (kilometers) applied around region distribution. Default 20 km. progress_bar (logical) whether display progress bar processing. TRUE, 'pbapply' package must installed. Default FALSE. verbose (logical) TRUE, prints messages progress number species checked. Default TRUE.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/flag_bien.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Identify records outside natural ranges according to BIEN — flag_bien","text":"data.frame original occ data frame augmented new column named bien_flag. column logical (TRUE/FALSE) indicating whether record falls within expected distribution (plus buffer) based BIEN data. Records species found BIEN data NA bien_flag column.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/flag_bien.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Identify records outside natural ranges according to BIEN — flag_bien","text":"","code":"# Load example data data(\"occurrences\", package = \"RuHere\") # Filter occurrences for golden trumpet tree occ <- occurrences[occurrences$species == \"Handroanthus serratifolius\", ] # Set folder where distributional datasets were saved # Here, just a sample provided in the package # You must run 'bien_here()' beforehand to download the necessary data files dataset_dir <- system.file(\"extdata/datasets\", package = \"RuHere\")  # Flag records using BIEN specialist information occ_bien <- flag_bien(data_dir = dataset_dir, occ = occ) #> Checking the distribution from 1 of 1 species"},{"path":"https://wevertonbio.github.io/RuHere/reference/flag_colors.html","id":null,"dir":"Reference","previous_headings":"","what":"Color palette for flagged records — flag_colors","title":"Color palette for flagged records — flag_colors","text":"flag_colors named character vector defining default colors used plot occurrence records flagged mapview_here().","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/flag_colors.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Color palette for flagged records — flag_colors","text":"","code":"flag_colors"},{"path":"https://wevertonbio.github.io/RuHere/reference/flag_colors.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Color palette for flagged records — flag_colors","text":"named character vector : names Flag labels corresponding categories generated various flag_* checking functions. values Hex color codes standard R color names used plotting.","code":""},{"path":[]},{"path":"https://wevertonbio.github.io/RuHere/reference/flag_colors.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Color palette for flagged records — flag_colors","text":"","code":"data(flag_colors)  # View all flag categories and their colors flag_colors #>                 Wrong country                   Wrong state  #>                     \"#E69F00\"                     \"#56B4E9\"  #>                    Cultivated                        Fossil  #>                     \"#16FF32\"                       \"black\"  #>                   Inaturalist               Outside florabr  #>                     \"#F0E442\"                     \"#782AB6\"  #>               Outside faunabr                  Outside WCVP  #>                     \"#782AB6\"                     \"#D55E00\"  #>                  Outside IUCN                  Outside BIEN  #>                     \"#CC79A7\"                     \"#0072B2\"  #>                    Duplicated                    No flagged  #>                     \"#FFFF80\"                     \"#009E73\"  #>              Invalid lat-long                Equal lat-long  #>                      \"gray22\"                     \"#F7E1A0\"  #>                 Zero lat-long              Capital centroid  #>                     \"#85660d\"                         \"red\"  #>                   Out of year     Country-Province centroid  #>                      \"gray10\"                     \"orange3\"  #>                      Open sea                    Urban area  #>                    \"darkblue\"                        \"gray\"  #>                       Outlier             GBIF headquarters  #>                        \"pink\"                     \"#B00068\"  #>      Biodiversity Institution Artificial Hotspot Occurrence  #>                   \"firebrick\"                     \"#2ED9FF\"  #>               Geo-Thinned out               Env-Thinned out  #>                         \"red\"                        \"gold\"  #>              Forcibly removed                     consensus  #>                      \"gray25\"                   \"chocolate\""},{"path":"https://wevertonbio.github.io/RuHere/reference/flag_consensus.html","id":null,"dir":"Reference","previous_headings":"","what":"Get consensus across multiple flags — flag_consensus","title":"Get consensus across multiple flags — flag_consensus","text":"functions creates new column representing consensus across multiple flag columns. consensus can computed two ways: \"all_true\": record considered valid (TRUE) specified flag valid (TRUE). \"any_true\": record considered valid (TRUE) least one specified flag valid (TRUE).","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/flag_consensus.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get consensus across multiple flags — flag_consensus","text":"","code":"flag_consensus(   occ,   flags,   consensus_rule = \"all_true\",   flag_name = \"consensus_flag\",   remove_flag_columns = FALSE )"},{"path":"https://wevertonbio.github.io/RuHere/reference/flag_consensus.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get consensus across multiple flags — flag_consensus","text":"occ (data.frame data.table) dataset occurrence records processed two flagging functions. flags (character) string vector names flags used consensus evaluation. See details see options. consensus_rule (character) string specifying consensus computed. Options \"all_true\" (record considered valid flags TRUE \"any_true\"(record considered valid least one flag TRUE. Default \"all_true\" flag_name (character) name column store consensus result. Default \"consensus_flag\". remove_flag_columns (logical) whether remove original flag columns specified flags final output. Default FALSE.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/flag_consensus.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get consensus across multiple flags — flag_consensus","text":"original occ additional logical column defined flag_name, indicating consensus result based selected consensus_rule.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/flag_consensus.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Get consensus across multiple flags — flag_consensus","text":"following flags available: correct_country, correct_state, cultivated, fossil, inaturalist, faunabr, florabr, wcvp, iucn, duplicated, thin, .val, .equ, .zer, .cap, .cen, .sea, .urb, .otl, .gbf, .inst, .aohi.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/flag_consensus.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Get consensus across multiple flags — flag_consensus","text":"","code":"# Load example data data(\"occ_flagged\", package = \"RuHere\")  # Get consensus using florabr, wcvp, and iucn flags  # Valid (TRUE) only when all flags are TRUE occ_consensus_all <- flag_consensus(occ = occ_flagged,                                     flags = c(\"florabr\", \"wcvp\", \"iucn\"),                                     consensus_rule = \"all_true\") # Valid (TRUE) when at least one flag is TRUE occ_consensus_any <- flag_consensus(occ = occ_flagged,                                     flags = c(\"florabr\", \"wcvp\", \"iucn\"),                                     consensus_rule = \"any_true\")"},{"path":"https://wevertonbio.github.io/RuHere/reference/flag_cultivated.html","id":null,"dir":"Reference","previous_headings":"","what":"Flag occurrence records of cultived individuals — flag_cultivated","title":"Flag occurrence records of cultived individuals — flag_cultivated","text":"function identifies records cultivated individuals based record description.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/flag_cultivated.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Flag occurrence records of cultived individuals — flag_cultivated","text":"","code":"flag_cultivated(   occ,   columns = c(\"occurrenceRemarks\", \"habitat\", \"locality\"),   cultivated_terms = NULL,   not_cultivated_terms = NULL )"},{"path":"https://wevertonbio.github.io/RuHere/reference/flag_cultivated.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Flag occurrence records of cultived individuals — flag_cultivated","text":"occ (data.frame) data frame containing occurrence records examined, preferably standardized using format_columns(). Must contain columns specified columns. columns columns (character) vector column names occ function search cultivated-related expressions. Default c(\"occurrenceRemarks\", \"habitat\", \"locality\"). cultivated_terms (character) optional vector additional terms indicate cultivated individual. Default NULL, meaning use cultivated-related expressions available RuHere::cultivated$cultivated. not_cultivated_terms (character) optional vector additional terms indicate non-cultivated individual. Default NULL, meaning use non cultivated-related expressions available RuHere::cultivated$not_cultivated.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/flag_cultivated.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Flag occurrence records of cultived individuals — flag_cultivated","text":"data.frame original occ data frame augmented new column named cultivated_flag. Records identified cultivated receive FALSE, records receive TRUE.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/flag_cultivated.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Flag occurrence records of cultived individuals — flag_cultivated","text":"","code":"# Load example data data(\"occurrences\", package = \"RuHere\") # Flag fossil records occ_cultivated <- flag_cultivated(occ = occurrences)"},{"path":"https://wevertonbio.github.io/RuHere/reference/flag_duplicates.html","id":null,"dir":"Reference","previous_headings":"","what":"Flag duplicated records — flag_duplicates","title":"Flag duplicated records — flag_duplicates","text":"function identifies duplicated records based species name coordinates, well user-defined additional columns raster cells. Among duplicated records, function keeps one unflagged record, chosen according continuous variable (e.g., keeping recent), categorical variable (e.g., prioritizing specific data source), randomly.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/flag_duplicates.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Flag duplicated records — flag_duplicates","text":"","code":"flag_duplicates(   occ,   species = \"species\",   long = \"decimalLongitude\",   lat = \"decimalLatitude\",   additional_groups = NULL,   continuous_variable = NULL,   decreasing = TRUE,   categorical_variable = NULL,   priority_categories = NULL,   by_cell = FALSE,   raster_variable = NULL )"},{"path":"https://wevertonbio.github.io/RuHere/reference/flag_duplicates.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Flag duplicated records — flag_duplicates","text":"occ (data.frame) data frame containing occurrence records examined, preferably standardized using format_columns(). Must contain columns specified species, long lat arguments. species (character) name column containing species names. Default \"species\". long (character)  name column containing longitude values. Default \"decimalLongitude\". lat (character) name column containing latitude values. Default \"decimalLatitude\". additional_groups (character) optional vector additional column names consider identifying duplicates. example, \"year\" included, records coordinates different collection years flagged. Default NULL. continuous_variable (character) optional name numeric column used sort duplicated records select one remain unflagged. Default NULL, meaning sorting occur unflagged record selected randomly. decreasing (logical) whether sort records decreasing order using continuous_variable (e.g., recent oldest variable \"year\"). applicable continuous_variable NULL. Default TRUE. categorical_variable (character) (character) optional name categorical column used sort duplicated records select one remain unflagged. provided, order priority must specified priority_categories. Default NULL. priority_categories (character) vector categories, desired order priority, present column specified categorical_variable. applicable categorical_variable NULL. Default NULL. by_cell (logical) whether use raster cells instead raw coordinates identify duplicates (.e., records inside raster cell treated duplicates). TRUE, SpatRaster must supplied raster_variable. Default FALSE. raster_variable (SpatRaster) SpatRaster used identify duplicated records raster cell. applicable by_cell TRUE. Default NULL.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/flag_duplicates.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Flag duplicated records — flag_duplicates","text":"data.frame original occ data frame augmented new column named duplicated_flag. Records identified duplicated receive FALSE, unique retained records receive TRUE.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/flag_duplicates.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Flag duplicated records — flag_duplicates","text":"","code":"# Load example data data(\"occurrences\", package = \"RuHere\") # Duplicate some records as example occurrences <- rbind(occurrences[1:1000, ], occurrences[1:100,]) # Flag duplicates occ_dup <- flag_duplicates(occ = occurrences) sum(!occ_dup$duplicated_flag) #Number of duplicated records #> [1] 100"},{"path":"https://wevertonbio.github.io/RuHere/reference/flag_env_moran.html","id":null,"dir":"Reference","previous_headings":"","what":"Select Environmentally Thinned Occurrences Using Moran's I Autocorrelation — flag_env_moran","title":"Select Environmentally Thinned Occurrences Using Moran's I Autocorrelation — flag_env_moran","text":"function evaluates multiple environmentally thinned datasets (produced using different number blocks) selects one best balances low spatial autocorrelation number retained records. number bins provided n_bins, function computes Moran's selected environmental variables summarizes autocorrelation using chosen statistic (mean, median, minimum, maximum). best thinning level selected according criteria described Details.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/flag_env_moran.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Select Environmentally Thinned Occurrences Using Moran's I Autocorrelation — flag_env_moran","text":"","code":"flag_env_moran(   occ,   species = \"species\",   long = \"decimalLongitude\",   lat = \"decimalLatitude\",   env_layers,   n_bins,   distance = \"haversine\",   moran_summary = \"mean\",   min_records = 10,   min_imoran = 0.1,   prioritary_column = NULL,   decreasing = TRUE,   do_pca = FALSE,   mask = NULL,   pca_buffer = 1000,   flag_for_NA = FALSE,   return_all = FALSE,   verbose = TRUE )"},{"path":"https://wevertonbio.github.io/RuHere/reference/flag_env_moran.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Select Environmentally Thinned Occurrences Using Moran's I Autocorrelation — flag_env_moran","text":"occ (data.frame data.table) data frame containing occurrence records single species. Must contain columns species, longitude, latitude. species (character) name column occ contains species scientific names. Default \"species\". long (character) name column occ contains longitude values. Default \"decimalLongitude\". lat (character) name column occ contains latitude values. Default \"decimalLatitude\". env_layers (SpatRaster) object containing environmental variables splitting n_bins computing Moran's . n_bins (numeric) vector number bins environmental variable divided (e.g., c(5, 10, 15, 20)). distance (character) distance metric used compute weight matrix Moran's . One \"haversine\" \"euclidean\". Default: \"haversine\". moran_summary (character) summary statistic used select best thinning distance. One \"mean\", \"median\", \"max\", \"min\". Default: \"mean\". min_records (numeric) minimum number records required dataset considered. Default: 10. min_imoran (numeric) minimum Moran's required avoid selecting datasets extremely low spatial autocorrelation. Default: 0.1. prioritary_column (character) name numeric columns occto define retention priority (e.g., quality score, year). See details. decreasing (logical) whether sort records decreasing order using prioritary_column (e.g., recent oldest variable \"year\"). applicable prioritary_column NULL. Default TRUE. do_pca (logical) whether environmental variables summarized using PCA computing Moran's . Default: FALSE. See details. mask (SpatVector SpatExtent) optional spatial object mask env_layers computing PCA. applicable do_pca = TRUE. Default NULL. pca_buffer (numeric) buffer width (km) used PCA computed convex hull records. Ignored mask provided. Default: 1000. flag_for_NA (logical) whether treat records falling NA cells env_layers valid (TRUE) invalid (FALSE). Default FALSE. return_all (logical) whether return full list thinned datasets. Default FALSE. verbose (logical) whether print messages progress. Default TRUE","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/flag_env_moran.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Select Environmentally Thinned Occurrences Using Moran's I Autocorrelation — flag_env_moran","text":"list : occ: selected thinned occurrence dataset column thin_env_flagindicating whether record retained (TRUE) flagged redundant (FALSE) environmental space . imoran: table summarizing Moran's thinning distance n_bins: number bins produced selected dataset moran_summary: summary statistic used select dataset all_thined: (optional) list thinned datasets bin numbers. returned return_all set TRUE","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/flag_env_moran.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Select Environmentally Thinned Occurrences Using Moran's I Autocorrelation — flag_env_moran","text":"function inspired approach used Velazco et al. (2020), extending procedure allowing: prioritization records based user-defined variable (e.g., year) optional PCA transformation environmental layers selection rules prevent datasets records extremely low Moran's chosen. Procedure overview bin number n_bins, generate spatially thinned dataset using thin_env() function. Extract environmental values retained records. Compute Moran's environmental variable. Summarize autocorrelation per dataset (mean, median, min, max). Apply selection criteria: Keep datasets least min_records records. Keep datasets Moran's ≥ min_imoran. Round Moran's two decimal places select dataset 25th lowest autocorrelation. dataset selected, choose dataset retaining records. still tied, choose dataset largest number bins. Distance matrix Moran's Moran's requires weight matrix derived pairwise distances among records. Two distance types available: \"haversine\": geographic distance computed fields::rdist.earth() (default; recommended longitude/latitude coordinates) \"euclidean\": Euclidean distance computed stats::dist() Environmental PCA (optional) do_pca = TRUE, environmental layers summarized using PCA Moran's computed. mask provided, PCA computed masked layers. Otherwise, convex hull around records buffered pca_buffer kilometers define PCA area. select axis together explain 90% variation.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/flag_env_moran.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Select Environmentally Thinned Occurrences Using Moran's I Autocorrelation — flag_env_moran","text":"","code":"# Load example data data(\"occurrences\", package = \"RuHere\") # Subset occurrences from Araucaria occ <- occurrences[occurrences$species == \"Araucaria angustifolia\", ] # Load example of raster variables data(\"worldclim\", package = \"RuHere\") # Unwrap Packed raster r <- terra::unwrap(worldclim) # Select thinned occurrences occ_env_moran <- flag_env_moran(occ = occ,                                   n_bins = c(5, 10, 20, 30, 40, 50),                                   env_layers = r) #> Filtering records... #> Calculating spatial autocorrelation using Moran Index... # Selected number of bins occ_env_moran$n_bins #> [1] \"50\" # Number of flagged and unflagged records sum(occ_env_moran$occ$thin_env_flag) #Retained #> [1] 691 sum(!occ_env_moran$occ$thin_env_flag) #Flagged for thinning out #> [1] 233 # Results os the spatial autocorrelation analysis occ_env_moran$imoran #>                   species n_bins     bio_1     bio_7    bio_12 median_moran #> 5  Araucaria angustifolia      5 0.2443818 0.3288289 0.1647230    0.2443818 #> 10 Araucaria angustifolia     10 0.2093983 0.3634131 0.1693231    0.2093983 #> 20 Araucaria angustifolia     20 0.1655434 0.3455124 0.1727638    0.1727638 #> 30 Araucaria angustifolia     30 0.1723510 0.3503620 0.1751458    0.1751458 #> 40 Araucaria angustifolia     40 0.1716318 0.3369794 0.1716155    0.1716318 #> 50 Araucaria angustifolia     50 0.1681880 0.3367401 0.1750636    0.1750636 #>    mean_moran min_moran max_moran n_filtered all_records prop_lost #> 5   0.2459779 0.1647230 0.3288289         57         924 0.9383117 #> 10  0.2473782 0.1693231 0.3634131        197         924 0.7867965 #> 20  0.2279399 0.1655434 0.3455124        478         924 0.4826840 #> 30  0.2326196 0.1723510 0.3503620        617         924 0.3322511 #> 40  0.2267422 0.1716155 0.3369794        660         924 0.2857143 #> 50  0.2266639 0.1681880 0.3367401        691         924 0.2521645"},{"path":"https://wevertonbio.github.io/RuHere/reference/flag_faunabr.html","id":null,"dir":"Reference","previous_headings":"","what":"Identify records outside natural ranges according to Fauna do Brasil — flag_faunabr","title":"Identify records outside natural ranges according to Fauna do Brasil — flag_faunabr","text":"Flags (validates) occurrence records based known distribution data Catálogo Taxônomico da Fauna Brasil (faunabr) data. function checks occurrence point given species falls within documented distribution, allowing user-defined buffers around Brazilian states, entire country. Records flagged valid (TRUE) fall within specified range distribution information available faunabr data.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/flag_faunabr.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Identify records outside natural ranges according to Fauna do Brasil — flag_faunabr","text":"","code":"flag_faunabr(   data_dir,   occ,   species = \"species\",   long = \"decimalLongitude\",   lat = \"decimalLatitude\",   origin = NULL,   by_state = TRUE,   buffer_state = 20,   by_country = TRUE,   buffer_country = 20,   keep_columns = TRUE,   spat_state = NULL,   spat_country = NULL,   progress_bar = FALSE,   verbose = FALSE )"},{"path":"https://wevertonbio.github.io/RuHere/reference/flag_faunabr.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Identify records outside natural ranges according to Fauna do Brasil — flag_faunabr","text":"data_dir (character)  Required directory path faunabr data saved. occ (data.frame data.table) data frame containing occurrence records flagged. Must contain columns species, longitude, latitude. species (character) name column occ contains species scientific names. Default \"species\". long (character) name column occ contains longitude values. Default \"decimalLongitude\". lat (character) name column occ contains latitude values. Default \"decimalLatitude\". origin (character) filter faunabr data origin type checking (\"native\", \"cryptogenic\", \"exotic\"). Default NULL (filtering). by_state (logical) TRUE, flags records based distance known Brazilian state distributions. Default TRUE. buffer_state (numeric) buffer distance (kilometers) applied around known state distribution boundaries. Records within distance considered valid. Default 20 km. by_country (logical) TRUE, flags records based distance country distributions. Default TRUE. buffer_country (numeric) buffer distance (kilometers) applied around country boundaries. Records within distance considered valid. Default 20 km. keep_columns (logical) TRUE, returned data frame contains original columns occ. FALSE, returns key columns flag. Default TRUE. spat_state (SpatVector) SpatVector Brazilian states. default, uses SpatVector provided geobr::read_state(). can another Spatvector, structure must identical 'faunabr::states', column called \"abbrev_state\" identifying states codes. spat_country (SpatVector) SpatVector world countries. default, uses SpatVector provided rnaturalearth::ne_countries. can another Spatvector, structure must identical 'faunabr::world_fauna', column called \"country_code\" identifying country codes. progress_bar (logical) whether display progress bar processing. TRUE, 'pbapply' package must installed. Default FALSE. verbose (logical) TRUE, prints messages progress number species checked. Default FALSE.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/flag_faunabr.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Identify records outside natural ranges according to Fauna do Brasil — flag_faunabr","text":"#' data.frame original occ data frame augmented new column named faunabr_flag. column logical (TRUE/FALSE) indicating whether record falls within expected distribution (plus buffer) based faunabr data. Records species found faunabr data NA faunabr_flag column.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/flag_faunabr.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Identify records outside natural ranges according to Fauna do Brasil — flag_faunabr","text":"","code":"# Load example data data(\"occurrences\", package = \"RuHere\") # Get only occurrences from Azure Jay occ <- occurrences[occurrences$species == \"Cyanocorax caeruleus\", ] # Set folder where distributional datasets were saved # Here, just a sample provided in the package # You must run 'faunabr_here()' beforehand to download the necessary data files for your species dataset_dir <- system.file(\"extdata/datasets\", package = \"RuHere\") # Flag records using faunabr specialist information occ_fauna <- flag_faunabr(data_dir = dataset_dir, occ = occ)"},{"path":"https://wevertonbio.github.io/RuHere/reference/flag_florabr.html","id":null,"dir":"Reference","previous_headings":"","what":"Identify records outside natural ranges according to Flora e Funga do Brasil — flag_florabr","title":"Identify records outside natural ranges according to Flora e Funga do Brasil — flag_florabr","text":"Flags (validates) occurrence records based known distribution data Flora e Funga Brasil (florabr) data. function checks occurrence point given species falls within documented distribution, allowing user-defined buffers around Brazilian states, biomes, entire country. Records flagged valid (TRUE) fall within specified range distribution information available florabr data.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/flag_florabr.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Identify records outside natural ranges according to Flora e Funga do Brasil — flag_florabr","text":"","code":"flag_florabr(   data_dir,   occ,   species = \"species\",   long = \"decimalLongitude\",   lat = \"decimalLatitude\",   origin = NULL,   by_state = TRUE,   buffer_state = 20,   by_biome = TRUE,   buffer_biome = 20,   by_endemism = TRUE,   buffer_brazil = 20,   state_vect = NULL,   state_column = NULL,   biome_vect = NULL,   biome_column = NULL,   br_vect = NULL,   keep_columns = TRUE,   progress_bar = FALSE,   verbose = FALSE )"},{"path":"https://wevertonbio.github.io/RuHere/reference/flag_florabr.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Identify records outside natural ranges according to Flora e Funga do Brasil — flag_florabr","text":"data_dir (character) directory path florabr data saved Required. occ (data.frame) data frame containing occurrence records flagged. Must contain columns species, longitude, latitude. species (character) name column occ contains species scientific names. Default \"species\". long (character) name column occ contains longitude values. Default \"decimalLongitude\". lat (character) name column occ contains latitude values. Default \"decimalLatitude\". origin (character NULL) filter florabr data origin type checking (\"native\", \"cultivated\", \"naturalized\", \"unknown\", \"not_found_in_brazil\"). Default NULL (filtering). by_state (logical) TRUE, flags records based distance known Brazilian state distributions. Default TRUE. buffer_state (numeric) buffer distance (kilometers) applied around known state distribution boundaries. Records within distance considered valid. Default 20 km. by_biome (logical) TRUE, flags records based distance known Brazilian biome distributions. Default TRUE. buffer_biome (numeric) buffer distance (kilometers) applied around known biome distribution boundaries. Records within distance considered valid. Default 20 km. by_endemism (logical) TRUE, includes check entire Brazilian boundary. Default TRUE. buffer_brazil (numeric) buffer distance (kilometers) applied around entire Brazilian boundary. Default 20 km. state_vect (SpatVector) qn optional custom simple features (sf) vector representing Brazilian states/regions. NULL, uses default data loaded florabr. Default NULL. state_column (character) name column state_vect (default state vector) used match distribution information. Default NULL. biome_vect (SpatVector) optional custom simple features (sf) vector representing Brazilian biomes. NULL, uses default data loaded florabr. Default NULL. biome_column (character) name column biome_vect (default biome vector) used match distribution information. Default NULL. br_vect (SpatVector) optional custom simple features (sf) vector representing entire Brazilian boundary. NULL, uses default data loaded florabr. Default NULL. keep_columns (logical) TRUE, returned data frame contains original columns occ. FALSE, returns key columns flag. Default TRUE. progress_bar (logical) whether display progress bar processing. TRUE, 'pbapply' package must installed. Default FALSE. verbose (logical) TRUE, prints messages progress number species checked. Default FALSE.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/flag_florabr.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Identify records outside natural ranges according to Flora e Funga do Brasil — flag_florabr","text":"data.frame original occ data frame augmented new column named florabr_flag. column logical (TRUE/FALSE) indicating whether record falls within expected distribution (plus buffer) based florabr data. Records species found florabr data NA florabr_flag column.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/flag_florabr.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Identify records outside natural ranges according to Flora e Funga do Brasil — flag_florabr","text":"","code":"# Load example data data(\"occurrences\", package = \"RuHere\") # Get only occurrences from Araucaria occ <- occurrences[occurrences$species == \"Araucaria angustifolia\", ] # Set folder where distributional datasets were saved # Here, just a sample provided in the package # You must run 'florabr_here()' beforehand to download the necessary data files for your species dataset_dir <- system.file(\"extdata/datasets\", package = \"RuHere\")  # Flag records using specialist information from Flora do Brasil occ_flora <- flag_florabr(data_dir = dataset_dir, occ = occ)"},{"path":"https://wevertonbio.github.io/RuHere/reference/flag_fossil.html","id":null,"dir":"Reference","previous_headings":"","what":"Flag fossil records — flag_fossil","title":"Flag fossil records — flag_fossil","text":"function identifies occurrence records correspond fossils, based specific search terms found selected columns.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/flag_fossil.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Flag fossil records — flag_fossil","text":"","code":"flag_fossil(   occ,   columns = c(\"basisOfRecord\", \"occurrenceRemarks\"),   fossil_terms = NULL )"},{"path":"https://wevertonbio.github.io/RuHere/reference/flag_fossil.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Flag fossil records — flag_fossil","text":"occ (data.frame) data frame containing occurrence records examined, preferably standardized using format_columns(). Must contain columns specified columns. columns (character) vector column names occ function search term \"fossil\" fossil-related expressions. Default c(\"basisOfRecord\", \"occurrenceRemarks\"). fossil_terms (character) optional vector additional terms indicate fossil record (e.g., \"paleontological\", \"subfossil\"). Default NULL.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/flag_fossil.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Flag fossil records — flag_fossil","text":"data.frame original occ data frame augmented new column named fossil_flag. Records identified fossils receive FALSE, records receive TRUE.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/flag_fossil.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Flag fossil records — flag_fossil","text":"","code":"# Load example data data(\"occurrences\", package = \"RuHere\") # Flag fossil records occ_fossil <- flag_fossil(occ = occurrences)"},{"path":"https://wevertonbio.github.io/RuHere/reference/flag_geo_moran.html","id":null,"dir":"Reference","previous_headings":"","what":"Select Spatially Thinned Occurrences Using Moran's I Autocorrelation — flag_geo_moran","title":"Select Spatially Thinned Occurrences Using Moran's I Autocorrelation — flag_geo_moran","text":"function evaluates multiple geographically thinned datasets (produced using different thinning distances) selects one best balances low spatial autocorrelation number retained records. thinning distance provided d, function computes Moran's selected environmental variables summarizes autocorrelation using chosen statistic (mean, median, minimum, maximum). best thinning level selected according criteria described Details.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/flag_geo_moran.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Select Spatially Thinned Occurrences Using Moran's I Autocorrelation — flag_geo_moran","text":"","code":"flag_geo_moran(   occ,   species = \"species\",   long = \"decimalLongitude\",   lat = \"decimalLatitude\",   d,   distance = \"haversine\",   moran_summary = \"mean\",   min_records = 10,   min_imoran = 0.1,   prioritary_column = NULL,   decreasing = TRUE,   env_layers,   do_pca = FALSE,   mask = NULL,   pca_buffer = 1000,   return_all = FALSE,   verbose = TRUE )"},{"path":"https://wevertonbio.github.io/RuHere/reference/flag_geo_moran.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Select Spatially Thinned Occurrences Using Moran's I Autocorrelation — flag_geo_moran","text":"occ (data.frame data.table) data frame containing occurrence records single species. Must contain columns species, longitude, latitude. species (character) name column occ contains species scientific names. Default \"species\". long (character) name column occ contains longitude values. Default \"decimalLongitude\". lat (character) name column occ contains latitude values. Default \"decimalLatitude\". d (numeric) vector thinning distances kilometers (e.g., c(5, 10, 15, 20)). distance (character) distance metric used compute weight matrix Moran's . One \"haversine\" \"euclidean\". Default: \"haversine\". moran_summary (character) summary statistic used select best thinning distance. One \"mean\", \"median\", \"max\", \"min\". Default: \"mean\". min_records (numeric) minimum number records required dataset considered. Default: 10. min_imoran (numeric) minimum Moran's required avoid selecting datasets extremely low spatial autocorrelation. Default: 0.1. prioritary_column (character) name numeric columns occto define retention priority (e.g., quality score, year). See details. decreasing (logical) whether sort records decreasing order using prioritary_column (e.g., recent oldest variable \"year\"). applicable prioritary_column NULL. Default TRUE. env_layers (SpatRaster) object containing environmental variables computing Moran's . do_pca (logical) whether environmental variables summarized using PCA computing Moran's . Default: FALSE. See details. mask (SpatVector SpatExtent) optional spatial object mask env_layers computing PCA. applicable do_pca = TRUE. Default NULL. pca_buffer (numeric) buffer width (km) used PCA computed convex hull records. Ignored mask provided. Default: 1000. return_all (logical) whether return full list thinned datasets. Default: FALSE. verbose (logical) whether print messages progress. Default TRUE","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/flag_geo_moran.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Select Spatially Thinned Occurrences Using Moran's I Autocorrelation — flag_geo_moran","text":"list : occ: selected thinned occurrence dataset column thin_geo_flagindicating whether record retained (TRUE) flagged. imoran: table summarizing Moran's thinning distance distance: thinning distance produced selected dataset moran_summary: summary statistic used select dataset all_thined: (optional) list thinned datasets distances. returned return_all set TRUE","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/flag_geo_moran.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Select Spatially Thinned Occurrences Using Moran's I Autocorrelation — flag_geo_moran","text":"function inspired approach used Velazco et al. (2021), extending procedure allowing: prioritization records based user-defined variable (e.g., year) optional PCA transformation environmental layers selection rules prevent datasets records extremely low Moran's chosen. Procedure overview distance d, generate spatially thinned dataset using thin_geo() function. Extract environmental values retained records. Compute Moran's environmental variable. Summarize autocorrelation per dataset (mean, median, min, max). Apply selection criteria: Keep datasets least min_records records. Keep datasets Moran's higher min_imoran. Round Moran's two decimal places select dataset 25th lowest autocorrelation. dataset selected, choose dataset retaining records. still tied, choose dataset smallest thinning distance. Distance matrix Moran's Moran's requires weight matrix derived pairwise distances among records. Two distance types available: \"haversine\": geographic distance computed fields::rdist.earth() (default; recommended longitude/latitude coordinates) \"euclidean\": Euclidean distance computed stats::dist() Environmental PCA (optional) do_pca = TRUE, environmental layers summarized using PCA Moran's computed. mask provided, PCA computed masked layers. Otherwise, convex hull around records buffered pca_buffer kilometers define PCA area. select axis together explain 90% variation.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/flag_geo_moran.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Select Spatially Thinned Occurrences Using Moran's I Autocorrelation — flag_geo_moran","text":"Velazco, S. J. E., Svenning, J. C., Ribeiro, B. R., & Laureto, L. M. O. (2021). opportunities threats conserve phylogenetic diversity Neotropical palms. Diversity Distributions, 27(3), 512–523. https://doi.org/10.1111/ddi.13215","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/flag_geo_moran.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Select Spatially Thinned Occurrences Using Moran's I Autocorrelation — flag_geo_moran","text":"","code":"# Load example data data(\"occurrences\", package = \"RuHere\") # Subset occurrences from Araucaria occ <- occurrences[occurrences$species == \"Araucaria angustifolia\", ] # Load example of raster variables data(\"worldclim\", package = \"RuHere\") # Unwrap Packed raster r <- terra::unwrap(worldclim) # Select thinned occurrences occ_geo_moran <- flag_geo_moran(occ = occ, d = c(5, 10, 20, 30),                                   env_layers = r) #> Filtering records... #> Calculating spatial autocorrelation using Moran Index... # Selected distance occ_geo_moran$distance #> [1] \"30\" # Number of flagged and unflagged records sum(occ_geo_moran$occ$thin_geo_flag) #Retained #> [1] 297 sum(!occ_geo_moran$occ$thin_geo_flag) #Flagged for thinning out #> [1] 627 # Results os the spatial autocorrelation analysis occ_geo_moran$imoran #>                   species Distance     bio_1     bio_7    bio_12 median_moran #> 5  Araucaria angustifolia        5 0.1678046 0.3300641 0.1719100    0.1719100 #> 10 Araucaria angustifolia       10 0.1511561 0.3003992 0.1665782    0.1665782 #> 20 Araucaria angustifolia       20 0.1318548 0.2699369 0.1473847    0.1473847 #> 30 Araucaria angustifolia       30 0.1072336 0.2590974 0.1499994    0.1499994 #>    mean_moran min_moran max_moran n_filtered all_records prop_lost #> 5   0.2232595 0.1678046 0.3300641        836         924 0.0952381 #> 10  0.2060445 0.1511561 0.3003992        621         924 0.3279221 #> 20  0.1830588 0.1318548 0.2699369        407         924 0.5595238 #> 30  0.1721101 0.1072336 0.2590974        297         924 0.6785714"},{"path":"https://wevertonbio.github.io/RuHere/reference/flag_inaturalist.html","id":null,"dir":"Reference","previous_headings":"","what":"Flag occurrence records sourced from iNaturalist — flag_inaturalist","title":"Flag occurrence records sourced from iNaturalist — flag_inaturalist","text":"function identifies flags occurrence records sourced iNaturalist. can flag iNaturalist records Research Grade status.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/flag_inaturalist.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Flag occurrence records sourced from iNaturalist — flag_inaturalist","text":"","code":"flag_inaturalist(occ, columns = \"datasetName\", research_grade = FALSE)"},{"path":"https://wevertonbio.github.io/RuHere/reference/flag_inaturalist.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Flag occurrence records sourced from iNaturalist — flag_inaturalist","text":"occ (data.frame) data frame containing occurrence records examined, preferably standardized using format_columns(). Must contain columns specified columns. columns (character) column name occ function search term \"iNaturalist\". Default \"datasetName\". research_grade (logical) whether flag records iNaturalist, including Research Grade status. Default FALSE, meaning iNaturalist records without Research Grade flagged.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/flag_inaturalist.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Flag occurrence records sourced from iNaturalist — flag_inaturalist","text":"data.frame original occ data frame augmented new column named inaturalist_flag. Flagged records receive FALSE, records receive TRUE.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/flag_inaturalist.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Flag occurrence records sourced from iNaturalist — flag_inaturalist","text":"According iNaturalist, Observations become Research Grade : iNaturalist community agrees species-level ID lower, .e. 2/3 identifiers agree taxon; community taxon observation taxon agree; community agrees ID family species votes community taxon good can .","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/flag_inaturalist.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Flag occurrence records sourced from iNaturalist — flag_inaturalist","text":"","code":"# Load example data data(\"occurrences\", package = \"RuHere\") # Flag only iNaturalist records without Research Grade occ_inat <- flag_inaturalist(occ = occurrences, research_grade = FALSE) table(occ_inat$inaturalist_flag) # Number of records flagged (FALSE) #>  #> TRUE  #> 4080  # Flag all iNaturalist records (including Research Grade) occ_inat <- flag_inaturalist(occ = occurrences, research_grade = TRUE) table(occ_inat$inaturalist_flag) # Number of records flagged (FALSE) #>  #> FALSE  TRUE  #>   869  3211"},{"path":"https://wevertonbio.github.io/RuHere/reference/flag_iucn.html","id":null,"dir":"Reference","previous_headings":"","what":"Identify records outside natural ranges according to the IUCN — flag_iucn","title":"Identify records outside natural ranges according to the IUCN — flag_iucn","text":"Flags (validates) occurrence records based known distribution data International Union Conservation Nature (IUCN) data. function checks occurrence point given species falls within documented distribution, allowing user-defined buffers around region. Records flagged valid (TRUE) fall inside documented distribution (plus optional buffer) species IUCN dataset.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/flag_iucn.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Identify records outside natural ranges according to the IUCN — flag_iucn","text":"","code":"flag_iucn(   data_dir,   occ,   species = \"species\",   long = \"decimalLongitude\",   lat = \"decimalLatitude\",   origin = \"native\",   presence = \"all\",   buffer = 20,   progress_bar = FALSE,   verbose = FALSE )"},{"path":"https://wevertonbio.github.io/RuHere/reference/flag_iucn.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Identify records outside natural ranges according to the IUCN — flag_iucn","text":"data_dir (character) Required directory path IUCN data saved occ (data.frame data.table) data frame containing occurrence records flagged. Must contain columns species, longitude, latitude. species (character) name column occ contains species scientific names. Default \"species\". long (character) name column occ contains longitude values. Default \"decimalLongitude\". lat (character) name column occ contains latitude values. Default \"decimalLatitude\". origin (character) vector specifying origin categories considered part species' range. Options : \"native\", \"introduced\", \"reintroduced\", \"vagrant\", \"origin uncertain\", \"assisted colonisation\", \"\". example,  origin = \"introduced\", regions species considered introduced used validate records.  Default \"native\". presence (character) vector specifying presence type considered part species' range. Options : \"extant\", \"probably extant\", \"possibly extant\", \"extinct\", \"possibly extinct\", \"presence uncertain\", \"\". example,  presence = \"extinct\", regions species considered extinct used validate records.  Default \"\", meaning regions considered. buffer (numeric) buffer distance (kilometers) applied around region distribution. Default 20 km. progress_bar (logical) whether display progress bar processing. TRUE, 'pbapply' package must installed. Default FALSE. verbose (logical) TRUE, prints messages progress number species checked. Default FALSE.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/flag_iucn.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Identify records outside natural ranges according to the IUCN — flag_iucn","text":"data.frame original occ data frame augmented new column named iucn_flag. column logical (TRUE/FALSE) indicating whether record falls within expected distribution (plus buffer) based IUCN data. Records species found IUCN data NA iucn_flag column.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/flag_iucn.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Identify records outside natural ranges according to the IUCN — flag_iucn","text":"","code":"# Load example data data(\"occurrences\", package = \"RuHere\") # Get only occurrences from Araucaria occ <- occurrences[occurrences$species == \"Araucaria angustifolia\", ] # Set folder where distributional datasets were saved # Here, just a sample provided in tha package # You must run 'iucn_here()' beforehand to download the necessary data files dataset_dir <- system.file(\"extdata/datasets\", package = \"RuHere\")  # Flag records using IUCN specialist information occ_iucn <- flag_iucn(data_dir = dataset_dir, occ = occ)"},{"path":"https://wevertonbio.github.io/RuHere/reference/flag_names.html","id":null,"dir":"Reference","previous_headings":"","what":"Flag name dictionary — flag_names","title":"Flag name dictionary — flag_names","text":"named character vector used convert internal flag column names (produced package's flagging functions) human-readable labels.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/flag_names.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Flag name dictionary — flag_names","text":"","code":"flag_names"},{"path":"https://wevertonbio.github.io/RuHere/reference/flag_names.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Flag name dictionary — flag_names","text":"named character vector length 25. names correspond original flag codes (e.g., \"correct_country\", \"duplicated_flag\", \".cen\", \"consensus_flag\"), values cleaned, human-readable labels (e.g., \"Wrong country\", \"Duplicated\", \"Country/Province centroid\", \"consensus\").","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/flag_names.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Flag name dictionary — flag_names","text":"object used internally functions mapview_here() remove_flagged()display intuitive flag names users.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/flag_wcvp.html","id":null,"dir":"Reference","previous_headings":"","what":"Identify records outside natural ranges according to the World Checklist of Vascular Plants — flag_wcvp","title":"Identify records outside natural ranges according to the World Checklist of Vascular Plants — flag_wcvp","text":"Flags (validates) occurrence records based known distribution data World Checklist Vascular Plants (WCVP) data. function checks occurrence point given species falls within documented distribution, allowing user-defined buffers around region. Records flagged valid (TRUE) fall inside documented distribution (plus optional buffer) species WCVP dataset.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/flag_wcvp.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Identify records outside natural ranges according to the World Checklist of Vascular Plants — flag_wcvp","text":"","code":"flag_wcvp(   data_dir,   occ,   species = \"species\",   long = \"decimalLongitude\",   lat = \"decimalLatitude\",   origin = \"native\",   buffer = 20,   progress_bar = FALSE,   verbose = FALSE )"},{"path":"https://wevertonbio.github.io/RuHere/reference/flag_wcvp.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Identify records outside natural ranges according to the World Checklist of Vascular Plants — flag_wcvp","text":"data_dir (character) Required directory path WCVP data saved occ (data.frame data.table) data frame containing occurrence records flagged. Must contain columns species, longitude, latitude. species (character) name column occ contains species scientific names. Default \"species\". long (character) name column occ contains longitude values. Default \"decimalLongitude\". lat (character) name column occ contains latitude values. Default \"decimalLatitude\". origin (character) vector specifying origin categories considered part species' range. Options : \"native\", \"introduced\", \"extinct\", \"location_doubtful\", \"\". example,  origin = \"introduced\", regions species considered introduced used validate records.  Default \"native\". buffer (numeric) buffer distance (kilometers) applied around region distribution. Default 20 km. progress_bar (logical) whether display progress bar processing. TRUE, 'pbapply' package must installed. Default FALSE. verbose (logical) FALSE, prints messages progress number species checked. Default FALSE.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/flag_wcvp.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Identify records outside natural ranges according to the World Checklist of Vascular Plants — flag_wcvp","text":"data.frame original occ data frame augmented new column named wcvp_flag. column logical (TRUE/FALSE) indicating whether record falls within expected distribution (plus buffer) based WCVP data. Records species found WCVP data NA wcvp_flag column.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/flag_wcvp.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Identify records outside natural ranges according to the World Checklist of Vascular Plants — flag_wcvp","text":"","code":"# Load example data data(\"occurrences\", package = \"RuHere\") # Filter occurrences for Araucaria occ <- occurrences[occurrences$species == \"Araucaria angustifolia\", ] # Set folder where distributional datasets were saved # Here, just a sample provided in the package # You must run 'wcvp_here()' beforehand to download the necessary data files dataset_dir <- system.file(\"extdata/datasets\", package = \"RuHere\")  # Flag records using WCVP specialist information occ_wcvp <- flag_wcvp(data_dir = dataset_dir, occ = occ)"},{"path":"https://wevertonbio.github.io/RuHere/reference/flag_year.html","id":null,"dir":"Reference","previous_headings":"","what":"Flag records outside a year range — flag_year","title":"Flag records outside a year range — flag_year","text":"function identifies occurrence records collected user-specified years.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/flag_year.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Flag records outside a year range — flag_year","text":"","code":"flag_year(   occ,   year_column = \"year\",   lower_limit = NULL,   upper_limit = NULL,   flag_NA = FALSE )"},{"path":"https://wevertonbio.github.io/RuHere/reference/flag_year.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Flag records outside a year range — flag_year","text":"occ (data.frame) dataset occurrence records, preferably standardized using format_columns(). Must contain column specified year_column. year_column (character) name column containing year occurrence recorded. column must numeric. lower_limit (numeric) minimum acceptable year. Records collected value flagged. Default NULL. upper_limit (numeric) maximum acceptable year. Records collected value flagged. Default NULL. flag_NA (character) whether flag records missing year information. Default FALSE.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/flag_year.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Flag records outside a year range — flag_year","text":"data.frame identical occ additional column named year_flag. Records collected outside year range specified assigned FALSE.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/flag_year.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Flag records outside a year range — flag_year","text":"","code":"# Load example data data(\"occurrences\", package = \"RuHere\") # Flag records collected before 1980 and after 2010 occ_year <- flag_year(occ = occurrences, lower_limit = 1980,                       upper_limit = 2010)"},{"path":"https://wevertonbio.github.io/RuHere/reference/florabr_here.html","id":null,"dir":"Reference","previous_headings":"","what":"Download the latest version of Flora e Funga do Brasil database — florabr_here","title":"Download the latest version of Flora e Funga do Brasil database — florabr_here","text":"function downloads Flora e Funga Brasil database, required filtering occurrence records using specialists' information via flag_florabr() function.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/florabr_here.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Download the latest version of Flora e Funga do Brasil database — florabr_here","text":"","code":"florabr_here(   data_dir,   data_version = \"latest\",   solve_discrepancy = TRUE,   overwrite = TRUE,   remove_files = TRUE,   verbose = TRUE )"},{"path":"https://wevertonbio.github.io/RuHere/reference/florabr_here.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Download the latest version of Flora e Funga do Brasil database — florabr_here","text":"data_dir (character) directory save data downloaded Flora e Funga Brasil. data_version (character) version Flora e Funga Brasil database download. Use \"latest\" get recent version, updated weekly. Alternatively, specify older version (e.g., data_version=\"393.319\"). Default value \"latest\". solve_discrepancy (logical) whether resolve discrepancies species subspecies/varieties information. set TRUE, species information updated based unique data varieties subspecies. example, subspecies occurs certain biome, implies species also occurs biome. Default TRUE. overwrite (logical) TRUE, data overwritten. Default = TRUE. remove_files (logical) whether remove downloaded files used building final dataset. Default TRUE. verbose (logical) whether display messages function execution. Set TRUE enable display, FALSE run silently. Default TRUE.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/florabr_here.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Download the latest version of Flora e Funga do Brasil database — florabr_here","text":"message indicating data successfully saved directory specified data_dir.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/florabr_here.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Download the latest version of Flora e Funga do Brasil database — florabr_here","text":"","code":"if (FALSE) { # \\dontrun{ # Define a directory to save the data data_dir <- tempdir() # Here, a temporary directory  # Download the latest version of the Flora e Funga do Brasil database florabr_here(data_dir = data_dir) } # }"},{"path":"https://wevertonbio.github.io/RuHere/reference/format_columns.html","id":null,"dir":"Reference","previous_headings":"","what":"Format and standardize column names and data types of an occurrence dataset — format_columns","title":"Format and standardize column names and data types of an occurrence dataset — format_columns","text":"Format standardize column names data types occurrence dataset","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/format_columns.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Format and standardize column names and data types of an occurrence dataset — format_columns","text":"","code":"format_columns(   occ,   metadata,   extract_binomial = TRUE,   binomial_from = NULL,   include_subspecies = FALSE,   include_variety = FALSE,   check_numeric = TRUE,   numeric_columns = NULL,   check_encoding = TRUE,   data_source = NULL,   progress_bar = FALSE,   verbose = FALSE )"},{"path":"https://wevertonbio.github.io/RuHere/reference/format_columns.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Format and standardize column names and data types of an occurrence dataset — format_columns","text":"occ (data.frame data.table) dataset occurrence records, preferably obtained import_gbif(), get_specieslink(), get_bien(), get_idigbio(). metadata (character data.frame) character, one 'gbif', 'specieslink', 'bien', 'idigbio', specifying metadata template use (corresponding data frames available RuHere::prepared_metadata). data.frame provided, must 21 columns (see Details). extract_binomial (logical) whether create column binomial name species. FALSE, create column \"species\" exact name stored scientificName column. Default TRUE. binomial_from (character) column name metadata extract binomial name. applicable extract_binomial = TRUE. metadata corresponds one predefined sources ('gbif', specieslink', 'bien', 'idigbio'), predefined columns used automatically. Default \"scientificName\". include_subspecies (logical) whether include subspecies binomial name.  applicable extract_binomial = TRUE. TRUE, function includes infraspecific epithet pattern \"subsp.\". Default FALSE. include_variety (logical) whether include variety binomial name. applicable extract_binomial = TRUE. TRUE, function includes infraspecific epithet pattern \"var.\". Default FALSE. check_numeric (logical) whether check coerce columns specified numeric_columns numeric type. Default TRUE. numeric_columns (character) vector column names must numeric. Default NULL, meaning check_numeric = TRUE, following columns coerced: 'decimalLongitude', 'decimalLatitude', 'coordinateUncertaintyInMeters', 'elevation', 'year'. check_encoding (logical) whether check fix encoding columns typically contain special characters (see Details). Default TRUE. data_source (character) source occurrence records. Default NULL, meaning use string provided metadata. metadata user-defined data.frame, argument must specified. progress_bar (logical) whether display progress bar processing. TRUE, 'pbapply' package must installed. Default FALSE. verbose (logical) whether print messages progress. Default FALSE.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/format_columns.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Format and standardize column names and data types of an occurrence dataset — format_columns","text":"data.frame standardized column names data types according specified metadata.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/format_columns.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Format and standardize column names and data types of an occurrence dataset — format_columns","text":"user-defined metadata data.frame provided, must include following 21 columns: 'scientificName', 'collectionCode', 'catalogNumber', 'decimalLongitude', 'decimalLatitude', 'coordinateUncertaintyInMeters', 'elevation', 'country', 'stateProvince', 'municipality', 'locality', 'year', 'eventDate', 'recordedBy', 'identifiedBy', 'basisOfRecord', 'occurrenceRemarks', 'habitat', 'datasetName', 'datasetKey', 'key'. check_encoding = TRUE, function inspect , necessary, fix encoding columns: 'collectionCode', 'catalogNumber', 'country', 'stateProvince', municipality', 'locality', 'eventDate','recordedBy', 'identifiedBy', 'basisOfRecord', 'datasetName'.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/format_columns.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Format and standardize column names and data types of an occurrence dataset — format_columns","text":"","code":"# Example with GBIF data(\"occ_gbif\", package = \"RuHere\") #Import data example gbif_standardized <- format_columns(occ_gbif, metadata = \"gbif\") # Example with SpeciesLink data(\"occ_splink\", package = \"RuHere\") #Import data example splink_standardized <- format_columns(occ_splink, metadata = \"specieslink\") # Example with BIEN data(\"occ_bien\", package = \"RuHere\") #Import data example bien_standardized <- format_columns(occ_bien, metadata = \"bien\") # Example with idigbio data(\"occ_idig\", package = \"RuHere\") #Import data example idig_standardized <- format_columns(occ_idig, metadata = \"idigbio\")"},{"path":"https://wevertonbio.github.io/RuHere/reference/get_bien.html","id":null,"dir":"Reference","previous_headings":"","what":"Download occurrence records from BIEN — get_bien","title":"Download occurrence records from BIEN — get_bien","text":"Wrapper function access download occurrence records Botanical Information Ecology Network (BIEN) database. provides unified interface query BIEN data species, genus, family, geographic political boundaries.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/get_bien.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Download occurrence records from BIEN — get_bien","text":"","code":"get_bien(by = \"species\", cultivated = FALSE, new.world = NULL, all.taxonomy = FALSE, native.status = FALSE, natives.only = TRUE, observation.type = FALSE, political.boundaries = TRUE, collection.info = TRUE, only.geovalid = TRUE, min.lat = NULL, max.lat = NULL, min.long = NULL, max.long = NULL, species = NULL, genus = NULL, country = NULL, country.code = NULL, state = NULL, county = NULL, state.code = NULL, county.code = NULL, family = NULL, sf = NULL, dir, filename = \"bien_output\", file.format = \"csv\", compress = FALSE, save = FALSE, verbose = TRUE, ...)"},{"path":"https://wevertonbio.github.io/RuHere/reference/get_bien.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Download occurrence records from BIEN — get_bien","text":"(character) type query perform (\"box\", \"country\", \"county\", \"family\", \"genus\", \"records_per_species\", \"species\", \"sf\", \"state\"). Default species. cultivated (logical) whether include cultivated records exclude . Default FALSE. new.world (logical) TRUE, restricts records New World, FALSE, Old World, NULL, restriction. Default NULL. .taxonomy (logical) TRUE, returns taxonomic levels available, otherwise, limits results accepted names. Default FALSE. native.status (logical) TRUE, includes information native versus non-native status occurrences. Default FALSE. natives.(logical) TRUE, restricts results native species . Default TRUE. observation.type (logical) TRUE, includes information observation types. Default FALSE. political.boundaries (logical) TRUE, restricts search defined political boundaries. Default TRUE. collection.info (logical) TRUE, includes collection-level metadata. Default TRUE. .geovalid (logical) TRUE, restricts output georeferenced spatially valid records. Default TRUE. min.lat (numeric) minimum latitude (decimal degrees) bounding-box query = \"box\". max.lat (numeric) maximum latitude (decimal degrees) bounding-box query = \"box\". min.long (numeric) minimum longitude (decimal degrees) bounding-box query = \"box\". max.long (numeric) maximum longitude (decimal degrees) bounding-box query = \"box\". Ignored otherwise. Default NULL. species (character) species name(s) query = \"species\" \"records_per_species\". Default NULL. genus (character) genus name(s) query = \"genus\". Default NULL. country (character) country name = \"country\", \"state\", \"county\". Default NULL. country.code (character) two-letter ISO country code corresponding country. Default NULL. state (character) state province name = \"state\" \"county\". Default NULL. county (character) county equivalent subdivision name = \"county\". Default NULL. state.code (character) state province code corresponding state. Default NULL. county.code (character) county equivalent subdivision code corresponding county. Default NULL. family (character) family name(s) query = \"family\". Default NULL. sf (object class sf) spatial object defining area interest = \"sf\".  Default NULL. dir (character) directory path file saved. Required save = TRUE. filename (character) name output file without extension. Default \"bien_output\". file.format (character) file format saving output (\"csv\", \"rds\"). Default \"csv\". compress (logical) TRUE save = TRUE, compresses output file .csv.zip. Default FALSE. save (logical) TRUE, saves results CSV file. Default FALSE. verbose (logical) TRUE, prints messages progress number species checked. Default TRUE. ... additional arguments passed underlying BIEN function.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/get_bien.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Download occurrence records from BIEN — get_bien","text":"data.frame containing BIEN occurrence records match specified query. structure available columns depend chosen value corresponding BIEN function.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/get_bien.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Download occurrence records from BIEN — get_bien","text":"","code":"if (FALSE) { # \\dontrun{ # Example: download occurrence records for a single species res_test <- get_bien(     by = \"species\",     species = \"Paubrasilia echinata\",     cultivated = TRUE,     native.status = TRUE,     observation.type = TRUE,     only.geovalid = TRUE ) } # }"},{"path":"https://wevertonbio.github.io/RuHere/reference/get_env_bins.html","id":null,"dir":"Reference","previous_headings":"","what":"Identify Environmental Blocks and Group Nearby Records in Environmental Space — get_env_bins","title":"Identify Environmental Blocks and Group Nearby Records in Environmental Space — get_env_bins","text":"function creates multidimensional grid environmental space splitting environmental variable n_bins equally sized intervals. assigns occurrence record environmental block (bin combination) identifies records fall block (.e., records close environmental space). results can visualized using plot_env_bins() function.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/get_env_bins.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Identify Environmental Blocks and Group Nearby Records in Environmental Space — get_env_bins","text":"","code":"get_env_bins(   occ,   species = \"species\",   long = \"decimalLongitude\",   lat = \"decimalLatitude\",   env_layers,   n_bins = 5 )"},{"path":"https://wevertonbio.github.io/RuHere/reference/get_env_bins.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Identify Environmental Blocks and Group Nearby Records in Environmental Space — get_env_bins","text":"occ (data.frame data.table) data frame containing occurrence records single species. Must contain columns species, longitude, latitude. species (character) name column occ contains species scientific names. Default \"species\". long (character) name column occ contains longitude values. Default \"decimalLongitude\". lat (character) name column occ contains latitude values. Default \"decimalLatitude\". env_layers (SpatRaster) object containing environmental variables. n_bins (numeric) number bins environmental variable divided.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/get_env_bins.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Identify Environmental Blocks and Group Nearby Records in Environmental Space — get_env_bins","text":"list : data: data frame including extracted environmental values, bin indices, unique block_id record. breaks: named list numeric vectors containing break points variable (used plot_env_bins()).","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/get_env_bins.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Identify Environmental Blocks and Group Nearby Records in Environmental Space — get_env_bins","text":"","code":"# Load example data data(\"occurrences\", package = \"RuHere\") # Get only occurrences from Araucaria occ <- occurrences[occurrences$species == \"Araucaria angustifolia\", ] # Load example of raster variables data(\"worldclim\", package = \"RuHere\") # Unwrap Packed raster r <- terra::unwrap(worldclim) # Get bins b <- get_env_bins(occ = occ, env_layers = r, n_bins = 5)"},{"path":"https://wevertonbio.github.io/RuHere/reference/get_idigbio.html","id":null,"dir":"Reference","previous_headings":"","what":"get_idigbio — get_idigbio","title":"get_idigbio — get_idigbio","text":"Downloads species occurrence records iDigBio (Integrated Digitized Biocollections) database flexible taxonomic geographic filtering options.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/get_idigbio.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"get_idigbio — get_idigbio","text":"","code":"get_idigbio(species = NULL, fields = \"all\", genus = NULL, family = NULL, order = NULL, phylum = NULL, kingdom = NULL, country = NULL, county = NULL, limit = NULL, offset = NULL, dir, filename = \"idigbio_output\", save = FALSE, compress = FALSE, file.format = \"csv\", verbose = TRUE, ...)"},{"path":"https://wevertonbio.github.io/RuHere/reference/get_idigbio.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"get_idigbio — get_idigbio","text":"species (character) scientific name(s) species search . Default NULL. fields (character) fields retrieve iDigBio. Default \"\". genus (character) genus name filtering results. Default NULL. family (character) family name filtering results. Default NULL. order (character) order name filtering results. Default NULL. phylum (character) phylum name filtering results. Default NULL. kingdom (character) kingdom name filtering results. Default NULL. country (character) country name geographic filtering. Default NULL. county (character) county name geographic filtering. Default NULL. limit (numeric) maximum number records retrieve. Default NULL (limit). offset (numeric) number records skip starting retrieval. Default NULL (starts 0). dir (character) directory path file saved. Required save = TRUE. filename (character) name output file without extension. Default \"idigbio_output\". save (logical) TRUE, saves results CSV file. Default FALSE. compress (logical) TRUE save = TRUE, compresses output file .csv.zip. Default FALSE. file.format (character) file format saving output (\"csv\", \"rds\"). Default \"csv\" verbose (logical) TRUE, prints messages progress number species checked. Default TRUE. ... additional arguments passed ridigbio::idig_search_records().","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/get_idigbio.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"get_idigbio — get_idigbio","text":"data.frame containing occurrence records iDigBio requested fields.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/get_idigbio.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"get_idigbio — get_idigbio","text":"","code":"if (FALSE) { # \\dontrun{ ## search for a single species records_basic <- get_idigbio(species = \"Arecaceae\")  ## search for multiple species records_multiple <- get_idigbio(   species = c(\"Araucaria angustifolia\"),   limit = 100)  ## save results as a compressed RDS file records_saved_rds <- get_idigbio(   species = \"Anacardiaceae\",   limit = 50,   dir = tempdir(),   filename = \"anacardiaceae_records\",   save = TRUE,   compress = TRUE,   file.format = \"rds\") } # }"},{"path":"https://wevertonbio.github.io/RuHere/reference/get_specieslink.html","id":null,"dir":"Reference","previous_headings":"","what":"Download occurrence records from SpeciesLink — get_specieslink","title":"Download occurrence records from SpeciesLink — get_specieslink","text":"Retrieves occurrence data speciesLink network using user-defined filters. function allows querying taxonomic, geographic, collection-related parameters.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/get_specieslink.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Download occurrence records from SpeciesLink — get_specieslink","text":"","code":"get_specieslink(species = NULL, key = NULL, dir,                        filename = \"specieslink_output\",save = FALSE,                        basisOfRecord = NULL, family = NULL, institutionCode = NULL,                        collectionID = NULL, catalogNumber = NULL,                        kingdom = NULL, phylum = NULL, class = NULL,                        order = NULL, genus = NULL, specificEpithet = NULL,                        infraspecificEpithet = NULL, collectionCode = NULL,                        identifiedBy = NULL, yearIdentified = NULL,                        country = NULL, stateProvince = NULL, county = NULL,                        typeStatus = NULL, recordedBy = NULL,                        recordNumber = NULL, yearCollected = NULL,                        locality = NULL, occurrenceRemarks = NULL,                        barcode = NULL, bbox = NULL, landuse_1 = NULL,                        landuse_year_1 = NULL, landuse_2 = NULL,                        landuse_year_2 = NULL, phonetic = FALSE,                        coordinates = NULL, scope = NULL, synonyms = NULL,                        typus = FALSE, images = FALSE, redlist = NULL,                        limit = NULL, file.format = \"csv\",                        compress = FALSE, verbose = TRUE)"},{"path":"https://wevertonbio.github.io/RuHere/reference/get_specieslink.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Download occurrence records from SpeciesLink — get_specieslink","text":"species (character) species name. Default NULL. key (character) API key authentication token required. Default NULL. dir (character) directory files saved (save = TRUE). filename (character) name output file without extension. Default \"specieslink_output\". save (logical) whether save results file. Default FALSE. basisOfRecord (character) filter basis record. Default NULL. family (character) family name. Default NULL. institutionCode (character) code institution holds specimen. Default NULL. collectionID (character) unique identifier collection. Default NULL. catalogNumber (character) catalog number specimen record. Default NULL. kingdom (character) kingdom name. Default NULL. phylum (character) phylum name. Default NULL. class (character) class name. Default NULL. order (character) order name. Default NULL. genus (character) genus name. Default NULL. specificEpithet (character) specific epithet species. Default NULL. infraspecificEpithet (character) infraspecific epithet. Default NULL. collectionCode (character) code identifying collection within institution. Default NULL. identifiedBy (character) name person identified specimen. Default NULL. yearIdentified (numeric) year identification. Default NULL. country (character) country name. Default NULL. stateProvince (character) state province name. Default NULL. county (character) county municipality name. Default NULL. typeStatus (character) type status. Default NULL. recordedBy (character) collector name. Default NULL. recordNumber (numeric) collector’s record number. Default NULL. yearCollected (numeric) year collection. Default NULL. locality (character) locality description. Default NULL. occurrenceRemarks (character) text field remarks occurrence. Default NULL. barcode (character) barcode unique specimen identifier. Default NULL. bbox (character) bounding box coordinates format \"lon_min+lat_min+lon_max+lat_max\". Default NULL. landuse_1 (character) land use category first year. Default NULL. landuse_year_1 (numeric) year corresponding landuse_1. Default NULL. landuse_2 (character) land use category second year. Default NULL. landuse_year_2 (numeric) year corresponding landuse_2. Default NULL. phonetic (logical) whether use phonetic matching taxon names. Default FALSE. coordinates (character) whether include records geographic coordinates (\"yes\", \"\", \"original\", \"automatic\", \"blocked\", \"consistent\", \"suspect\")). Default NULL. scope (character) scope query (\"p\", \"\", \"m\", \"f\", \"b\"). Default NULL. synonyms (chacarter) whether include synonyms specified taxon (\"sp2000\", \"flora2020\", \"MycoBank\", \"algaebase\", \"DSMZ\", \"moure\"). Default NULL. typus (logical) whether filter type specimens. Default FALSE. images (logical) whether restrict records associated images. Default FALSE. redlist (character) filter IUCN Red List category. Default NULL. limit (numeric) maximum number records return. Default NULL. file.format (character) file format saving output (\"csv\", \"rds\"). Default \"csv\". compress (logical) whether compress output file .zip. Default FALSE. verbose (logical) TRUE, prints messages progress number species checked. Default TRUE. #' @details speciesLink API key can set permanently using:","code":"set_specieslink_credentials(\"your_api_key\")"},{"path":"https://wevertonbio.github.io/RuHere/reference/get_specieslink.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Download occurrence records from SpeciesLink — get_specieslink","text":"data.frame containing occurrence data fields returned speciesLink.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/get_specieslink.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Download occurrence records from SpeciesLink — get_specieslink","text":"","code":"if (FALSE) { # \\dontrun{ # Retrieve records for Arecaceae in São Paulo res <- get_specieslink(   family = \"Arecaceae\",   country = \"Brazil\",   stateProvince = \"São Paulo\",   basisOfRecord = \"PreservedSpecimen\",   limit = 10 )  # Save results as compressed CSV get_specieslink(   family = \"Arecaceae\",   country = \"Brazil\",   save = TRUE,   dir = \"data/\",   filename = \"arecaceae_sp\",   compress = TRUE ) } # }"},{"path":"https://wevertonbio.github.io/RuHere/reference/ggmap_here.html","id":null,"dir":"Reference","previous_headings":"","what":"Static Visualization of Occurrence Flags with ggplot — ggmap_here","title":"Static Visualization of Occurrence Flags with ggplot — ggmap_here","text":"function creates static map occurrence records using ggplot2, highlighting points flagged data-validation functions. visualization helps users quickly inspect spatial patterns flagged unflagged records diagnose potential data-quality issues. function can also used plot heatmap generated spatial_kde() function.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/ggmap_here.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Static Visualization of Occurrence Flags with ggplot — ggmap_here","text":"","code":"ggmap_here(   occ,   species = NULL,   long = \"decimalLongitude\",   lat = \"decimalLatitude\",   flags = \"all\",   additional_flags = NULL,   names_additional_flags = NULL,   col_additional_flags = NULL,   show_no_flagged = TRUE,   col_points = NULL,   size_points = 1,   heatmap = NULL,   low_color = \"blue\",   mid_color = \"yellow\",   high_color = \"red\",   midpoint = 0.5,   alpha_heatmap = 0.5,   continent = NULL,   continent_fill = \"gray70\",   continent_linewidth = 0.3,   continent_border = \"white\",   ocean_fill = \"aliceblue\",   extension = NULL,   facet_wrap = FALSE,   theme_plot = ggplot2::theme_minimal() )"},{"path":"https://wevertonbio.github.io/RuHere/reference/ggmap_here.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Static Visualization of Occurrence Flags with ggplot — ggmap_here","text":"occ (data.frame data.table) dataset containing occurrence records processed one flagging functions. See Details available flag types. species (character) name species subset plot. Default NULL, meaning records species plotted. long (character) name column occ contains longitude values. Default \"decimalLongitude\". lat (character) name column occ contains latitude values. Default \"decimalLatitude\". flags (character) flags used coloring records. Use \"\" display available flags. See Details options. Default \"\". additional_flags (character) optional named character vector names additional logical columns used flags. Default NULL. names_additional_flags (character) optional different name flag provided additional_flags shown map. applicable additional_flags NULL. col_additional_flags (character) additional_flags provided, color records flagged column. Obligatory additional_flags NULL. show_no_flagged (logical) whether display records receive flag.Default TRUE. col_points (character) named vector assigning colors flag. NULL, default colors internal object RuHere::flag_colors() used. size_points (numeric) point size plotting occurrences. Default 6. heatmap (SpatRaster) optional heatmap containing estimated density occurrence records, typically generated spatial_kde() function. Default NULL. low_color (character) color used lowest density values heatmap. applicable heatmap provided. Default \"blue\". mid_color (character) color used midpoint heatmap gradient. Default \"yellow\". high_color (character) color used highest density values heatmap. Default \"red\". midpoint (numeric) central value heatmap gradient, corresponding mid_color. Default 0.5. alpha_heatmap (numeric) Alpha transparency applied heatmap layer, ranging 0 (fully transparent) 1 (fully opaque). Default 0.5. continent (SpatVector) optional polygon layer representing continent boundaries. NULL, built-simplified world map used (see Details). Default: NULL. continent_fill (character) fill color continent polygons. Default \"gray70\". continent_linewidth (numeric) line width continent boundaries. Default 0.3. continent_border (character) color continent polygon borders. Default \"white\". ocean_fill (character) background color used represent ocean. Default \"aliceblue\". extension (SpatExtent numeric) optional map extent specified SpatExtent numeric vector length 4 order: xmin, xmax, ymin, ymax. Default NULL (computed automatically extent occurrence data). facet_wrap (logical) whether plots flag separate panel using ggplot2::facet_wrap(). Default FALSE. theme_plot (theme) ggplot2 theme object. Default ggplot2::theme_minimal().","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/ggmap_here.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Static Visualization of Occurrence Flags with ggplot — ggmap_here","text":"ggplot object displaying flagged optionally unflagged occurrence records.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/ggmap_here.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Static Visualization of Occurrence Flags with ggplot — ggmap_here","text":"function expects occurrence dataset already processed one flagging routines RuHere related packages CoordinateCleaner. logical column occ can used flag. following built-flag names recognized: RuHere: correct_country, correct_state, cultivated, florabr, faunabr, wcvp, iucn, bien, duplicated, thin_geo, thin_env, consensus CoordinateCleaner: .val, .equ, .zer, .cap, .cen, .sea, .urb, .otl, .gbf, .inst, .aohi Users may also supply additional logical columns using additional_flags, optionally providing alternative display names (names_additional_flags) colors (col_additional_flags). continent provided, background map simplified world polygon included package (modified version rnaturalearthdata::map_units110). inspect object, run:   facet_wrap = TRUE, flag plotted separate panel, allowing direct comparison among different types data issues.","code":"terra::unwrap(getExportedValue(\"RuHere\", \"world\"))"},{"path":"https://wevertonbio.github.io/RuHere/reference/ggmap_here.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Static Visualization of Occurrence Flags with ggplot — ggmap_here","text":"","code":"# Load example data data(\"occ_flagged\", package = \"RuHere\") # Visualize all flags with ggplot ggmap_here(occ = occ_flagged)  # Visualize each flag in a separate panel ggmap_here(occ = occ_flagged, facet_wrap = TRUE)"},{"path":"https://wevertonbio.github.io/RuHere/reference/ggrid_here.html","id":null,"dir":"Reference","previous_headings":"","what":"Static Visualization of Richness and Trait Maps — ggrid_here","title":"Static Visualization of Richness and Trait Maps — ggrid_here","text":"function dedicated plotting tool outputs richness_here(). automatically handles single-layer rasters (e.g., species richness) multi-layer rasters (e.g., multiple biological traits flags), creating standardized visual using ggplot2.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/ggrid_here.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Static Visualization of Richness and Trait Maps — ggrid_here","text":"","code":"ggrid_here(   grid,   low_color = \"blue\",   mid_color = \"yellow\",   high_color = \"red\",   alpha = 0.8,   continent = NULL,   continent_fill = \"gray70\",   continent_linewidth = 0.3,   continent_border = \"white\",   ocean_fill = \"aliceblue\",   extension = NULL,   theme_plot = ggplot2::theme_minimal() )"},{"path":"https://wevertonbio.github.io/RuHere/reference/ggrid_here.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Static Visualization of Richness and Trait Maps — ggrid_here","text":"grid (SpatRaster) raster object generated richness_here(). low_color (character) color lowest values. Default \"blue\". mid_color (character) color midpoint. Default \"yellow\". high_color (character) color highest values. Default \"red\". alpha (numeric) transparency grid (0-1). Default 0.8. continent (SpatVector) optional polygon layer boundaries. continent_fill (character) fill color continents. Default \"gray70\". continent_linewidth (numeric) line width continent boundaries. Default 0.3. continent_border (character) color continent polygon borders. Default \"white\". ocean_fill (character) background color ocean. Default \"aliceblue\". extension (SpatExtent numeric) optional map extent. theme_plot (theme) ggplot2 theme object.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/ggrid_here.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Static Visualization of Richness and Trait Maps — ggrid_here","text":"ggplot object. grid multiple layers, displayed using facet_wrap.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/ggrid_here.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Static Visualization of Richness and Trait Maps — ggrid_here","text":"","code":"# Load example data data(\"occ_flagged\", package = \"RuHere\")  # Simple richness map r_records <- richness_here(occ_flagged, summary = \"records\", res = 2) ggrid_here(r_records)   # Multi-layer map (e.g., density of specific flags) # Let's see where 'florabr' and 'duplicated' flags are concentrated r_flags <- richness_here(occ_flagged, summary = \"records\",                          field = c(\"florabr_flag\", \"iucn_flag\"),                          fun = function(x, ...) sum(!x, na.rm = TRUE), res = 2) ggrid_here(r_flags)"},{"path":"https://wevertonbio.github.io/RuHere/reference/import_gbif.html","id":null,"dir":"Reference","previous_headings":"","what":"Import a download requested from GBIF — import_gbif","title":"Import a download requested from GBIF — import_gbif","text":"function imports dataset downloaded GBIF using request key generated request_gbif() function. optionally allows saving imported occurrences disk CSV GZIP format.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/import_gbif.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Import a download requested from GBIF — import_gbif","text":"","code":"import_gbif(   request_key,   write_file = FALSE,   output_dir = NULL,   file.format = \"gz\",   select_columns = TRUE,   columns_to_import = NULL,   overwrite = FALSE,   ... )"},{"path":"https://wevertonbio.github.io/RuHere/reference/import_gbif.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Import a download requested from GBIF — import_gbif","text":"request_key object class 'request_key' returned request_gbif() function. write_file whether save downloaded occurrences disk. Default FALSE. TRUE, must specify output_dir. output_dir (character) directory save data downloaded GBIF. applicable write_file = TRUE. Default NULL. file.format (character) format save file. Options available 'csv' (comma-separated values) 'gz' (compressed GZIP). applicable write_file = TRUE. Default 'gz'. select_columns (logical) whether import specific columns (TRUE) columns (FALSE) occurrence table. Default TRUE. columns_to_import (character) vector column names import. Default NULL, meaning import column names specified RuHere::gbif_columns data. overwrite (logical) whether overwrite file 'output_dir' already exists. Default FALSE. ... arguments passed rgbif::occ_download_import().","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/import_gbif.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Import a download requested from GBIF — import_gbif","text":"data frame containing GBIF occurrence records. write_file = TRUE, function also saves dataset disk specified format.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/import_gbif.html","id":"note","dir":"Reference","previous_headings":"","what":"Note","title":"Import a download requested from GBIF — import_gbif","text":"function requires active internet connection.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/import_gbif.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Import a download requested from GBIF — import_gbif","text":"","code":"if (FALSE) { # \\dontrun{ # Prepare data to request GBIF download gbif_prepared <- prepare_gbif_download(species = \"Araucaria angustifolia\") # Submit a request to download occurrences gbif_requested <- request_gbif(gbif_info = gbif_prepared) # Check progress rgbif::occ_download_wait(gbif_requested) # After succeeded, import data occ_gbif <- import_gbif(request_key = gbif_requested) } # }"},{"path":"https://wevertonbio.github.io/RuHere/reference/iucn_here.html","id":null,"dir":"Reference","previous_headings":"","what":"Download species distribution information from IUCN — iucn_here","title":"Download species distribution information from IUCN — iucn_here","text":"function downloads information species distributions IUCN Red List, required filtering occurrence records using specialists' information via flag_iucn() function.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/iucn_here.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Download species distribution information from IUCN — iucn_here","text":"","code":"iucn_here(   data_dir,   species,   synonyms = NULL,   iucn_credential = NULL,   overwrite = FALSE,   progress_bar = FALSE,   verbose = FALSE,   return_data = TRUE )"},{"path":"https://wevertonbio.github.io/RuHere/reference/iucn_here.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Download species distribution information from IUCN — iucn_here","text":"data_dir (character) directory save data downloaded IUCN. species (character) vector species names retrieve distribution information. synonyms (data.frame) optional data.frame containing synonyms target species. first column must contain target species names, second column corresponding synonyms. Default NULL. See details information. iucn_credential (character) IUCN API key. Default NULL, case function attempt read API key R environment. can set advance using set_iucn_credentials() function. overwrite (logical) whether overwrite existing files. Default FALSE. progress_bar (logical) whether display progress bar processing. TRUE, 'pbapply' package must installed. Default FALSE. verbose (logical) whether display progress messages. Default FALSE. return_data (logical) whether return data frame containing species distribution information downloaded IUCN. Default TRUE.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/iucn_here.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Download species distribution information from IUCN — iucn_here","text":"message indicating data successfully saved directory specified data_dir. return_data = TRUE, function additionally returns data frame containing species distribution information retrieved IUCN.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/iucn_here.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Download species distribution information from IUCN — iucn_here","text":"function uses rredlist::rl_species() function retrieve distribution data IUCN Red List. data include information country regional levels, following World Geographical Scheme Recording Plant Distributions (WGSRPD) — applicable plants animals. Unfortunately, range polygons available https://www.iucnredlist.org/resources/spatial-data-download accessed automatically. taxonomic information IUCN may outdated, can optionally provide table synonyms broaden search. synonyms data.frame accepted species first column synonyms second. See RuHere::synonys example. function also downloads WGSRPD map used represent distribution regions.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/iucn_here.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Download species distribution information from IUCN — iucn_here","text":"","code":"if (FALSE) { # \\dontrun{ # Define a directory to save the data data_dir <- tempdir() # Here, a temporary directory  # Download species distribution information from IUCN iucn_here(data_dir = data_dir, species = \"Araucaria angustifolia\") } # }"},{"path":"https://wevertonbio.github.io/RuHere/reference/map_here.html","id":null,"dir":"Reference","previous_headings":"","what":"Interactive Visualization of Occurrence Flags with mapview — map_here","title":"Interactive Visualization of Occurrence Flags with mapview — map_here","text":"function creates interactive map occurrence records using mapview, visually highlighting flags. tool helps users explore records flagged one validation functions inspect directly map.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/map_here.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Interactive Visualization of Occurrence Flags with mapview — map_here","text":"","code":"map_here(   occ,   species = NULL,   long = \"decimalLongitude\",   lat = \"decimalLatitude\",   flags = \"all\",   additional_flags = NULL,   names_additional_flags = NULL,   col_additional_flags = NULL,   show_no_flagged = TRUE,   cex = 6,   lwd = 2,   col_points = NULL,   label = NULL,   ... )"},{"path":"https://wevertonbio.github.io/RuHere/reference/map_here.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Interactive Visualization of Occurrence Flags with mapview — map_here","text":"occ (data.frame data.table) dataset containing occurrence records processed one flagging functions. See Details available flag types. species (character) name species subset plot. Default NULL, meaning records species plotted. long (character) name column occ contains longitude values. Default \"decimalLongitude\". lat (character) name column occ contains latitude values. Default \"decimalLatitude\". flags (character) flags used coloring records. Use \"\" display available flags. See Details options. Default \"\". additional_flags (character) optional named character vector names additional logical columns used flags. Default NULL. names_additional_flags (character) optional different name flag provided additional_flags shown map. applicable additional_flags NULL. col_additional_flags (character) additional_flags provided, color records flagged column. Obligatory additional_flags NULL. show_no_flagged (logical) whether display records receive flag.Default TRUE. cex (numeric) point size plotting occurrences. Default 6. lwd (numeric) line width point borders. Default 2. col_points (character) named vector assigning colors flag. NULL, default colors internal object RuHere::flag_colors() used. label (character) column name occ use mouseover label. Default NULL, case record's row number displayed. ... additional arguments passed mapview::mapview().","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/map_here.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Interactive Visualization of Occurrence Flags with mapview — map_here","text":"interactive mapview object displaying flagged optionally unflagged occurrence records.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/map_here.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Interactive Visualization of Occurrence Flags with mapview — map_here","text":"following flags available: correct_country, correct_state, cultivated, fossil, inaturalist, faunabr, florabr, wcvp, iucn, duplicated, thin_geo, thin_env, .val, .equ, .zer, .cap, .cen, .sea, .urb, .otl, .gbf, .inst, .aohi. flags typically generated functions RuHere CoordinateCleanerworkflow identify potential data-quality issues occurrence records. Users may also supply additional logical columns using additional_flags, optionally providing alternative display names (names_additional_flags) colors (col_additional_flags).","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/map_here.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Interactive Visualization of Occurrence Flags with mapview — map_here","text":"","code":"if (FALSE) { # \\dontrun{ # Load example data data(\"occ_flagged\", package = \"RuHere\") # Visualize flags interactively map_here(occ = occ_flagged, label = \"record_id\") } # }"},{"path":"https://wevertonbio.github.io/RuHere/reference/moranfast.html","id":null,"dir":"Reference","previous_headings":"","what":"Fast Moran's I Autocorrelation Index — moranfast","title":"Fast Moran's I Autocorrelation Index — moranfast","text":"function computes Moran's autocorrelation coefficient numeric vector x using matrix weights. method follows Gittleman Kot (1990). function implementation ape::Moran.(), rewritten C++ substantially faster memory-efficient.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/moranfast.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Fast Moran's I Autocorrelation Index — moranfast","text":"","code":"moranfast(   x,   weight,   na_rm = TRUE,   scaled = FALSE,   alternative = c(\"two.sided\") )"},{"path":"https://wevertonbio.github.io/RuHere/reference/moranfast.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Fast Moran's I Autocorrelation Index — moranfast","text":"x (numeric) numeric vector (e.g., environmental values extracted occurrence records). weight (matrix) matrix spatial weights (e.g., distance inverse-distance matrix). number rows must equal length x. na_rm (logical) whether remove missing values x. Default TRUE. scaled (logical) whether scale Moran's ranges –1 +1. Default TRUE. alternative (character) alternative hypothesis tested null hypothesis autocorrelation. Must one \"two.sided\", \"less\", \"greater\". Default \"two.sided\".","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/moranfast.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Fast Moran's I Autocorrelation Index — moranfast","text":"list following components: observed – observed Moran's . expected – expected value Moran's null hypothesis. sd – standard deviation Moran's null hypothesis. p.value – p-value test based chosen alternative.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/moranfast.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Fast Moran's I Autocorrelation Index — moranfast","text":"Gittleman, J. L., & Kot, M. (1990). Adaptation: statistics null model estimating phylogenetic effects. Systematic Zoology, 39(3), 227–241.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/moranfast.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Fast Moran's I Autocorrelation Index — moranfast","text":"","code":"# Load example data data(\"occurrences\", package = \"RuHere\") # Filter occurrences of Araucaria occ <- occurrences[occurrences$species == \"Araucaria angustifolia\", ] # Load example of raster variables data(\"worldclim\", package = \"RuHere\") # Unwrap Packed raster r <- terra::unwrap(worldclim) # Extract values for bio_1 bio_1 <- terra::extract(r$bio_1,                         occ[, c(\"decimalLongitude\", \"decimalLatitude\")],                         ID = FALSE, xy = TRUE) #Remove NAs bio_1 <- na.omit(bio_1) # Convert values to numeric v <- as.numeric(bio_1$bio_1) # Compute geographic distance matrix d <- fields::rdist.earth(x1 = as.matrix(bio_1[, c(\"x\", \"y\")]), miles = FALSE) # Inverse-distance weights d <- 1/d # Fill diagonal with 0 diag(d) <- 0 # Remove finite values d[is.infinite(d)] <- 0 # Compute Moran's I m <- moranfast(x = v, weight = d, scale = TRUE) # Print results m #> $observed #> [1] 0.1940452 #>  #> $expected #> [1] -0.00128866 #>  #> $sd #> [1] 0.009968915 #>  #> $p.value #> [1] 0 #>"},{"path":"https://wevertonbio.github.io/RuHere/reference/occ_bien.html","id":null,"dir":"Reference","previous_headings":"","what":"Occurrence records of Yellow Trumpet Tree from BIEN — occ_bien","title":"Occurrence records of Yellow Trumpet Tree from BIEN — occ_bien","text":"cleaned dataset occurrence records Yellow Trumpet Tree (Handroanthus serratifolius) retrieved BIEN database. raw data downloaded using get_bien() dataset subsequently processed package’s internal flagging workflow (flag_duplicates() remove_flagged()) remove duplicated records.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/occ_bien.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Occurrence records of Yellow Trumpet Tree from BIEN — occ_bien","text":"","code":"occ_bien"},{"path":"https://wevertonbio.github.io/RuHere/reference/occ_bien.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Occurrence records of Yellow Trumpet Tree from BIEN — occ_bien","text":"data frame containing spatial coordinates, taxonomic information, metadata returned BIEN, cleaning. Columns include (may limited ): scrubbed_species_binomial: Cleaned species name longitude, latitude: Geographic coordinates country, state_province, political boundary fields","code":""},{"path":[]},{"path":"https://wevertonbio.github.io/RuHere/reference/occ_bien.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Occurrence records of Yellow Trumpet Tree from BIEN — occ_bien","text":"","code":"# View dataset head(occ_bien) #>    scrubbed_species_binomial native_status               native_status_reason #> 1 Handroanthus serratifolius             N Native to region, as per checklist #> 2 Handroanthus serratifolius             N Native to region, as per checklist #> 3 Handroanthus serratifolius             N Native to region, as per checklist #> 4 Handroanthus serratifolius             N Native to region, as per checklist #> 5 Handroanthus serratifolius             N Native to region, as per checklist #> 6 Handroanthus serratifolius             N Native to region, as per checklist #>   native_status_sources is_introduced native_status_country #> 1   conosur, flbr, powo             0                     N #> 2        powo, tropicos             0                     N #> 3                  powo             0                     N #> 4   conosur, flbr, powo             0                     N #> 5   conosur, flbr, powo             0                     N #> 6                  powo             0                     N #>   native_status_state_province native_status_county_parish  country #> 1                            N                        <NA>   Brazil #> 2                         <NA>                        <NA>  Bolivia #> 3                         <NA>                        <NA> Colombia #> 4                            N                        <NA>   Brazil #> 5                            N                        <NA>   Brazil #> 6                         <NA>                        <NA>     Peru #>   state_province county                                            locality #> 1       Amazonas   <NA> Reserva Florestal Ducke, Manaus-Itacoatiara, km 26. #> 2           <NA>   <NA>                                                <NA> #> 3          Cesar   <NA>                                         Campoalegre #> 4      Tocantins   <NA>                Faz. São Judas - Porto Nacional - TO #> 5          Goias   <NA>                                            Luziânia #> 6           <NA>   <NA>                                        Puerto Ocopa #>   elevation_m  latitude longitude date_collected datasource #> 1          NA  -2.88000 -59.97000     1995-08-04       GBIF #> 2          NA -14.55278 -68.68686           <NA>     traits #> 3          NA  10.11333 -73.78639     2017-09-04       GBIF #> 4          NA -10.80000 -48.41667     2016-08-29       GBIF #> 5          NA -16.25250 -47.95030           <NA>       GBIF #> 6         600 -11.22430 -74.41720           <NA>    dryflor #>                                                             dataset #> 1                                                                US #> 2                                                            traits #> 3 Patrimonio Natural Fondo para la Biodiversidad y Áreas Protegidas #> 4                                                              UEFS #> 5                                                               UnB #> 6                                                           dryflor #>                                                           dataowner #> 1                                                                US #> 2                                                            traits #> 3 Patrimonio Natural Fondo para la Biodiversidad y Áreas Protegidas #> 4                                                              UEFS #> 5                                                               UnB #> 6                                                           dryflor #>                                         custodial_institution_codes #> 1                                                                US #> 2                                                              <NA> #> 3 Patrimonio Natural Fondo para la Biodiversidad y Áreas Protegidas #> 4                                                              UEFS #> 5                                                               UnB #> 6                                                              <NA> #>   collection_code datasource_id catalog_number #> 1          Botany          4885     2284210913 #> 2            <NA>            NA        1544595 #> 3            <NA>          1516     1829119958 #> 4           HUEFS          1909     1837839064 #> 5              UB          3029     1087243702 #> 6            <NA>            NA           <NA> #>                                recorded_by record_number identified_by #> 1 M. Costa, P. A. Assunçao & E. C. Pereira           333          <NA> #> 2                                     <NA>          <NA>          <NA> #> 3           Cesar Barbosa | Linda J. Ortíz          <NA>          <NA> #> 4                          Chagas, D.B.das           132          <NA> #> 5                                Incógnito         12149    Gentry, AH #> 6                                     <NA>          <NA>          <NA> #>   date_identified identification_remarks is_cultivated_observation #> 1            <NA>                   <NA>                        NA #> 2            <NA>                   <NA>                        NA #> 3            <NA>                   <NA>                        NA #> 4            <NA>                   <NA>                        NA #> 5            <NA>                   <NA>                        NA #> 6            <NA>                   <NA>                        NA #>   is_cultivated_in_region is_location_cultivated  observation_type #> 1                       0                     NA          specimen #> 2                       0                     NA  trait occurrence #> 3                       0                     NA human observation #> 4                       0                     NA          specimen #> 5                       0                     NA          specimen #> 6                       0                     NA        occurrence  # Number of records nrow(occ_bien) #> [1] 1791"},{"path":"https://wevertonbio.github.io/RuHere/reference/occ_flagged.html","id":null,"dir":"Reference","previous_headings":"","what":"Flagged occurrence records of Araucaria angustifolia — occ_flagged","title":"Flagged occurrence records of Araucaria angustifolia — occ_flagged","text":"dataset containing occurrence records Araucaria angustifolia applying several package’s flagging data-quality assessment functions.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/occ_flagged.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Flagged occurrence records of Araucaria angustifolia — occ_flagged","text":"","code":"occ_flagged"},{"path":"https://wevertonbio.github.io/RuHere/reference/occ_flagged.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Flagged occurrence records of Araucaria angustifolia — occ_flagged","text":"data frame row corresponds georeferenced occurrence . angustifolia.","code":""},{"path":[]},{"path":"https://wevertonbio.github.io/RuHere/reference/occ_flagged.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Flagged occurrence records of Araucaria angustifolia — occ_flagged","text":"","code":"# First rows head(occ_flagged) #> # A tibble: 6 × 28 #>   species       decimalLongitude decimalLatitude states biome endemism inside_br #>   <chr>                    <dbl>           <dbl> <chr>  <chr> <chr>    <lgl>     #> 1 Araucaria an…            -49.3           -25.4 MG;MS… Atla… Non-end… NA        #> 2 Araucaria an…            -42.5           -22.3 MG;MS… Atla… Non-end… NA        #> 3 Araucaria an…            -51.5           -28.3 MG;MS… Atla… Non-end… NA        #> 4 Araucaria an…            -54.0           -26.5 MG;MS… Atla… Non-end… NA        #> 5 Araucaria an…            -51.2           -29.7 MG;MS… Atla… Non-end… NA        #> 6 Araucaria an…            -52.0           -29.1 MG;MS… Atla… Non-end… NA        #> # ℹ 21 more variables: inside_state <lgl>, inside_biome <lgl>, record_id <chr>, #> #   country <chr>, country_suggested <chr>, correct_country <lgl>, #> #   stateProvince <chr>, state_suggested <chr>, correct_state <lgl>, #> #   year <dbl>, basisOfRecord <chr>, occurrenceRemarks <chr>, habitat <chr>, #> #   datasetName <chr>, data_source <chr>, florabr_flag <lgl>, wcvp_flag <lgl>, #> #   iucn_flag <lgl>, cultivated_flag <lgl>, inaturalist_flag <lgl>, #> #   duplicated_flag <lgl>  # Count flagged vs. unflagged records table(occ_flagged$correct_country) #>  #> FALSE  TRUE  #>     6  2610"},{"path":"https://wevertonbio.github.io/RuHere/reference/occ_gbif.html","id":null,"dir":"Reference","previous_headings":"","what":"Occurrence records of Araucaria angustifolia from GBIF — occ_gbif","title":"Occurrence records of Araucaria angustifolia from GBIF — occ_gbif","text":"cleaned dataset occurrence records Araucaria angustifolia (Parana pine) retrieved GBIF. Records downloaded using package’s GBIF workflow (prepare_gbif_download(), request_gbif(), import_gbif()), cleaned using internal flagging workflow (duplicate detection removal).","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/occ_gbif.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Occurrence records of Araucaria angustifolia from GBIF — occ_gbif","text":"","code":"occ_gbif"},{"path":"https://wevertonbio.github.io/RuHere/reference/occ_gbif.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Occurrence records of Araucaria angustifolia from GBIF — occ_gbif","text":"data frame containing georeferenced GBIF occurrence records . angustifolia cleaning steps.","code":""},{"path":[]},{"path":"https://wevertonbio.github.io/RuHere/reference/occ_gbif.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Occurrence records of Araucaria angustifolia from GBIF — occ_gbif","text":"","code":"# Preview dataset head(occ_gbif) #> # A tibble: 6 × 21 #>   acceptedScientificName           collectionCode catalogNumber decimalLongitude #>   <chr>                            <chr>          <chr>                    <dbl> #> 1 Araucaria angustifolia (Bertol.… ALTA-VP        74703                    -52.8 #> 2 Araucaria angustifolia (Bertol.… HCF            43511                    -52.3 #> 3 Araucaria angustifolia (Bertol.… Observations   326380478                -48.0 #> 4 Araucaria angustifolia (Bertol.… Observations   327335877                -49.2 #> 5 Araucaria angustifolia (Bertol.… Observations   326095249                -49.0 #> 6 Araucaria angustifolia (Bertol.… Observations   326823098                -49.0 #> # ℹ 17 more variables: decimalLatitude <dbl>, #> #   coordinateUncertaintyInMeters <dbl>, elevation <dbl>, countryCode <chr>, #> #   stateProvince <chr>, municipality <chr>, locality <chr>, year <int>, #> #   eventDate <chr>, recordedBy <chr>, identifiedBy <chr>, basisOfRecord <chr>, #> #   occurrenceRemarks <chr>, habitat <chr>, datasetName <chr>, #> #   datasetKey <chr>, speciesKey <int>  # Number of cleaned records nrow(occ_gbif) #> [1] 2989"},{"path":"https://wevertonbio.github.io/RuHere/reference/occ_idig.html","id":null,"dir":"Reference","previous_headings":"","what":"Occurrence records of azure jay from iDigBio — occ_idig","title":"Occurrence records of azure jay from iDigBio — occ_idig","text":"cleaned dataset occurrence records azure jay (Cyanocorax caeruleus) retrieved iDigBio using get_idigbio(). Records cleaned using package's internal duplicate-flagging workflow.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/occ_idig.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Occurrence records of azure jay from iDigBio — occ_idig","text":"","code":"occ_idig"},{"path":"https://wevertonbio.github.io/RuHere/reference/occ_idig.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Occurrence records of azure jay from iDigBio — occ_idig","text":"data frame containing georeferenced iDigBio occurrence records C. caeruleus cleaning steps.","code":""},{"path":[]},{"path":"https://wevertonbio.github.io/RuHere/reference/occ_idig.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Occurrence records of azure jay from iDigBio — occ_idig","text":"","code":"# First rows head(occ_idig) #>   UberH3 aggs associatedsequences barcodevalue      basisofrecord bed #> 1     NA   NA                NULL           NA machineobservation  NA #> 2     NA   NA                NULL           NA  preservedspecimen  NA #> 3     NA   NA                NULL           NA  preservedspecimen  NA #> 4     NA   NA                NULL           NA  preservedspecimen  NA #> 5     NA   NA                NULL           NA machineobservation  NA #> 6     NA   NA                NULL           NA  preservedspecimen  NA #>          canonicalname catalognumber class  collectioncode #> 1 cyanocorax caeruleus       0005478  aves            fnjv #> 2 cyanocorax caeruleus         29487  aves           birds #> 3 cyanocorax caeruleus         52342  aves           birds #> 4 cyanocorax caeruleus     12.crv.34  aves collection maës #> 5 cyanocorax caeruleus       0050394  aves            fnjv #> 6 cyanocorax caeruleus        178589  aves             orn #>                                                                              collectionid #> 1                                                         https://specieslink.net/col/238 #> 2                                                                                    <NA> #> 3 https://scientific-collections.gbif.org/collection/bf635c34-0569-4fb7-ad9c-91d821bac9e4 #> 4                                                                                  1929.1 #> 5                                                         https://specieslink.net/col/238 #> 6                                                                                    <NA> #>   collectionname                     collector commonname commonnames #> 1             NA alexandre luis padovan aleixo       <NA>        NULL #> 2             NA                          <NA>       <NA>        NULL #> 3             NA                partridge, w h       <NA>        NULL #> 4             NA               sans collecteur       <NA>        NULL #> 5             NA                luiz dos anjos       <NA>        NULL #> 6             NA                       camargo       <NA>        NULL #>       continent coordinateuncertainty   country countrycode county #> 1 south america                    NA    brazil         bra   <NA> #> 2 south america                  1469  paraguay         pry   <NA> #> 3 south america                    NA argentina         arg   <NA> #> 4          <NA>                    NA      <NA>        <NA>   <NA> #> 5 south america                    NA    brazil         bra   <NA> #> 6 south america                  3036    brazil         bra   <NA> #>                              datasetid             datecollected #> 1 7ddf754f-d193-4cc9-b351-99906754a03b 1995-03-08T00:00:00+00:00 #> 2 7ddf754f-d193-4cc9-b351-99906754a03b 1901-08-23T00:00:00+00:00 #> 3 7ddf754f-d193-4cc9-b351-99906754a03b 1959-08-25T00:00:00+00:00 #> 4                                 <NA> 1909-06-25T00:00:00+00:00 #> 5 7ddf754f-d193-4cc9-b351-99906754a03b 2002-12-26T00:00:00+00:00 #> 6 7ddf754f-d193-4cc9-b351-99906754a03b 1934-10-10T00:00:00+00:00 #>                       datemodified       dqs earliestageorloweststage #> 1 2025-05-23T18:36:26.002398+00:00 0.2318841                       NA #> 2 2025-05-23T18:13:47.213183+00:00 0.2463768                       NA #> 3 2025-07-24T17:48:49.086870+00:00 0.3188406                       NA #> 4 2017-02-20T09:01:11.593455+00:00 0.2463768                       NA #> 5 2025-05-23T18:36:26.002398+00:00 0.2463768                       NA #> 6 2025-10-29T16:28:32.411713+00:00 0.2898551                       NA #>   earliesteonorlowesteonothem earliestepochorlowestseries #> 1                          NA                        <NA> #> 2                          NA                        <NA> #> 3                          NA                        <NA> #> 4                          NA                        <NA> #> 5                          NA                        <NA> #> 6                          NA                        <NA> #>   earliesteraorlowesterathem earliestperiodorlowestsystem #> 1                         NA                         <NA> #> 2                         NA                         <NA> #> 3                         NA                         <NA> #> 4                         NA                         <NA> #> 5                         NA                         <NA> #> 6                         NA                         <NA> #>                                       etag  eventdate   family fieldnumber #> 1 d4cd02bb4a594a94541a6af6dcad819a10015103 1995-03-08 corvidae        <NA> #> 2 b6bf9b574b4c9b53e4de4f85a713b1c9cbb8f1c6 1901-08-23 corvidae        <NA> #> 3 c886e564e36d73ce63fc051b52c121662d7b8c96 1959-08-25 corvidae        <NA> #> 4 cfac449459e9f92f607d77141bea36968ed2da8d  1909-6-25 corvidae        <NA> #> 5 8a84b83ceee954cc5f0a5a792f5904abf49312db 2002-12-26 corvidae        <NA> #> 6 cd336080ae997a693fc65558fca43abd9f1311f6 1934-10-10 corvidae        <NA> #>                                                                                                                                                                                                                                                                                                                                                                            flags #> 1     dwc_taxonrank_added, dwc_multimedia_added, gbif_reference_added, idigbio_isocountrycode_added, gbif_canonicalname_added, dwc_taxonomicstatus_added, gbif_genericname_added, dwc_datasetid_added, dwc_continent_added, dwc_parentnameusageid_added, dwc_scientificnameauthorship_added, dwc_taxonid_added, gbif_vernacularname_added, gbif_taxon_corrected, dwc_order_added #> 2                                        dwc_scientificnameauthorship_added, dwc_taxonrank_replaced, dwc_taxonomicstatus_added, gbif_genericname_added, dwc_datasetid_added, gbif_taxon_corrected, dwc_multimedia_added, dwc_taxonid_added, idigbio_isocountrycode_added, gbif_vernacularname_added, gbif_canonicalname_added, gbif_reference_added, dwc_parentnameusageid_added #> 3                geopoint_low_precision, dwc_multimedia_added, dwc_taxonrank_replaced, dwc_taxonomicstatus_added, gbif_genericname_added, dwc_datasetid_added, gbif_taxon_corrected, dwc_parentnameusageid_added, dwc_scientificnameauthorship_added, dwc_taxonid_added, idigbio_isocountrycode_added, gbif_vernacularname_added, gbif_canonicalname_added, gbif_reference_added #> 4                                                                                                                                                                                                                                                                                                                                                         geopoint_datum_missing #> 5     dwc_taxonrank_added, dwc_multimedia_added, gbif_reference_added, dwc_scientificnameauthorship_added, idigbio_isocountrycode_added, gbif_canonicalname_added, dwc_taxonomicstatus_added, gbif_genericname_added, dwc_datasetid_added, dwc_continent_added, dwc_parentnameusageid_added, dwc_taxonid_added, gbif_vernacularname_added, gbif_taxon_corrected, dwc_order_added #> 6 geopoint_datum_error, rev_geocode_eez, dwc_taxonrank_added, gbif_reference_added, gbif_genericname_added, dwc_datasetid_added, dwc_scientificnameauthorship_replaced, gbif_vernacularname_added, dwc_parentnameusageid_added, idigbio_isocountrycode_added, dwc_taxonomicstatus_added, dwc_taxonid_added, dwc_multimedia_added, gbif_taxon_corrected, gbif_canonicalname_added #>   formation      genus geologicalcontextid       lon       lat group hasImage #> 1        NA cyanocorax                  NA        NA        NA    NA    FALSE #> 2        NA cyanocorax                  NA -56.95254 -25.66729    NA    FALSE #> 3        NA cyanocorax                  NA -53.90000 -26.47000    NA    FALSE #> 4        NA cyanocorax                  NA -46.63639 -23.54770    NA    FALSE #> 5        NA cyanocorax                  NA -51.33667 -23.76056    NA    FALSE #> 6        NA cyanocorax                  NA -47.95000 -25.01667    NA    FALSE #>   hasMedia #> 1    FALSE #> 2    FALSE #> 3    FALSE #> 4    FALSE #> 5    FALSE #> 6    FALSE #>                                                                                        highertaxon #> 1                                                                                             <NA> #> 2                                                                                             <NA> #> 3                               animalia | chordata | aves | passeriformes | corvidae | cyanocorax #> 4                                                                                             <NA> #> 5                                                                                             <NA> #> 6 animalia chordata vertebrata aves neornithes passeriformes oscines corvidae cyanocorax caeruleus #>   highestbiostratigraphiczone individualcount infraspecificepithet #> 1                          NA               1                   NA #> 2                          NA              NA                   NA #> 3                          NA              NA                   NA #> 4                          NA               1                   NA #> 5                          NA              NA                   NA #> 6                          NA               1                   NA #>   institutioncode #> 1         unicamp #> 2            ummz #> 3            lacm #> 4            boum #> 5         unicamp #> 6             mcz #>                                                                              institutionid #> 1                                                                                     <NA> #> 2                                                                                     <NA> #> 3 https://scientific-collections.gbif.org/institution/2fc908ba-e775-49e2-bffe-6b9041c3b70f #> 4                                                                                     <NA> #> 5                                                                                     <NA> #> 6                                                     b4640710-8e03-11d8-b956-b8a03c50a862 #>   institutionname  kingdom latestageorhigheststage latesteonorhighesteonothem #> 1              NA animalia                      NA                         NA #> 2              NA animalia                      NA                         NA #> 3              NA animalia                      NA                         NA #> 4              NA animalia                      NA                         NA #> 5              NA animalia                      NA                         NA #> 6              NA animalia                      NA                         NA #>   latestepochorhighestseries latesteraorhighesterathem #> 1                         NA                        NA #> 2                         NA                        NA #> 3                         NA                        NA #> 4                         NA                        NA #> 5                         NA                        NA #> 6                         NA                        NA #>   latestperiodorhighestsystem lithostratigraphicterms #> 1                          NA                      NA #> 2                          NA                      NA #> 3                          NA                      NA #> 4                          NA                      NA #> 5                          NA                      NA #> 6                          NA                      NA #>                                                        locality #> 1                                    parque estadual intervales #> 2                                                       sapucay #> 3                                                       tobunas #> 4                                                     sao paulo #> 5 fragmento florestal próximo ao parque estadual mata dos godoy #> 6                                                       cananea #>   lowestbiostratigraphiczone maxdepth maxelevation mediarecords member mindepth #> 1                         NA       NA           NA         NULL     NA       NA #> 2                         NA       NA           NA         NULL     NA       NA #> 3                         NA       NA           NA         NULL     NA       NA #> 4                         NA       NA          760         NULL     NA       NA #> 5                         NA       NA           NA         NULL     NA       NA #> 6                         NA       NA           NA         NULL     NA       NA #>   minelevation municipality                             occurrenceid #> 1           NA  sete barras https://specieslink.net/guid/238/0005478 #> 2           NA         <NA>     b3101421-f924-11e2-b158-782bcb84bc75 #> 3           NA         <NA>     5bf19932-d3e8-46db-b996-53379ca09ca5 #> 4           NA         <NA>                                12.crv.34 #> 5           NA     londrina https://specieslink.net/guid/238/0050394 #> 6           NA         <NA>                           mcz:orn:178589 #>           order   phylum query #> 1 passeriformes chordata    NA #> 2 passeriformes chordata    NA #> 3 passeriformes chordata    NA #> 4 passeriformes chordata    NA #> 5 passeriformes chordata    NA #> 6 passeriformes chordata    NA #>                                                                                                                                        recordids #> 1                                                                 5caa5b0d-24b7-4c69-9c7b-089f343b7efc\\\\https://specieslink.net/guid/238/0005478 #> 2 4a32531f-1580-499f-bd48-5b0ef4cc5722\\\\urn:catalog:ummz:birds:29487, 4a32531f-1580-499f-bd48-5b0ef4cc5722\\\\b3101421-f924-11e2-b158-782bcb84bc75 #> 3                                                                     2d853a6d-50ec-4931-8e91-48fc2491fdee\\\\5bf19932-d3e8-46db-b996-53379ca09ca5 #> 4                                                                                                3172ee72-4b10-4d6b-b4b3-f3319b25c60d\\\\12.crv.34 #> 5                                                                 5caa5b0d-24b7-4c69-9c7b-089f343b7efc\\\\https://specieslink.net/guid/238/0050394 #> 6                                                                                           271a9ce9-c6d3-4b63-a722-cb0adc48863f\\\\mcz:orn:178589 #>   recordnumber                            recordset       scientificname size #> 1         <NA> 5caa5b0d-24b7-4c69-9c7b-089f343b7efc Cyanocorax caeruleus   NA #> 2         <NA> 4a32531f-1580-499f-bd48-5b0ef4cc5722 Cyanocorax caeruleus   NA #> 3        19784 2d853a6d-50ec-4931-8e91-48fc2491fdee Cyanocorax caeruleus   NA #> 4         <NA> 3172ee72-4b10-4d6b-b4b3-f3319b25c60d Cyanocorax caeruleus   NA #> 5         <NA> 5caa5b0d-24b7-4c69-9c7b-089f343b7efc Cyanocorax caeruleus   NA #> 6         <NA> 271a9ce9-c6d3-4b63-a722-cb0adc48863f Cyanocorax caeruleus   NA #>   specificepithet startdayofyear stateprovince taxonid taxonomicstatus #> 1       caeruleus             67     são paulo 2482560        accepted #> 2       caeruleus            235     paraguari 2482560        accepted #> 3       caeruleus            237 misiones prov 2482560        accepted #> 4       caeruleus            176          <NA> 2482560        accepted #> 5       caeruleus            360        paraná 2482560        accepted #> 6       caeruleus            283     sao paulo 2482560        accepted #>   taxonrank typestatus                                 uuid verbatimeventdate #> 1   species       <NA> 000d87f1-db3e-4784-91d2-91aec34abf85              <NA> #> 2   species       <NA> 02ffadca-502b-469f-8d4a-299a7d8e91a5              <NA> #> 3   species       <NA> 0408655e-5896-4e2e-8507-becfd903a0e1       25 aug 1959 #> 4   species       <NA> 0538e125-8fa4-412b-89c8-a44f38f46731     1909, 25 juin #> 5   species       <NA> 0ccf5483-4c82-4214-aa7b-3e2523fddde6              <NA> #> 6   species       <NA> 0d86f91a-6916-4432-93b1-d18c36cf015d        10/10/1934 #>                                            verbatimlocality version waterbody #> 1                                                      <NA>      NA      <NA> #> 2                                                      <NA>      NA      <NA> #> 3 | south america | argentina | misiones prov |  |  tobunas      NA      <NA> #> 4                                                      <NA>      NA      <NA> #> 5                                                      <NA>      NA      <NA> #> 6                 south america, brazil, sao paulo, cananea      NA      <NA>  # Number of cleaned records nrow(occ_idig) #> [1] 33"},{"path":"https://wevertonbio.github.io/RuHere/reference/occ_splink.html","id":null,"dir":"Reference","previous_headings":"","what":"Occurrence records of azure jay from SpeciesLink — occ_splink","title":"Occurrence records of azure jay from SpeciesLink — occ_splink","text":"cleaned dataset occurrence records azure jay (Cyanocorax caeruleus) retrieved SpeciesLink using get_specieslink(). Records cleaned using package's internal duplicate-flagging workflow.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/occ_splink.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Occurrence records of azure jay from SpeciesLink — occ_splink","text":"","code":"occ_splink"},{"path":"https://wevertonbio.github.io/RuHere/reference/occ_splink.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Occurrence records of azure jay from SpeciesLink — occ_splink","text":"data frame containing georeferenced SpeciesLink occurrence records C. caeruleus cleaning steps.","code":""},{"path":[]},{"path":"https://wevertonbio.github.io/RuHere/reference/occ_splink.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Occurrence records of azure jay from SpeciesLink — occ_splink","text":"","code":"# First rows head(occ_splink) #>         scientificname collectioncode catalognumber decimallongitude #> 1 Cyanocorax caeruleus          CSUEL       LDA 171                0 #> 2 Cyanocorax caeruleus          CSUEL       LDA 218                0 #> 3 Cyanocorax caeruleus          CSUEL       LDA 114                0 #> 4 Cyanocorax caeruleus          CSUEL       LDA 145                0 #> 5 Cyanocorax caeruleus          CSUEL       LDA 148                0 #> 6 Cyanocorax caeruleus          CSUEL       LDA 151                0 #>   decimallatitude maximumelevationinmeters country stateprovince   county #> 1               0                     <NA>    <NA>          <NA>     <NA> #> 2               0                     <NA>    <NA>          <NA>     <NA> #> 3               0                     <NA>    <NA>            PR Palmeira #> 4               0                     <NA>    <NA>          <NA>     <NA> #> 5               0                     <NA>    <NA>            PR Palmeira #> 6               0                     <NA>    <NA>            PR Palmeira #>                             locality yearcollected recordedby identifiedby #> 1                               <NA>          1986       <NA>         <NA> #> 2                               <NA>          1986       <NA>         <NA> #> 3 Fazenda Santa Rita - Palmeira - PR          1986       <NA>         <NA> #> 4                               <NA>          1986       <NA>         <NA> #> 5 Fazenda Santa Rita - Palmeira - PR          1986       <NA>         <NA> #> 6 Fazenda Santa Rita - Palmeira - PR          1986       <NA>         <NA> #>   basisofrecord #> 1          <NA> #> 2          <NA> #> 3          <NA> #> 4          <NA> #> 5          <NA> #> 6          <NA> #>                                                                                                                                                                                                                                                          occurrenceremarks #> 1                                                                                                                                                                               <nO>OBS.: Bel sendo acariciada no pescoço ; gritos de proximidade ; de reconhecimento<\/nO> #> 2                                                                                                                                                                                                                                        <nO>OBS.: Bel ; movimentação<\/nO> #> 3                                                                                                                                               <nO>HABITAT: Floresta de araucária ; estrato médio e superior OBS.: indivíduos adultos próximos do ninho ; espontâneo<\/nO> #> 4                                                                                                                                                   <nO>HABITAT: cativeiro OBS.: a- vocalização de Sara recebendo comida do Michael ; b- soto-voce - Andrew (sozinho)<\/nO> #> 5 <nO>HABITAT: a 100m do ninho OBS.: perseguiam um gavião (provavlemente Buteo magnirostris) ; as gralhas permaneceream em um pinheiro sobre o local onde estava escondido o gavião ; a última sequencia se refere à perseguição do gavião e teve início no momento d<\/nO> #> 6                                                                                                                                                                                                                                                                     <NA>  # Number of cleaned records nrow(occ_splink) #> [1] 361"},{"path":"https://wevertonbio.github.io/RuHere/reference/occurrences.html","id":null,"dir":"Reference","previous_headings":"","what":"Integrated occurrence dataset for three example species — occurrences","title":"Integrated occurrence dataset for three example species — occurrences","text":"harmonized, multi-source occurrence dataset containing cleaned georeferenced records three species: Araucaria angustifolia (Parana pine) Cyanocorax caeruleus (Azure jay) Handroanthus serratifolius (Yellow trumpet tree) Records retrieved GBIF, speciesLink, BIEN, iDigBio, standardized package workflow, merged, cleaned remove duplicates.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/occurrences.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Integrated occurrence dataset for three example species — occurrences","text":"","code":"occurrences"},{"path":"https://wevertonbio.github.io/RuHere/reference/occurrences.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Integrated occurrence dataset for three example species — occurrences","text":"data frame row represents georeferenced occurrence record one three species. Columns correspond standardized output format_columns(), including: species: Cleaned binomial species name decimalLongitude, decimalLatitude: Coordinates year: Year collection/observation Various taxonomic, temporal, locality, metadata fields Source identifiers added format_columns() (e.g., data_source)","code":""},{"path":[]},{"path":"https://wevertonbio.github.io/RuHere/reference/occurrences.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Integrated occurrence dataset for three example species — occurrences","text":"","code":"# Show the first rows head(occurrences) #>   record_id                species catalogNumber decimalLongitude #> 1   gbif_83 Araucaria angustifolia     323502165        -49.26743 #> 2   gbif_85 Araucaria angustifolia     325575408        -42.49838 #> 3   gbif_86 Araucaria angustifolia     325217148        -42.53397 #> 4   gbif_90 Araucaria angustifolia     322837754        -49.66112 #> 5   gbif_91 Araucaria angustifolia     322601546        -46.68649 #> 6   gbif_92 Araucaria angustifolia     276301823        -49.38901 #>   decimalLatitude country  stateProvince locality year     basisOfRecord #> 1       -25.42535      BR         Paraná          2025 HUMAN_OBSERVATION #> 2       -22.30930      BR Rio de Janeiro          2025 HUMAN_OBSERVATION #> 3       -22.06159      BR Rio de Janeiro          2025 HUMAN_OBSERVATION #> 4       -27.18439      BR Santa Catarina          2025 HUMAN_OBSERVATION #> 5       -23.33256      BR      São Paulo          2025 HUMAN_OBSERVATION #> 6       -25.59535      BR         Paraná          2025 HUMAN_OBSERVATION #>   occurrenceRemarks habitat                             datasetName data_source #> 1                           iNaturalist research-grade observations        gbif #> 2                           iNaturalist research-grade observations        gbif #> 3                           iNaturalist research-grade observations        gbif #> 4                           iNaturalist research-grade observations        gbif #> 5                           iNaturalist research-grade observations        gbif #> 6                           iNaturalist research-grade observations        gbif  # Number of occurrences per species table(occurrences$species) #>  #>     Araucaria angustifolia       Cyanocorax caeruleus  #>                        924                       1035  #> Handroanthus serratifolius  #>                       2121"},{"path":"https://wevertonbio.github.io/RuHere/reference/plot_env_bins.html","id":null,"dir":"Reference","previous_headings":"","what":"Plot Environmental Bins (2D Projection) — plot_env_bins","title":"Plot Environmental Bins (2D Projection) — plot_env_bins","text":"Visualize output get_env_bins() plotting environmental blocks (bins) along two selected environmental variables. block shown colored rectangle, points falling inside rectangle share block_id.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/plot_env_bins.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Plot Environmental Bins (2D Projection) — plot_env_bins","text":"","code":"plot_env_bins(   env_bins,   x_var,   y_var,   alpha_blocks = 0.3,   color_points = \"black\",   size_points = 2,   alpha_points = 0.5,   stroke_points = 1,   xlab = NULL,   ylab = NULL,   theme_plot = ggplot2::theme_minimal() )"},{"path":"https://wevertonbio.github.io/RuHere/reference/plot_env_bins.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Plot Environmental Bins (2D Projection) — plot_env_bins","text":"env_bins (list) output list get_env_bins(). Must contain: data: data.frame environmental values, bin indices, block_id breaks: named list breakpoints variable x_var (character) name environmental variable used x-axis. y_var (character) name environmental variable used y-axis. alpha_blocks (numeric) transparency level block rectangles. Must 0 1. Default 0.3. color_points (character) color points representing occurrence records. Default \"black\". size_points (numeric) size points representing occurrence records. Default 2. alpha_points (numeric) transparency level points. Must 0 1. Default 0.5.. stroke_points (numeric) size border points. Default 1. xlab (character) label x-axis. Default NULL, meaning name provided x_var used. ylab (character) label y-axis. Default NULL, meaning name provided y_var used. theme_plot (theme) ggplot2 theme object. Default ggplot2::theme_minimal().","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/plot_env_bins.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Plot Environmental Bins (2D Projection) — plot_env_bins","text":"ggplot object showing environmental blocks (colored rectangles) occurrence records selected environmental space.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/plot_env_bins.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Plot Environmental Bins (2D Projection) — plot_env_bins","text":"","code":"# Load example data data(\"occurrences\", package = \"RuHere\") # Get only occurrences from Araucaria occ <- occurrences[occurrences$species == \"Araucaria angustifolia\", ] # Load example of raster variables data(\"worldclim\", package = \"RuHere\") # Unwrap Packed raster r <- terra::unwrap(worldclim) # Get bins b <- get_env_bins(occ = occ, env_layers = r, n_bins = 10) # Plot plot_env_bins(b, x_var = \"bio_1\", y_var = \"bio_12\",               xlab = \"Temperature\", ylab = \"Precipitation\") #> Warning: Removed 147 rows containing missing values or values outside the scale range #> (`geom_point()`)."},{"path":"https://wevertonbio.github.io/RuHere/reference/prepare_gbif_download.html","id":null,"dir":"Reference","previous_headings":"","what":"Prepare data to request GBIF download — prepare_gbif_download","title":"Prepare data to request GBIF download — prepare_gbif_download","text":"Prepare data request GBIF download","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/prepare_gbif_download.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Prepare data to request GBIF download — prepare_gbif_download","text":"","code":"prepare_gbif_download(   species,   rank = NULL,   kingdom = NULL,   phylum = NULL,   class = NULL,   order = NULL,   family = NULL,   genus = NULL,   strict = FALSE,   progress_bar = FALSE,   ... )"},{"path":"https://wevertonbio.github.io/RuHere/reference/prepare_gbif_download.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Prepare data to request GBIF download — prepare_gbif_download","text":"species (character) vector species name(s). rank (character) optional taxonomic rank (example, 'species' 'genus'). Default NULL, meaning return species matched across ranks. kingdom (character) optional taxonomic kingdom (example, 'Plantae' 'Animalia'). Default NULL, meaning return species matched across kingdoms. phylum (character) optional taxonomic phylum. Default NULL, meaning return species matched across phyla. class (character) optional taxonomic class. Defaults NULL, meaning return species matched across classes. order (character) optional taxonomic order. Defaults NULL, meaning return species matched across orders family (character) optional taxonomic family. Defaults NULL, meaning return species matched across families. genus (character) optional taxonomic genus. Defaults NULL, meaning return species matched across genus. strict (logical) TRUE, (fuzzy) matches given name, never taxon upper classification. Default FALSE. progress_bar (logical) whether display progress bar processing. TRUE, 'pbapply' package must installed. Default FALSE. ... parameters passed rgbif::occ_count().","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/prepare_gbif_download.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Prepare data to request GBIF download — prepare_gbif_download","text":"data.frame species information, including number occurrences related details.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/prepare_gbif_download.html","id":"note","dir":"Reference","previous_headings":"","what":"Note","title":"Prepare data to request GBIF download — prepare_gbif_download","text":"function requires active internet connection access GBIF data.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/prepare_gbif_download.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Prepare data to request GBIF download — prepare_gbif_download","text":"","code":"if (FALSE) { # \\dontrun{ gbif_prepared <- prepare_gbif_download(species = \"Araucaria angustifolia\") } # }"},{"path":"https://wevertonbio.github.io/RuHere/reference/prepared_metadata.html","id":null,"dir":"Reference","previous_headings":"","what":"Metadata templates used internally by format_columns() — prepared_metadata","title":"Metadata templates used internally by format_columns() — prepared_metadata","text":"named list data frames containing metadata templates main biodiversity data providers supported package (GBIF, SpeciesLink, iDigBio, BIEN). templates used internally format_columns() harmonize columns.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/prepared_metadata.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Metadata templates used internally by format_columns() — prepared_metadata","text":"","code":"prepared_metadata"},{"path":"https://wevertonbio.github.io/RuHere/reference/prepared_metadata.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Metadata templates used internally by format_columns() — prepared_metadata","text":"named list four data frames: $gbif — template GBIF dataset. $specieslink — template SpeciesLink dataset. $idigbio — template iDigBio dataset. $bien — template BIEN dataset.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/prepared_metadata.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Metadata templates used internally by format_columns() — prepared_metadata","text":"element prepared_metadata single-row data frame : column names correspond package’s standardized output fields values row represent original column names used data provider mappings allow format_columns() : rename fields (e.g., scientificname → scientificName) identify variables missing provider-specific coerce classes consistently (e.g., dates, coordinates) ensure compatibility combining datasets different sources","code":""},{"path":[]},{"path":"https://wevertonbio.github.io/RuHere/reference/prepared_metadata.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Metadata templates used internally by format_columns() — prepared_metadata","text":"","code":"# View template for GBIF records prepared_metadata$gbif #>           scientificName collectionCode catalogNumber decimalLongitude #> 1 acceptedScientificName collectionCode catalogNumber decimalLongitude #>   decimalLatitude coordinateUncertaintyInMeters elevation     country #> 1 decimalLatitude coordinateUncertaintyInMeters elevation countryCode #>   stateProvince municipality locality year eventDate recordedBy identifiedBy #> 1 stateProvince municipality locality year eventDate recordedBy identifiedBy #>   basisOfRecord occurrenceRemarks habitat datasetName datasetKey        key #> 1 basisOfRecord occurrenceRemarks habitat datasetName datasetKey speciesKey"},{"path":"https://wevertonbio.github.io/RuHere/reference/puma_atlanticr.html","id":null,"dir":"Reference","previous_headings":"","what":"Occurrence records of Puma concolor from AtlanticR — puma_atlanticr","title":"Occurrence records of Puma concolor from AtlanticR — puma_atlanticr","text":"subset Atlantic mammals records obtained atlanticr::atlantic_mammals dataset, containing occurrences Puma concolor. dataset provided example illustrate create user-defined metadata templates occurrence records external sources using package’s create_metadata() function.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/puma_atlanticr.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Occurrence records of Puma concolor from AtlanticR — puma_atlanticr","text":"","code":"puma_atlanticr"},{"path":"https://wevertonbio.github.io/RuHere/reference/puma_atlanticr.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Occurrence records of Puma concolor from AtlanticR — puma_atlanticr","text":"data frame row represents single occurrence record Puma concolor. Columns include species name, location, relevant metadata fields provided atlantic_mammals dataset.","code":""},{"path":[]},{"path":"https://wevertonbio.github.io/RuHere/reference/puma_atlanticr.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Occurrence records of Puma concolor from AtlanticR — puma_atlanticr","text":"","code":"# Preview first rows head(puma_atlanticr) #> # A tibble: 6 × 40 #>   id    reference_paper_number country state         municipality study_location #>   <chr>                  <dbl> <chr>   <chr>         <chr>        <chr>          #> 1 AML03                      3 Brazil  sao_paulo     Botucatu     Fazenda Exper… #> 2 AML04                      4 Brazil  santa_catari… Ipumirim     Atlantic fore… #> 3 AML05                      5 Brazil  santa_catari… Sao Domingos Parque Estadu… #> 4 AML07                      5 Brazil  santa_catari… Antonio Car… RPPN Caraguata #> 5 AML10                      5 Brazil  santa_catari… Sideropolis  Reserva Parti… #> 6 AML11                      5 Brazil  santa_catari… Urupema      RPPN Serra da… #> # ℹ 34 more variables: latitude <dbl>, longitude <dbl>, precision <chr>, #> #   size_ha <chr>, temperature <chr>, altitude <chr>, annual_rainfall <chr>, #> #   vegetation_type <chr>, protect_area <chr>, matrix <chr>, reference <chr>, #> #   publication_year <dbl>, type_of_publication <chr>, month_start <chr>, #> #   year_start <dbl>, month_finish <chr>, year_finish <dbl>, #> #   total_of_months <dbl>, sampling_habitat <chr>, effort <dbl>, #> #   effort_method <chr>, method <chr>, order <chr>, genus_on_paper <chr>, …  # Count occurrences per year table(puma_atlanticr$year) #> Warning: Unknown or uninitialised column: `year`. #> < table of extent 0 >"},{"path":"https://wevertonbio.github.io/RuHere/reference/relocate_after.html","id":null,"dir":"Reference","previous_headings":"","what":"Relocate a column in a data frame — relocate_after","title":"Relocate a column in a data frame — relocate_after","text":"functions move one column new position data frame, either immediately another column, preserving order remaining columns. lightweight base-R utilities equivalent dplyr::relocate(), without external dependencies.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/relocate_after.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Relocate a column in a data frame — relocate_after","text":"","code":"relocate_after(df, col, after)  relocate_before(df, col, before)"},{"path":"https://wevertonbio.github.io/RuHere/reference/relocate_after.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Relocate a column in a data frame — relocate_after","text":"df (data.frame) data.frame whose columns reordered. col (character) name column move. (character) relocate_after(): column col placed. (character) relocate_before(): column col placed.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/relocate_after.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Relocate a column in a data frame — relocate_after","text":"data.frame columns reordered.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/remove_accent.html","id":null,"dir":"Reference","previous_headings":"","what":"Remove accents and special characters from strings — remove_accent","title":"Remove accents and special characters from strings — remove_accent","text":"function removes accents replaces special characters strings, returning plain-text version suitable data cleaning standardization.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/remove_accent.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Remove accents and special characters from strings — remove_accent","text":"","code":"remove_accent(s)"},{"path":"https://wevertonbio.github.io/RuHere/reference/remove_accent.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Remove accents and special characters from strings — remove_accent","text":"s (character) character vector containing strings process.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/remove_accent.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Remove accents and special characters from strings — remove_accent","text":"vector string without accents special characters.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/remove_accent.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Remove accents and special characters from strings — remove_accent","text":"","code":"remove_accent(c(\"Colômbia\", \"São Paulo\")) #> [1] \"Colombia\"  \"Sao Paulo\""},{"path":"https://wevertonbio.github.io/RuHere/reference/remove_flagged.html","id":null,"dir":"Reference","previous_headings":"","what":"Remove flagged records — remove_flagged","title":"Remove flagged records — remove_flagged","text":"function removes occurrence records flagged invalid one flagging functions. Additional manual control available force keeping removing specific records, regardless flag values.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/remove_flagged.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Remove flagged records — remove_flagged","text":"","code":"remove_flagged(   occ,   flags = \"all\",   additional_flags = NULL,   force_keep = NULL,   force_remove = NULL,   remove_NA = FALSE,   column_id = \"record_id\",   save_flagged = FALSE,   output_dir = NULL,   overwrite = FALSE,   output_format = \".gz\" )"},{"path":"https://wevertonbio.github.io/RuHere/reference/remove_flagged.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Remove flagged records — remove_flagged","text":"occ (data.frame data.table) dataset occurrence records processed two flagging functions. See details. flags (character) character vector names flag columns used filtering records. See details available options. Default \"\". additional_flags (character) optional named character vector names additional logical columns used flags. Default NULL. force_keep (character) optional character vector IDs records flagged still kept. Default NULL. force_remove (character) optional character vector IDs records flagged still removed. Default NULL. remove_NA (logical) whether remove records NA flags specified. Default FALSE. column_id (character) name column containing unique record IDs. Required force_keep force_remove used. Default NULL. save_flagged (logical) whether save flagged (removed) records. TRUE, output_dir must provided. Default FALSE. output_dir (character) path existing directory removed flagged records saved. used save_flagged = TRUE. overwrite (logical)  whether overwrite existing files output_dir. used save_flagged = TRUE. Default FALSE. output_format (character) output format saving removed records. Options \".csv\" \".gz\". used save_flagged = TRUE. Default \".gz\".","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/remove_flagged.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Remove flagged records — remove_flagged","text":"data.frame containing valid (kept) records according flags additional criteria.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/remove_flagged.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Remove flagged records — remove_flagged","text":"following flags available: correct_country, correct_state, cultivated, fossil, inaturalist, faunabr, florabr, wcvp, iucn, duplicated, thin_geo, thin_env, .val, .equ, .zer, .cap, .cen, .sea, .urb, .otl, .gbf, .inst, .aohi.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/remove_flagged.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Remove flagged records — remove_flagged","text":"","code":"# Load example data data(\"occ_flagged\", package = \"RuHere\")  # Remove all flagged records occ_valid <- remove_flagged(occ = occ_flagged)  # Remove flagged records and force removal of some unflagged records to_remove <- c(\"gbif_5987\", \"specieslink_2301\", \"gbif_18761\") occ_valid2 <- remove_flagged(occ = occ_flagged,                              force_remove = to_remove)  # Remove flagged records but keep some flagged ones to_keep <- c(\"gbif_14501\", \"gbif_12002\", \"gbif_5168\") occ_valid3 <- remove_flagged(occ = occ_flagged,                             force_keep = to_keep)"},{"path":"https://wevertonbio.github.io/RuHere/reference/remove_invalid_coordinates.html","id":null,"dir":"Reference","previous_headings":"","what":"Identify and remove invalid coordinates — remove_invalid_coordinates","title":"Identify and remove invalid coordinates — remove_invalid_coordinates","text":"function identifies removes invalid geographic coordinates, including non-numeric values, NA empty values, coordinates outside valid range Earth (latitude > 90 < -90, longitude > 180 < -180).","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/remove_invalid_coordinates.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Identify and remove invalid coordinates — remove_invalid_coordinates","text":"","code":"remove_invalid_coordinates(   occ,   long = \"decimalLongitude\",   lat = \"decimalLatitude\",   return_invalid = TRUE,   verbose = FALSE )"},{"path":"https://wevertonbio.github.io/RuHere/reference/remove_invalid_coordinates.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Identify and remove invalid coordinates — remove_invalid_coordinates","text":"occ (data.frame data.table) dataset occurrence records. long (character) column name occ longitude. lat (character) column name occ latitude. return_invalid (logical) whether return list containing valid invalid coordinates. Default TRUE. verbose (logical) whether print messages function progress. Default TRUE.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/remove_invalid_coordinates.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Identify and remove invalid coordinates — remove_invalid_coordinates","text":"return_invalid = FALSE, returns occurrence dataset containing valid coordinates. return_invalid = TRUE (default), returns list two elements: valid – dataset valid coordinates. invalid – dataset invalid coordinates removed.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/remove_invalid_coordinates.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Identify and remove invalid coordinates — remove_invalid_coordinates","text":"","code":"# Create fake data example occ <- data.frame(\"species\" = \"spp\",                   \"decimalLongitude\" = c(10, -190, 20, 50, NA),                   \"decimalLatitude\" = c(20, 20, 240, 50, NA)) # Split valid and invalid coordinates occ_valid <- remove_invalid_coordinates(occ)"},{"path":"https://wevertonbio.github.io/RuHere/reference/request_gbif.html","id":null,"dir":"Reference","previous_headings":"","what":"Submit a request to download occurrence data from GBIF. — request_gbif","title":"Submit a request to download occurrence data from GBIF. — request_gbif","text":"Submit request download occurrence data GBIF.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/request_gbif.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Submit a request to download occurrence data from GBIF. — request_gbif","text":"","code":"request_gbif(gbif_info, hasCoordinate = TRUE,                     hasGeospatialIssue = FALSE, format = \"DWCA\",                     gbif_user = NULL, gbif_pwd = NULL, gbif_email = NULL,                     additional_predicates = NULL)"},{"path":"https://wevertonbio.github.io/RuHere/reference/request_gbif.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Submit a request to download occurrence data from GBIF. — request_gbif","text":"gbif_info object class 'gbif_info' resulted prepare_gbif_download() function. hasCoordinate (logical) whether retrieve records coordinates. Default TRUE. hasGeospatialIssue (logical) whether retrieve records identified geospatial issue. Default FALSE. format (character) download format. Options available 'DWCA', 'SIMPLE_CSV', 'SPECIES_LIST', Default DWCA'. gbif_user (character) user name within GBIF's website. Default NULL, meaning try obtain information R enviroment. (check set_gbif_credentials()) details. gbif_pwd (character) user password within GBIF's website. Default NULL, meaning try obtain information R enviroment. gbif_email (character) user email within GBIF's website. Default NULL, meaning try obtain information R enviroment. additional_predicates (character occ_predicate) additional supported predicates can combined build complex download requests. See rgbif::pred() details.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/request_gbif.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Submit a request to download occurrence data from GBIF. — request_gbif","text":"download request key returned GBIF API, can used monitor retrieve download.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/request_gbif.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Submit a request to download occurrence data from GBIF. — request_gbif","text":"can use object returned function check download request progress rgbif::occ_download_wait()","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/request_gbif.html","id":"note","dir":"Reference","previous_headings":"","what":"Note","title":"Submit a request to download occurrence data from GBIF. — request_gbif","text":"function requires active internet connection valid GBIF credentials.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/request_gbif.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Submit a request to download occurrence data from GBIF. — request_gbif","text":"","code":"if (FALSE) { # \\dontrun{ # Prepare data to request GBIF download gbif_prepared <- prepare_gbif_download(species = \"Araucaria angustifolia\") # Submit a request to download occurrences gbif_requested <- request_gbif(gbif_info = gbif_prepared) # Check progress rgbif::occ_download_wait(gbif_requested) } # }"},{"path":"https://wevertonbio.github.io/RuHere/reference/richness_here.html","id":null,"dir":"Reference","previous_headings":"","what":"Species Richness and Occurrence Summary Mapping — richness_here","title":"Species Richness and Occurrence Summary Mapping — richness_here","text":"function generates spatial grids (rasters) species richness, record density, summarized biological traits occurrence data. supports custom resolutions, masking, automatic coordinate reprojection match reference rasters.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/richness_here.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Species Richness and Occurrence Summary Mapping — richness_here","text":"","code":"richness_here(   occ,   species = \"species\",   long = \"decimalLongitude\",   lat = \"decimalLatitude\",   records = \"record_id\",   raster_base = NULL,   res = NULL,   crs = \"epsg:4326\",   mask = NULL,   summary = \"records\",   field = NULL,   fun = mean,   verbose = TRUE )"},{"path":"https://wevertonbio.github.io/RuHere/reference/richness_here.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Species Richness and Occurrence Summary Mapping — richness_here","text":"occ (data.frame) dataset containing occurrence records. Must include columns species names geographic coordinates. species (character) name column occ contains species scientific names. Default \"species\". long (character) name column occ contains longitude values. Default \"decimalLongitude\". lat (character) name column occ contains latitude values. Default \"decimalLatitude\". records (character) name column occ contains record names. Default \"record_id\". raster_base (SpatRaster) optional reference raster. provided, output match resolution, extent, CRS. Default NULL. res (numeric) desired resolution (decimal degrees WGS84) output grid. used raster_base NULL. crs (character) coordinate reference system raster. (see ?terra::crs). Default \"epsg:4326\". applicable raster_base provided. mask (SpatRaster SpatVector) optional layer mask final output. Default NULL. summary (character) type summary calculate. Either \"records\" (number occurrences per cell) \"species\" (number unique species per cell). Default \"records\". field (character named vector) columns occ summarize (e.g., traits). named vector provided, names must match species occ. Used summarize traits flags 'species' 'records' modes. Default NULL. fun (function) function aggregate field values (e.g., mean, max, sum). Default mean. verbose (logical) whether print messages progress. Default TRUE.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/richness_here.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Species Richness and Occurrence Summary Mapping — richness_here","text":"SpatRaster object representing calculated richness, density, trait summary.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/richness_here.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Species Richness and Occurrence Summary Mapping — richness_here","text":"","code":"# Load example data data(\"occ_flagged\", package = \"RuHere\")  # Mapping the density of records r_density <- richness_here(occ_flagged, summary = \"records\", res = 0.5) ggrid_here(r_density)   # We can also summarize key features: # 1. Identifying problematic regions by summing error flags # We create a variable to store the sum of logical flags (TRUE = 1, FALSE = 0) total_flags <- occ_flagged$florabr_flag +                occ_flagged$wcvp_flag +                occ_flagged$iucn_flag +                occ_flagged$cultivated_flag +                occ_flagged$inaturalist_flag +                occ_flagged$duplicated_flag names(total_flags) <- occ_flagged$record_id  # Using summary = \"records\" with to see the average accumulation of errors # with fun = mean to see the average accumulation r_flags <- richness_here(occ_flagged, summary = \"records\",                          field = total_flags,                          fun = mean, res = 0.5) ggrid_here(r_flags)   # 2. Or we can summarize organisms traits spatially # Simulating a trait (e.g., mass) for each unique record spp <- unique(occ_flagged$record_id) sim_mass <- setNames(runif(length(spp), 10, 50), spp)  r_trait <- richness_here(occ_flagged, summary = \"records\",                          field = sim_mass, fun = mean, res = 0.5) ggrid_here(r_trait)"},{"path":"https://wevertonbio.github.io/RuHere/reference/set_gbif_credentials.html","id":null,"dir":"Reference","previous_headings":"","what":"Store GBIF credentials — set_gbif_credentials","title":"Store GBIF credentials — set_gbif_credentials","text":"function stores GBIF credentials (username, email password) R environment. credentials required retrieve occurrence records GBIF.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/set_gbif_credentials.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Store GBIF credentials — set_gbif_credentials","text":"","code":"set_gbif_credentials(gbif_username, gbif_email, gbif_password,                            overwrite = FALSE, open_Renviron = FALSE,                            verbose = TRUE)"},{"path":"https://wevertonbio.github.io/RuHere/reference/set_gbif_credentials.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Store GBIF credentials — set_gbif_credentials","text":"gbif_username (character) GBIF username. gbif_email (character) GBIF email address. gbif_password (character) GBIF password. overwrite (logical) whether overwrite GBIF credentials already exist. Default FALSE. open_Renviron (logical) whether open .Renviron file saving credentials. Default FALSE. verbose (logical) TRUE, prints messages progress number species checked. Default TRUE.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/set_gbif_credentials.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Store GBIF credentials — set_gbif_credentials","text":"open_Renviron set TRUE, opens .Renviron file. Otherwise, credentials saved silently.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/set_gbif_credentials.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Store GBIF credentials — set_gbif_credentials","text":"","code":"if (FALSE) { # \\dontrun{ set_gbif_credentials(gbif_username = \"my_username\",                      gbif_email = \"my_email@example.com\",                      gbif_password = \"my_password\") } # }"},{"path":"https://wevertonbio.github.io/RuHere/reference/set_iucn_credentials.html","id":null,"dir":"Reference","previous_headings":"","what":"Store SpeciesLink credential — set_iucn_credentials","title":"Store SpeciesLink credential — set_iucn_credentials","text":"function stores IUCN credential (API key) R environment. API key required obtain distributional data IUCN.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/set_iucn_credentials.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Store SpeciesLink credential — set_iucn_credentials","text":"","code":"set_iucn_credentials(iucn_key, overwrite = FALSE,                             open_Renviron = FALSE, verbose = TRUE)"},{"path":"https://wevertonbio.github.io/RuHere/reference/set_iucn_credentials.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Store SpeciesLink credential — set_iucn_credentials","text":"iucn_key (character) IUCN API key. See Details. overwrite (logical) whether overwrite IUCN credential already exists. Default FALSE. open_Renviron (logical) whether open .Renviron file saving credentials. Default FALSE. verbose (logical) TRUE, prints messages progress number species checked. Default TRUE.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/set_iucn_credentials.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Store SpeciesLink credential — set_iucn_credentials","text":"open_Renviron set TRUE, opens .Renviron file. Otherwise, credentials saved silently.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/set_iucn_credentials.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Store SpeciesLink credential — set_iucn_credentials","text":"check API key, visit: https://api.iucnredlist.org/users/edit.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/set_iucn_credentials.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Store SpeciesLink credential — set_iucn_credentials","text":"","code":"if (FALSE) { # \\dontrun{ set_iucn_credentials(iucn_key = \"my_key\") } # }"},{"path":"https://wevertonbio.github.io/RuHere/reference/set_specieslink_credentials.html","id":null,"dir":"Reference","previous_headings":"","what":"Store SpeciesLink credential — set_specieslink_credentials","title":"Store SpeciesLink credential — set_specieslink_credentials","text":"function stores SpeciesLink credential (API key) R environment. API key required retrieve occurrence records SpeciesLink.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/set_specieslink_credentials.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Store SpeciesLink credential — set_specieslink_credentials","text":"","code":"set_specieslink_credentials(specieslink_key, overwrite = FALSE,                                    open_Renviron = FALSE, verbose = TRUE)"},{"path":"https://wevertonbio.github.io/RuHere/reference/set_specieslink_credentials.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Store SpeciesLink credential — set_specieslink_credentials","text":"specieslink_key (character) SpeciesLink API key. overwrite (logical) whether overwrite SpeciesLink credential already exists. Default FALSE. open_Renviron (logical) whether open .Renviron file saving credentials. Default FALSE. verbose (logical) TRUE, prints messages progress number species checked. Default TRUE.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/set_specieslink_credentials.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Store SpeciesLink credential — set_specieslink_credentials","text":"open_Renviron set TRUE, opens .Renviron file. Otherwise, credentials saved silently.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/set_specieslink_credentials.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Store SpeciesLink credential — set_specieslink_credentials","text":"check API key, visit: https://specieslink.net/aut/profile/apikeys.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/set_specieslink_credentials.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Store SpeciesLink credential — set_specieslink_credentials","text":"","code":"if (FALSE) { # \\dontrun{ set_specieslink_credentials(specieslink_key = \"my_key\") } # }"},{"path":"https://wevertonbio.github.io/RuHere/reference/spatial_kde.html","id":null,"dir":"Reference","previous_headings":"","what":"Kernel Density Estimation (Heatmap) for occurrence data — spatial_kde","title":"Kernel Density Estimation (Heatmap) for occurrence data — spatial_kde","text":"function creates density heatmaps using kernel density estimation. algorithm inspired SpatialKDE R package \"Heatmap\" tool QGIS. occurrence contributes density surface within circular neighborhood defined specified radius.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/spatial_kde.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Kernel Density Estimation (Heatmap) for occurrence data — spatial_kde","text":"","code":"spatial_kde(   occ,   long = \"decimalLongitude\",   lat = \"decimalLatitude\",   radius = 0.2,   resolution = NULL,   buffer_extent = 500,   crs = \"epsg:4326\",   raster_ref = NULL,   kernel = \"quartic\",   scaled = TRUE,   decay = 1,   mask = NULL,   zero_as_NA = FALSE,   weights = NULL )"},{"path":"https://wevertonbio.github.io/RuHere/reference/spatial_kde.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Kernel Density Estimation (Heatmap) for occurrence data — spatial_kde","text":"occ (data.frame, data.table, SpatVector) data frame SpatVector containing occurrences. Must contain columns longitude latitude. long (character) name column occ contains longitude values. Default \"decimalLongitude\". lat (character) name column occ contains latitude values. Default \"decimalLatitude\". radius (numeric) positive numeric value specifying smoothing radius kernel density estimate. parameter determines circular neighborhood around point point influence. See details. Default 0.2. resolution (numeric) positive numeric value specifying resolution (degrees meters, depending crs provided) resultant raster heatmap. Required raster_ref provided. Default NULL. buffer_extent (numeric) width buffer (kilometers) draw around occurrences define area computing heatmap. Default 500. crs (character) coordinate reference system raster heatmap (see ?terra::crs). Default \"epsg:4326\". applicable raster_ref provided. raster_ref (SpatRaster) optional  raster use reference resolution, CRS, extent. Default NULL. kernel (character) type kernel use. Available kernerls \"uniform\", \"quartic\", \"triweight\", \"epanechnikov\", \"triangular\". Default \"quartic\". scaled (logical) whether scale output values vary 0 Default TRUE. decay (numeric) decay parameter \"triangular\" kernel. applicable kernel = triangular. mask (SpatRaster SpatExtent) optional spatial object define extent area heatmap. Default NULL, case extent derived raster_ref (provided) convex hull occurrences plus buffer_extent. zero_as_NA (logical) whether convert regions value 0 NA. Default FALSE. weights (numeric) optional vector weights individual points. Must length number occurrences occ. Default NULL.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/spatial_kde.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Kernel Density Estimation (Heatmap) for occurrence data — spatial_kde","text":"SpatRaster containing kernel density values.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/spatial_kde.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Kernel Density Estimation (Heatmap) for occurrence data — spatial_kde","text":"radius parameter controls far influence observation extends. Smaller values produce fine-grained peaks; larger values produce smoother, spread-heatmaps. Units depend CRS: degrees geographic coordinates (default), meters projected coordinates. raster_ref provided, extent calculated convex hull occ plus buffer_extent. Kernels define weight decay points: \"uniform\" = constant, \"quartic\"/\"triweight\"/\"epanechnikov\" = smooth, \"triangular\" = linear decay (using decay parameter).","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/spatial_kde.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Kernel Density Estimation (Heatmap) for occurrence data — spatial_kde","text":"Hart, T., & Zandbergen, P. (2014). Kernel density estimation hotspot mapping: Examining influence interpolation method, grid cell size, radius crime forecasting. Policing: International Journal Police Strategies & Management, 37(2), 305-323. Nelson, T. ., & Boots, B. (2008). Detecting spatial hot spots landscape ecology. Ecography, 31(5), 556-566. Chainey, S., Tompson, L., & Uhlig, S. (2008). utility hotspot mapping predicting spatial patterns crime. Security journal, 21(1), 4-28. Caha J (2023). SpatialKDE: Kernel Density Estimation Spatial Data. https://jancaha.github.io/SpatialKDE/index.html.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/spatial_kde.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Kernel Density Estimation (Heatmap) for occurrence data — spatial_kde","text":"","code":"# Load example data data(\"occ_flagged\", package = \"RuHere\") # Remove flagged records occ <- remove_flagged(occ_flagged) # Generate heatmap heatmap <- spatial_kde(occ = occ, resolution = 0.25, buffer_extent = 50,                        radius = 2) # Plot heatmap with terra terra::plot(heatmap)  # Plot heatmap with ggplot ggmap_here(occ = occ, heatmap = heatmap)"},{"path":"https://wevertonbio.github.io/RuHere/reference/spatialize.html","id":null,"dir":"Reference","previous_headings":"","what":"Spatialize occurrence records — spatialize","title":"Spatialize occurrence records — spatialize","text":"Convert data.frame (data.table) occurrence records SpatVector object.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/spatialize.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Spatialize occurrence records — spatialize","text":"","code":"spatialize(   occ,   long = \"decimalLongitude\",   lat = \"decimalLatitude\",   crs = \"epsg:4326\",   force_numeric = TRUE )"},{"path":"https://wevertonbio.github.io/RuHere/reference/spatialize.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Spatialize occurrence records — spatialize","text":"occ (data.frame data.table) data frame containing occurrence records flagged. Must contain columns longitude, latitude. long (character) name column occ contains longitude values. Default \"decimalLongitude\". lat (character) name column occ contains latitude values. Default \"decimalLatitude\". crs (character) coordinate reference system one following formats: PROJ-string notation, WKT/WKT2, : (see ?terra::crs). Default \"epsg:4326\". force_numeric (logical) whether coerce longitude latitude columns numeric already. Default TRUE.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/spatialize.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Spatialize occurrence records — spatialize","text":"SpatVector object containing spatialized occurrence records.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/spatialize.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Spatialize occurrence records — spatialize","text":"","code":"# Load example data data(\"occurrences\", package = \"RuHere\") # Spatialize the occurrence records pts <- spatialize(occurrences) # Plot the resulting SpatVector terra::plot(pts)"},{"path":"https://wevertonbio.github.io/RuHere/reference/standardize_countries.html","id":null,"dir":"Reference","previous_headings":"","what":"Standardize country names — standardize_countries","title":"Standardize country names — standardize_countries","text":"function standardizes country names using names codes present specified column.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/standardize_countries.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Standardize country names — standardize_countries","text":"","code":"standardize_countries(   occ,   country_column = \"country\",   max_distance = 0.1,   user_dictionary = NULL,   lookup_na_country = FALSE,   long = \"decimalLongitude\",   lat = \"decimalLatitude\",   return_dictionary = TRUE )"},{"path":"https://wevertonbio.github.io/RuHere/reference/standardize_countries.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Standardize country names — standardize_countries","text":"occ (data.frame) dataset occurrence records, preferably standardized using format_columns(). country_column (character) column name containing country information. max_distance (numeric) maximum allowed distance (fraction) searching suggestions misspelled country names. Can value 0 1. Higher values return suggestions. See agrep() details. Default 0.1. user_dictionary (data.frame) optional data.frame two columns: 'country_name' 'country_suggested'. provided, dictionary combined package’s default country dictionary (RuHere::country_dictionary). Default NULL. lookup_na_country (logical) whether extract country coordinates country column missing values. TRUE, longitude latitude columns must provided. Default FALSE. long (character) column name longitude. applicable lookup_na_country = TRUE. Default \"decimalLongitude\". lat (character) column name latitude. applicable lookup_na_country = TRUE. Default \"decimalLatitude\". return_dictionary (logical) whether return dictionary countries (fuzzy) matched.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/standardize_countries.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Standardize country names — standardize_countries","text":"list two elements: data original occ data.frame additional column (country_suggested) containing suggested country names based exact match, fuzzy match, /coordinates. dictionary return_dictionary = TRUE, data.frame original country names suggested matches.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/standardize_countries.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Standardize country names — standardize_countries","text":"Country names first standardized exact matching list country names several languages rnaturalearthdata::map_units110. unmatched names processed using fuzzy matching algorithm find potential candidates misspelled country names. unmatched names remain lookup_na_country = TRUE, country extracted coordinates using map retrieved rnaturalearthdata::map_units110.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/standardize_countries.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Standardize country names — standardize_countries","text":"","code":"# Import and standardize GBIF data(\"occ_gbif\", package = \"RuHere\") #Import data example gbif_standardized <- format_columns(occ_gbif, metadata = \"gbif\") # Import and standardize SpeciesLink data(\"occ_splink\", package = \"RuHere\") #Import data example splink_standardized <- format_columns(occ_splink, metadata = \"specieslink\") # Import and standardize BIEN data(\"occ_bien\", package = \"RuHere\") #Import data example bien_standardized <- format_columns(occ_bien, metadata = \"bien\") # Import and standardize idigbio data(\"occ_idig\", package = \"RuHere\") #Import data example idig_standardized <- format_columns(occ_idig, metadata = \"idigbio\") # Merge all all_occ <- bind_here(gbif_standardized, splink_standardized,                      bien_standardized, idig_standardized) # Standardize countries occ_standardized <- standardize_countries(occ = all_occ)"},{"path":"https://wevertonbio.github.io/RuHere/reference/standardize_states.html","id":null,"dir":"Reference","previous_headings":"","what":"Standardize state names — standardize_states","title":"Standardize state names — standardize_states","text":"function standardizes state names using names codes present specified column.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/standardize_states.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Standardize state names — standardize_states","text":"","code":"standardize_states(   occ,   state_column = \"stateProvince\",   country_column = \"country_suggested\",   max_distance = 0.1,   lookup_na_state = FALSE,   long = \"decimalLongitude\",   lat = \"decimalLatitude\",   return_dictionary = TRUE )"},{"path":"https://wevertonbio.github.io/RuHere/reference/standardize_states.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Standardize state names — standardize_states","text":"occ (data.frame) dataset occurrence records, preferably standardized using format_columns(). state_column (character) column name containing state information. country_column (character) column name containing country information. max_distance (numeric) maximum allowed distance (fraction) searching suggestions misspelled state names. Can value 0 1. Higher values return suggestions. See agrep() details. Default 0.1. lookup_na_state (logical) whether extract state coordinates state column missing values. TRUE, longitude latitude columns must provided. Default FALSE. long (character) column name longitude. applicable lookup_na_state = TRUE. Default \"decimalLongitude\". lat (character) column name latitude. applicable lookup_na_state = TRUE. Default \"decimalLatitude\". return_dictionary (logical) whether return dictionary states (fuzzy) matched.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/standardize_states.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Standardize state names — standardize_states","text":"list two elements: data original occ data.frame additional column (state_suggested) containing suggested state names based exact match, fuzzy match, /coordinates. dictionary return_dictionary = TRUE, data.frame original state names suggested matches.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/standardize_states.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Standardize state names — standardize_states","text":"States names first standardized exact matching list state names several languages rnaturalearthdata::states50. unmatched names processed using fuzzy matching algorithm find potential candidates misspelled state names. unmatched names remain lookup_na_state = TRUE, state extracted coordinates using map retrieved rnaturalearthdata::states50.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/standardize_states.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Standardize state names — standardize_states","text":"","code":"# Import and standardize GBIF data(\"occ_gbif\", package = \"RuHere\") #Import data example gbif_standardized <- format_columns(occ_gbif, metadata = \"gbif\") # Import and standardize SpeciesLink data(\"occ_splink\", package = \"RuHere\") #Import data example splink_standardized <- format_columns(occ_splink, metadata = \"specieslink\") # Import and standardize BIEN data(\"occ_bien\", package = \"RuHere\") #Import data example bien_standardized <- format_columns(occ_bien, metadata = \"bien\") # Import and standardize idigbio data(\"occ_idig\", package = \"RuHere\") #Import data example idig_standardized <- format_columns(occ_idig, metadata = \"idigbio\") # Merge all all_occ <- bind_here(gbif_standardized, splink_standardized,                      bien_standardized, idig_standardized) # Standardize countries occ_standardized <- standardize_countries(occ = all_occ) # Standardize states occ_standardized2 <- standardize_states(occ = occ_standardized$occ)"},{"path":"https://wevertonbio.github.io/RuHere/reference/states.html","id":null,"dir":"Reference","previous_headings":"","what":"Administrative Units (States, Provinces, and Regions) — states","title":"Administrative Units (States, Provinces, and Regions) — states","text":"simplified PackedSpatVector containing state-level polygons (e.g., provinces, departments, regions) countries worldwide. Names parent countries (geonunit) cleaned (lowercase, accents removed).","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/states.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Administrative Units (States, Provinces, and Regions) — states","text":"","code":"states"},{"path":"https://wevertonbio.github.io/RuHere/reference/states.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Administrative Units (States, Provinces, and Regions) — states","text":"PackedSpatVector object polygons administrative divisions one attribute: name State/province/region name.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/states.html","id":"source","dir":"Reference","previous_headings":"","what":"Source","title":"Administrative Units (States, Provinces, and Regions) — states","text":"Natural Earth data, via rnaturalearth.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/states.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Administrative Units (States, Provinces, and Regions) — states","text":"dataset generated rnaturalearth::ne_states(). following processing steps applied: kept administrative types: \"Province\", \"State\", \"Department\", \"Region\", \"Federal District\"; selected \"name\" \"geonunit\" columns; fields cleaned via tolower() remove_accent(); records state name = country name removed; geometries simplified using terra::simplifyGeom(tolerance = 0.05); wrapped terra::wrap() internal storage.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/states.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Administrative Units (States, Provinces, and Regions) — states","text":"","code":"data(states) states <- terra::unwrap(states) terra::plot(states)"},{"path":"https://wevertonbio.github.io/RuHere/reference/states_dictionary.html","id":null,"dir":"Reference","previous_headings":"","what":"States dictionary for standardizing state and province names and codes — states_dictionary","title":"States dictionary for standardizing state and province names and codes — states_dictionary","text":"Provides lookup tables used standardize subnational administrative units (states provinces) occurrence datasets. Generated rnaturalearth::ne_states(), includes wide range name variants (multiple languages, transliterations, common abbreviations), well postal codes unit. dictionary allows consistent mapping user-provided names \"são paulo\", \"sao paulo\", \"SP\", \"illinois\", \"ill.\", \"bayern\", \"bavaria\" single standardized state province name.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/states_dictionary.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"States dictionary for standardizing state and province names and codes — states_dictionary","text":"","code":"states_dictionary"},{"path":"https://wevertonbio.github.io/RuHere/reference/states_dictionary.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"States dictionary for standardizing state and province names and codes — states_dictionary","text":"named list two data frames: states_name data frame columns: state_name Character. Name variants states provinces ne_states(), lowercased accent-stripped. state_suggested Character. Standardized state/province name, also lowercased accent-stripped. country Character. Country associated state/province, lowercased accent-stripped. states_code data frame columns: state_code Character. Postal codes ne_states(), cleaned converted uppercase. state_suggested Character. Standardized state/province name corresponding code. country Character. Country associated code.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/states_dictionary.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"States dictionary for standardizing state and province names and codes — states_dictionary","text":"dictionary constructed : selecting administrative units type \"State\" \"Province\"; extracting multiple name fields, including alternative names multilingual fields; normalizing names lowercase removing accents; normalizing codes uppercase; removing duplicates ambiguous entries; removing rows missing names codes.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/states_dictionary.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"States dictionary for standardizing state and province names and codes — states_dictionary","text":"","code":"data(states_dictionary) head(states_dictionary$states_name) #>         state_name  state_suggested   country #> 1       entre rios       entre rios argentina #> 2 kalimantan timur kalimantan timur indonesia #> 3            sabah            sabah  malaysia #> 4            salta            salta argentina #> 5            jujuy            jujuy argentina #> 6     an nabatiyah     an nabatiyah   lebanon head(states_dictionary$states_code) #>   state_code  state_suggested   country #> 1         ER       entre rios argentina #> 2         KI kalimantan timur indonesia #> 3         SA            sabah  malaysia #> 4         SA            salta argentina #> 5         JY            jujuy argentina #> 6         NA     an nabatiyah   lebanon"},{"path":"https://wevertonbio.github.io/RuHere/reference/states_from_coords.html","id":null,"dir":"Reference","previous_headings":"","what":"Extract state from coordinates — states_from_coords","title":"Extract state from coordinates — states_from_coords","text":"Extracts state occurrence record based coordinates.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/states_from_coords.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Extract state from coordinates — states_from_coords","text":"","code":"states_from_coords(   occ,   long = \"decimalLongitude\",   lat = \"decimalLatitude\",   from = \"all\",   state_column = \"stateProvince\",   output_column = \"state_xy\",   append_source = FALSE )"},{"path":"https://wevertonbio.github.io/RuHere/reference/states_from_coords.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Extract state from coordinates — states_from_coords","text":"occ (data.frame) dataset occurrence records, preferably standardized using format_columns(). long (character) column name longitude. Default 'decimalLongitude'. lat (character) column name latitude. Default 'decimalLatitude'. (character) whether extract state records ('') records missing state information ('na_only'). 'na_only', must provide name column state information. Default ''. state_column (character) column name containing state. applicable = na_only. Default NULL. output_column (character) column name created occ store states extracted. Default 'state_xy'. append_source (logical) whether create new column occ called 'state_source', indicates whether state derived coordinates. Default FALSE.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/states_from_coords.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Extract state from coordinates — states_from_coords","text":"original occ data.frame additional column containing states extracted coordinates.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/states_from_coords.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Extract state from coordinates — states_from_coords","text":"states extracted coordinates using map retrieved rnaturalearthdata::states50.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/states_from_coords.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Extract state from coordinates — states_from_coords","text":"","code":"# Import and standardize GBIF data(\"occ_gbif\", package = \"RuHere\") #Import data example gbif_standardized <- format_columns(occ_gbif, metadata = \"gbif\") gbif_states <- states_from_coords(occ = gbif_standardized)"},{"path":"https://wevertonbio.github.io/RuHere/reference/summarize_flags.html","id":null,"dir":"Reference","previous_headings":"","what":"Summarize flags — summarize_flags","title":"Summarize flags — summarize_flags","text":"functions returns dataframe bar plot summarizing number records flagged flagging function.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/summarize_flags.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Summarize flags — summarize_flags","text":"","code":"summarize_flags(   occ = NULL,   flagged_dir = NULL,   output_format = \".gz\",   flags = \"all\",   additional_flags = NULL,   names_additional_flags = NULL,   plot = TRUE,   show_no_flagged = TRUE,   fill = \"#0072B2\",   sort = TRUE,   decreasing = TRUE,   add_n = TRUE,   size_n = 3.5,   theme_plot = ggplot2::theme_minimal(),   ... )"},{"path":"https://wevertonbio.github.io/RuHere/reference/summarize_flags.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Summarize flags — summarize_flags","text":"occ (data.frame data.table) dataset containing occurrence records processed one flagging functions. See Details available flag types. flagged_dir (character) optional path directory containing files flagged records saved using remove_flagged() function. Default NULL. output_format (character) output format used read removed records. Options \".csv\" \".gz\". used flagged_dir NULL. Default \".gz\". flags (character) flags summarized. Use \"\" display available flags. See Details options. Default \"\". additional_flags (character) optional named character vector names additional logical columns used flags. Default NULL. names_additional_flags (character) optional different name flag provided additional_flags shown map. applicable additional_flags NULL. plot (logical) whether return ggplot2 bar plot showing number flagged records. Default TRUE. show_no_flagged (logical) whether include number unflagged records plot. Default TRUE. fill (character) fill color bar plot. Default \"#0072B2\". sort (logical) whether sort bars according number records. Default TRUE. decreasing (logical) whether sort bars decreasing order (flags records appear top plot). Default TRUE. add_n (logical) whether display number flagged records bars. Default TRUE. size_n (numeric) size text showing number records. used add_n = TRUE. Default 3.5. theme_plot (theme) ggplot2 theme object. Default ggplot2::theme_minimal(). ... additional arguments passed ggplot2::theme().","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/summarize_flags.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Summarize flags — summarize_flags","text":"plot = TRUE, list two elements: df_summary data frame summarizing number records per flag. plot_summary ggplot2 object showing summary bar plot. plot = FALSE, summary data frame returned.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/summarize_flags.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Summarize flags — summarize_flags","text":"function expects occurrence dataset already processed one flagging routines RuHere related packages CoordinateCleaner. logical column occ can used flag. following built-flag names recognized: RuHere: correct_country, correct_state, cultivated, florabr, faunabr, wcvp, iucn, bien, duplicated, thin_geo, thin_env, consensus CoordinateCleaner: .val, .equ, .zer, .cap, .cen, .sea, .urb, .otl, .gbf, .inst, .aohi Users may also supply additional logical columns using additional_flags, optionally providing alternative display names (names_additional_flags) colors (col_additional_flags).","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/summarize_flags.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Summarize flags — summarize_flags","text":"","code":"# Load example data data(\"occ_flagged\", package = \"RuHere\") # Summarize flags sum_flags <- summarize_flags(occ = occ_flagged) # Plot sum_flags$plot_summary"},{"path":"https://wevertonbio.github.io/RuHere/reference/thin_env.html","id":null,"dir":"Reference","previous_headings":"","what":"Flag records that are close to each other in the enviromnetal space — thin_env","title":"Flag records that are close to each other in the enviromnetal space — thin_env","text":"Flags occurrence records thinning keeping one record per species within environmental block/bin.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/thin_env.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Flag records that are close to each other in the enviromnetal space — thin_env","text":"","code":"thin_env(   occ,   species = \"species\",   long = \"decimalLongitude\",   lat = \"decimalLatitude\",   env_layers,   n_bins = 5,   prioritary_column = NULL,   decreasing = TRUE,   flag_for_NA = FALSE )"},{"path":"https://wevertonbio.github.io/RuHere/reference/thin_env.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Flag records that are close to each other in the enviromnetal space — thin_env","text":"occ (data.frame data.table) data frame containing occurrence records. Must contain columns species, longitude, latitude. species (character) name column occ contains species scientific names. Default \"species\". long (character) name column occ contains longitude values. Default \"decimalLongitude\". lat (character) name column occ contains latitude values. Default \"decimalLatitude\". env_layers (SpatRaster) object containing environmental variables. n_bins (numeric) number bins environmental variable divided. prioritary_column (character) name numeric columns occto define retention priority (e.g., quality score, year). See details. decreasing (logical) whether sort records decreasing order using prioritary_column (e.g., recent oldest variable \"year\"). applicable prioritary_column NULL. Default TRUE. flag_for_NA (logical) whether treat records falling NA cells env_layers valid (TRUE) invalid (FALSE). Default FALSE.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/thin_env.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Flag records that are close to each other in the enviromnetal space — thin_env","text":"original occ data frame two additional columns: thin_env_flag: logical indicating whether record retained (TRUE) flagged redundant (FALSE). bin: environmental bin ID assigned record. component ID corresponds bin one environmental variable.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/thin_env.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Flag records that are close to each other in the enviromnetal space — thin_env","text":"function used get_env_bins() create multidimensional grid environmental space splitting environmental variable n_bins equally sized intervals. Records falling environmental bin considered redundant; one kept (based retention priority provided), remaining records flagged.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/thin_env.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Flag records that are close to each other in the enviromnetal space — thin_env","text":"","code":"# Load example data data(\"occurrences\", package = \"RuHere\") # Get only occurrences from Araucaria occ <- occurrences[occurrences$species == \"Araucaria angustifolia\", ] # Load example of raster variables data(\"worldclim\", package = \"RuHere\") # Unwrap Packed raster r <- terra::unwrap(worldclim) # Flag records that are close to each other in the enviromnetal space occ_env_thin <- thin_env(occ = occ, env_layers = r) # Number of flagged (redundant) records sum(!occ_env_thin$thin_env_flag) #Number of flagged records #> [1] 867"},{"path":"https://wevertonbio.github.io/RuHere/reference/thin_geo.html","id":null,"dir":"Reference","previous_headings":"","what":"Flag records that are close to each other in the geographic space — thin_geo","title":"Flag records that are close to each other in the geographic space — thin_geo","text":"Marks occurrence records thinning keeping one record per species within radius 'd' kilometers.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/thin_geo.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Flag records that are close to each other in the geographic space — thin_geo","text":"","code":"thin_geo(   occ,   species = \"species\",   long = \"decimalLongitude\",   lat = \"decimalLatitude\",   d,   prioritary_column = NULL,   decreasing = TRUE,   remove_invalid = TRUE,   optimize_memory = FALSE,   verbose = TRUE )"},{"path":"https://wevertonbio.github.io/RuHere/reference/thin_geo.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Flag records that are close to each other in the geographic space — thin_geo","text":"occ (data.frame data.table) data frame containing occurrence records flagged. Must contain columns species, longitude, latitude. species (character) name column occ contains species scientific names. Default \"species\". long (character) name column occ contains longitude values. Default \"decimalLongitude\". lat (character) name column occ contains latitude values. Default \"decimalLatitude\". d (numeric) thinning distance kilometers (e.g., 10 10km). prioritary_column (character) name numeric columns occto define retention priority (e.g., quality score, year). See details. decreasing (logical) whether sort records decreasing order using prioritary_column (e.g., recent oldest variable \"year\"). applicable prioritary_column NULL. Default TRUE. remove_invalid (logical) whether remove invalid coordinates. Default TRUE. optimize_memory (logical) whether compute distance matrix using C++ implementation reduces memory usage cost increased computation time. Recommended large datasets (> 10,000 records). Default FALSE. verbose (logical) whether display messages function execution. Set TRUE enable display, FALSE run silently. Default TRUE.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/thin_geo.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Flag records that are close to each other in the geographic space — thin_geo","text":"original occ data frame augmented new logical column named thin_geo_flag. Records retained thinning receive TRUE, records identified close higher-priority record receive FALSE.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/thin_geo.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Flag records that are close to each other in the geographic space — thin_geo","text":"function similar thin() function spThin package, important difference: allows specifying priority order retaining records. thinning distance provided (e.g., 10 km), function identifies clusters records within distance. Within cluster, keeps record highest priority according column defined prioritary_column (example, keeping recent record prioritary_column = \"year\"), flags remaining nearby records removal. prioritary_column NULL, priority follows original order rows input occ data.frame.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/thin_geo.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Flag records that are close to each other in the geographic space — thin_geo","text":"","code":"# Load example data data(\"occurrences\", package = \"RuHere\") # Subset occurrences for Araucaria angustifolia occ <- occurrences[occurrences$species == \"Araucaria angustifolia\", ] # Thin records using a 10 km distance threshold occ_thin <- thin_geo(occ = occ, d = 10) #> Removing 1 invalid records sum(!occ_thin$thin_geo_flag)  # Number of records flagged for removal #> [1] 235 # Prioritizing more recent records within each cluster occ_thin_recent <- thin_geo(occ = occ, d = 10, prioritary_column = \"year\") #> Removing 1 invalid records sum(!occ_thin_recent$thin_geo_flag)  # Number of records flagged for removal #> [1] 235"},{"path":"https://wevertonbio.github.io/RuHere/reference/wcvp_here.html","id":null,"dir":"Reference","previous_headings":"","what":"Download distribution data from the World Checklist of Vascular Plants (WCVP) — wcvp_here","title":"Download distribution data from the World Checklist of Vascular Plants (WCVP) — wcvp_here","text":"function downloads World Checklist Vascular Plants database, required filtering occurrence records using specialists' information via flag_wcvp() function.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/wcvp_here.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Download distribution data from the World Checklist of Vascular Plants (WCVP) — wcvp_here","text":"","code":"wcvp_here(   data_dir,   overwrite = TRUE,   remove_files = TRUE,   timeout = 300,   verbose = TRUE )"},{"path":"https://wevertonbio.github.io/RuHere/reference/wcvp_here.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Download distribution data from the World Checklist of Vascular Plants (WCVP) — wcvp_here","text":"data_dir (character) directory save data downloaded WCVP. overwrite (logical) TRUE, data overwritten. Default TRUE. remove_files (logical) whether remove downloaded files used building final dataset. Default TRUE. timeout (numeric) maximum time (seconds) allowed downloading. Default 300. Slower internet connections may require higher values. verbose (logical) whether display messages function execution. Set TRUE enable display, FALSE run silently. Default TRUE.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/wcvp_here.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Download distribution data from the World Checklist of Vascular Plants (WCVP) — wcvp_here","text":"message indicating data successfully saved directory specified data_dir.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/wcvp_here.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Download distribution data from the World Checklist of Vascular Plants (WCVP) — wcvp_here","text":"","code":"if (FALSE) { # \\dontrun{ # Define a directory to save the data data_dir <- tempdir() # Here, a temporary directory  # Download the WCVP database wcvp_here(data_dir = data_dir) } # }"},{"path":"https://wevertonbio.github.io/RuHere/reference/world.html","id":null,"dir":"Reference","previous_headings":"","what":"World Countries — world","title":"World Countries — world","text":"\"PackedSpatVector\" containing country polygons Natural Earth, processed cleaned use within package. Country names converted lowercase accents removed.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/world.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"World Countries — world","text":"","code":"world"},{"path":"https://wevertonbio.github.io/RuHere/reference/world.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"World Countries — world","text":"PackedSpatVector object country polygons one attribute: name Country name.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/world.html","id":"source","dir":"Reference","previous_headings":"","what":"Source","title":"World Countries — world","text":"Natural Earth data, via rnaturalearthdata.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/world.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"World Countries — world","text":"dataset sourced rnaturalearthdata::map_units110, : converted SpatVector using terra, attribute \"name\" cleaned (tolower(), remove_accent()), wrapped using terra::wrap() robust internal storage.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/world.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"World Countries — world","text":"","code":"data(world) world <- terra::unwrap(world) terra::plot(world)"},{"path":"https://wevertonbio.github.io/RuHere/reference/worldclim.html","id":null,"dir":"Reference","previous_headings":"","what":"Bioclimatic Variables from WorldClim (bio_1, bio_7, bio_12) — worldclim","title":"Bioclimatic Variables from WorldClim (bio_1, bio_7, bio_12) — worldclim","text":"PackedSpatRaster containing three bioclimatic variables WorldClim, cropped region interest South America.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/worldclim.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Bioclimatic Variables from WorldClim (bio_1, bio_7, bio_12) — worldclim","text":"","code":"worldclim"},{"path":"https://wevertonbio.github.io/RuHere/reference/worldclim.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Bioclimatic Variables from WorldClim (bio_1, bio_7, bio_12) — worldclim","text":"SpatRaster 3 layers following characteristics: Dimensions 151 rows × 183 columns Resolution 0.08333333° × 0.08333333° Extent xmin = -57.08333, xmax = -41.83333, ymin = -32.08333, ymax = -19.5 CRS WGS84 (EPSG:4326) Layers bio_1 Mean Annual Temperature (°C × 10) bio_7 Temperature Annual Range (°C × 10) bio_12 Annual Precipitation (mm)","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/worldclim.html","id":"source","dir":"Reference","previous_headings":"","what":"Source","title":"Bioclimatic Variables from WorldClim (bio_1, bio_7, bio_12) — worldclim","text":"https://www.worldclim.org/","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/worldclim.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Bioclimatic Variables from WorldClim (bio_1, bio_7, bio_12) — worldclim","text":"raster corresponds three standard bioclimatic variables WorldClim 2.1 dataset.","code":""},{"path":"https://wevertonbio.github.io/RuHere/reference/worldclim.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Bioclimatic Variables from WorldClim (bio_1, bio_7, bio_12) — worldclim","text":"","code":"data(worldclim) bioclim <- terra::unwrap(worldclim) terra::plot(bioclim)"}]
