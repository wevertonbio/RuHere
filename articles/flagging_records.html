<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>3. Flagging Records Using Associated Information • RuHere</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="3. Flagging Records Using Associated Information">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">RuHere</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html"><span class="fa fas fa-code"></span> Functions</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true"><span class="fa fas fa-book"></span> Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/obtaining_data.html">1. Obtaining and preparing occurrence data</a></li>
    <li><a class="dropdown-item" href="../articles/spatial_consistency.html">2. Ensuring spatial consistency</a></li>
    <li><a class="dropdown-item" href="../articles/flagging_records.html">3. Flagging Records Using Metadata</a></li>
    <li><a class="dropdown-item" href="../articles/flagging_records_species_list.html">4. Flagging Records with Specialists' Information</a></li>
    <li><a class="dropdown-item" href="../articles/sampling_bias.html">5. Reducing sampling bias</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/wevertonbio/RuHere/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch">
<li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul>
</li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>3. Flagging Records Using Associated Information</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/wevertonbio/RuHere/blob/main/vignettes/flagging_records.Rmd" class="external-link"><code>vignettes/flagging_records.Rmd</code></a></small>
      <div class="d-none name"><code>flagging_records.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>Ensuring data quality is a critical step in biodiversity analysis.
This vignette demonstrates how to clean occurrence records by
identifying and flagging errors derived from record metadata (such as
invalid dates, fossils, or cultivated specimens) and spatial artifacts
(such as coordinates that fall on capitals, biodiversity institutions,
or are geographic outliers).</p>
<p>We will use a combination of <em>RuHere</em> functions for flagging
metadata issues and duplicates, and the <em>CoordinateCleaner</em>
package for additional spatial tests.</p>
</div>
<div class="section level2">
<h2 id="proposed-workflow">Proposed workflow<a class="anchor" aria-label="anchor" href="#proposed-workflow"></a>
</h2>
<p>The main idea of the package is to provide full control and
reproducibility over the record-removal process. This is achieved by
creating <em>flag columns</em> in the dataset, which are logical
variables indicating whether a record passed a given test
(<code>TRUE</code>) or failed it (<code>FALSE</code>). This approach
allows users to:</p>
<ul>
<li>Visuallize and inspect potentially erroneous records interactively
before deciding whether to remove them.</li>
<li>Define exceptions; that is, retain records that were flagged or
remove records that were not flagged.</li>
<li>Save flagged records to separate files, with information indicating
why each record was excluded.</li>
<li>Generate reports summarizing the cleaning process, making it more
transparent and reproducible.</li>
</ul>
</div>
<div class="section level2">
<h2 id="overview-of-the-functions">Overview of the functions:<a class="anchor" aria-label="anchor" href="#overview-of-the-functions"></a>
</h2>
<ul>
<li>
<code><a href="../reference/remove_invalid_coordinates.html">remove_invalid_coordinates()</a></code>: removes invalid
geographic coordinates.</li>
<li>
<code><a href="../reference/flag_fossil.html">flag_fossil()</a></code>: scans description columns for terms like
“fossil” or “paleontological” to avoid mixing modern distribution data
with fossil records.</li>
<li>
<code><a href="../reference/flag_cultivated.html">flag_cultivated()</a></code>: identifies specimens from botanical
gardens, greenhouses, or plantations based on habitat and locality
remarks.</li>
<li>
<code><a href="../reference/flag_inaturalist.html">flag_inaturalist()</a></code>: specifically targets iNaturalist
records. By setting research_grade = FALSE, we flag observations that
haven’t been peer-verified by the community.</li>
<li>
<code><a href="../reference/flag_year.html">flag_year()</a></code>: flags records collected outside a
plausible time range or those with missing dates.</li>
<li>
<code><a href="../reference/flag_duplicates.html">flag_duplicates()</a></code>: identifies and flags duplicated
records.</li>
<li>
<code><a href="../reference/remove_flagged.html">remove_flagged()</a></code>: removes flagged records.</li>
</ul>
</div>
<div class="section level2">
<h2 id="getting-ready">Getting ready<a class="anchor" aria-label="anchor" href="#getting-ready"></a>
</h2>
<p>At this stage, you should have an occurrence dataset that has been
standardized using the <code><a href="../reference/format_columns.html">format_columns()</a></code> function and merged
with <code><a href="../reference/bind_here.html">bind_here()</a></code>. For additional details on this workflow,
see the vignette <strong>“1. Obtaining and preparing species occurrence
data”</strong>. Ideally, these records should also be standardized for
spatial consistency of country and state information. See the vignette
<strong>“2. Ensuring Spatial Consistency”</strong> for further
details.</p>
<p>To illustrate how the function works, we use the example occurrence
dataset included in the package, which contains records for three
species: the Paraná pine (<em>Araucaria angustifolia</em>), the azure
jay (<em>Cyanocorax caeruleus</em>), and the yellow trumpet tree
(<em>Handroanthus albus</em>).</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Load RuHere</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://wevertonbio.github.io/RuHere/">RuHere</a></span><span class="op">)</span></span>
<span><span class="co"># Loading the example data</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"occurrences"</span>, package <span class="op">=</span> <span class="st">"RuHere"</span><span class="op">)</span></span></code></pre></div>
<p><br></p>
</div>
<div class="section level2">
<h2 id="removing-invalid-coordinates-remove_invalid_coordinates">Removing invalid coordinates
(<code>remove_invalid_coordinates()</code>)<a class="anchor" aria-label="anchor" href="#removing-invalid-coordinates-remove_invalid_coordinates"></a>
</h2>
<p>Before conducting any spatial validation or modeling, it is essential
to ensure the coordinates are valid. The
<code><a href="../reference/remove_invalid_coordinates.html">remove_invalid_coordinates()</a></code> function filters out records
where coordinates are non-numeric, missing (<code>NA</code>), or fall
outside the valid global range (Latitude: -90 to 90; Longitude: -180 to
180).</p>
<p>By setting <code>return_invalid = TRUE</code>, the function returns a
list containing both the clean (<code>$valid</code>) and discarded
(<code>$invalid</code>) records, which is useful if you want to inspect
the records that were removed. We then update our working dataset
(<code>occ</code>) to keep only the valid records.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Remove invalid coordinates and store the result as a list to separate valid/invalid data</span></span>
<span><span class="va">occ_split</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/remove_invalid_coordinates.html">remove_invalid_coordinates</a></span><span class="op">(</span></span>
<span>  occ <span class="op">=</span> <span class="va">occurrences</span>,</span>
<span>  long <span class="op">=</span> <span class="st">"decimalLongitude"</span>,</span>
<span>  lat <span class="op">=</span> <span class="st">"decimalLatitude"</span>,</span>
<span>  return_invalid <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Records with invalid coordinates</span></span>
<span><span class="va">occ_split</span><span class="op">$</span><span class="va">invalid</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"species"</span>, <span class="st">"decimalLongitude"</span>, <span class="st">"decimalLatitude"</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="co">#&gt;                         species decimalLongitude decimalLatitude</span></span>
<span><span class="co">#&gt; 376      Araucaria angustifolia               NA              NA</span></span>
<span><span class="co">#&gt; 3606       Cyanocorax caeruleus               NA              NA</span></span>
<span><span class="co">#&gt; 3768 Handroanthus serratifolius               NA              NA</span></span>
<span></span>
<span><span class="co"># Update the main 'occ' data frame to contain only the valid records</span></span>
<span><span class="va">occ</span> <span class="op">&lt;-</span> <span class="va">occ_split</span><span class="op">$</span><span class="va">valid</span></span></code></pre></div>
<p><br></p>
</div>
<div class="section level2">
<h2 id="flagging-based-on-metadata-information">Flagging based on metadata information<a class="anchor" aria-label="anchor" href="#flagging-based-on-metadata-information"></a>
</h2>
<p>After ensuring that the coordinates are valid, the next step is to
assess the quality of the biological and temporal information associated
with each record. Occurrence datasets often contain valuable additional
information describing the conditions under which the occurrence was
recorded. These additional columns are referred to as
<strong>metadata</strong>.</p>
<p><code>RuHere</code> provides four specialized functions to identify
common metadata-related issues:</p>
<div class="section level3">
<h3 id="fossil-records">Fossil records<a class="anchor" aria-label="anchor" href="#fossil-records"></a>
</h3>
<p>If the goal is to study the contemporary distribution of a species,
fossil records should be excluded. The <code><a href="../reference/flag_fossil.html">flag_fossil()</a></code>
function scans the metadata for terms indicating that a record
corresponds to a fossil.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">occ</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/flag_fossil.html">flag_fossil</a></span><span class="op">(</span><span class="va">occ</span><span class="op">)</span> <span class="co"># Scan for fossil-related terms</span></span>
<span><span class="co"># Number of records flagged as fossil</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="op">!</span><span class="va">occ</span><span class="op">$</span><span class="va">fossil_flag</span><span class="op">)</span> <span class="co"># No records flagged as fossil</span></span>
<span><span class="co">#&gt; [1] 0</span></span></code></pre></div>
<p><br></p>
</div>
<div class="section level3">
<h3 id="cultivated-individuals">Cultivated individuals<a class="anchor" aria-label="anchor" href="#cultivated-individuals"></a>
</h3>
<p>For plants, cultivated individuals may represent populations
occurring outside the natural range of the species. The
<code><a href="../reference/flag_cultivated.html">flag_cultivated()</a></code> function scans the metadata for terms
indicating that a record corresponds to a cultivated individual. This
function is heavily inspired by the <code>getCult()</code> function from
the <code>plantR</code> package:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">occ</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/flag_cultivated.html">flag_cultivated</a></span><span class="op">(</span><span class="va">occ</span><span class="op">)</span> <span class="co"># Scan for fossil-related terms</span></span>
<span><span class="co"># Number of records flagged as fossil</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="op">!</span><span class="va">occ</span><span class="op">$</span><span class="va">cultivated_flag</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 14</span></span></code></pre></div>
<p><br></p>
</div>
<div class="section level3">
<h3 id="records-from-inaturalist">Records from iNaturalist<a class="anchor" aria-label="anchor" href="#records-from-inaturalist"></a>
</h3>
<p>Some records, especially in GBIF, are sourced from the citizen
science project <a href="https://www.inaturalist.org/" class="external-link">iNaturalist</a>.
Because many of these occurrences are recorded by non-specialists, you
may wish to exclude them from your analyses. However, a subset of
iNaturalist records is classified as <em>Research Grade</em>, indicating
a higher level of confidence in the species identification. The
<code><a href="../reference/flag_inaturalist.html">flag_inaturalist()</a></code> function allows you to flag all
iNaturalist records or only those that are not classified as Research
Grade:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Flag all iNaturalist records (including Research Grade)</span></span>
<span><span class="va">occ_inat</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/flag_inaturalist.html">flag_inaturalist</a></span><span class="op">(</span><span class="va">occ</span>, </span>
<span>                             research_grade <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="co">#Flag even when is research-grade</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="op">!</span><span class="va">occ_inat</span><span class="op">$</span><span class="va">inaturalist_flag</span><span class="op">)</span> <span class="co">#Number of flagged records</span></span>
<span><span class="co">#&gt; [1] 869</span></span>
<span></span>
<span><span class="co"># Flag only iNaturalist records without Research Grade</span></span>
<span><span class="va">occ</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/flag_inaturalist.html">flag_inaturalist</a></span><span class="op">(</span><span class="va">occ</span>, </span>
<span>                        research_grade <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="co"># Flags only non-peer-verified iNaturalist records</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="op">!</span><span class="va">occ</span><span class="op">$</span><span class="va">inaturalist_flag</span><span class="op">)</span> <span class="co">#All inaturalist records are classified as Research Grade</span></span>
<span><span class="co">#&gt; [1] 0</span></span></code></pre></div>
<p><br></p>
</div>
<div class="section level3">
<h3 id="records-outside-a-year-range">Records outside a year range<a class="anchor" aria-label="anchor" href="#records-outside-a-year-range"></a>
</h3>
<p>Depending on your objectives, you may wish to exclude records that
fall outside a specific temporal range. For example, when fitting
ecological niche models using climate variables, very old records may
represent populations collected in regions that have since changed and
may no longer be suitable for the species. As an example, we flag
records collected before 1980:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">occ</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/flag_year.html">flag_year</a></span><span class="op">(</span><span class="va">occ</span>, lower_limit <span class="op">=</span> <span class="fl">1980</span>, </span>
<span>                 upper_limit <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span> <span class="co">#We could specify a upper limit as well</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="op">!</span><span class="va">occ</span><span class="op">$</span><span class="va">year_flag</span><span class="op">)</span> <span class="co">#Number of flagged records</span></span>
<span><span class="co">#&gt; [1] 198</span></span></code></pre></div>
<p><br></p>
</div>
</div>
<div class="section level2">
<h2 id="flagging-duplicates">Flagging duplicates<a class="anchor" aria-label="anchor" href="#flagging-duplicates"></a>
</h2>
<p>Some records are duplicates, that means, they have the same
coordinates. Some of them are full duplicates, that means, additionaly
to have the same coordinates, they also have the same metadata.</p>
<p>In the example provided in the package, we have been already removed
the duplicated records. But to ilustrate the function, let’s create a
new dataset with the records duplicates:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Duplicated records</span></span>
<span><span class="va">new_occ</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind</a></span><span class="op">(</span><span class="va">occurrences</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">1000</span>, <span class="op">]</span>, <span class="va">occurrences</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">100</span>,<span class="op">]</span><span class="op">)</span></span></code></pre></div>
<p><br></p>
<p>RuHere provides several options to deal with duplicates:</p>
<ul>
<li>
<strong>Flag duplicates based only on coordinates</strong>: for most
cases, you may wish to keep only one record among the duplicated. By
default, the kept record is choosen randomly. In RuHere we can control
which record will be kept. For example, we can keep the most recent
and/or prioritize records from a specific data_source:</li>
</ul>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Flag records and keep the most recent and preferably from GBIF:</span></span>
<span><span class="co"># Create vector to prioritize gbif records</span></span>
<span><span class="va">preferable_datasource</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"gbif"</span>, <span class="st">"specieslink"</span>, <span class="st">"idigbio"</span><span class="op">)</span></span>
<span><span class="va">occ_dup1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/flag_duplicates.html">flag_duplicates</a></span><span class="op">(</span>occ <span class="op">=</span> <span class="va">new_occ</span>, continuous_variable <span class="op">=</span> <span class="st">"year"</span>,</span>
<span>                            categorical_variable <span class="op">=</span> <span class="st">"data_source"</span>, </span>
<span>                            priority_categories <span class="op">=</span> <span class="va">preferable_datasource</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="op">!</span><span class="va">occ_dup1</span><span class="op">$</span><span class="va">duplicated_flag</span><span class="op">)</span> <span class="co">#Number of flagged records</span></span>
<span><span class="co">#&gt; [1] 100</span></span></code></pre></div>
<p><br></p>
<ul>
<li>
<strong>Flag duplicates based on coordinates and metadata</strong>:
in some cases, you may wish to consider duplicates only the records that
were collected in the same place and also in the same time. That means,
records collected in the same place but in different years were not
considered duplicates:</li>
</ul>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Flag duplicates based on coordinates and year</span></span>
<span><span class="va">occ_dup2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/flag_duplicates.html">flag_duplicates</a></span><span class="op">(</span>occ <span class="op">=</span> <span class="va">new_occ</span>, additional_groups <span class="op">=</span> <span class="st">"year"</span><span class="op">)</span></span></code></pre></div>
<p><br></p>
<ul>
<li>
<strong>Flag duplicates based on cells of a raster</strong>: if you
have a SpatRaster, you can consider as duplicates all the records that
falls in the same cell.</li>
</ul>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Import raster</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"worldclim"</span>, package <span class="op">=</span> <span class="st">"RuHere"</span><span class="op">)</span></span>
<span><span class="va">wc</span> <span class="op">&lt;-</span> <span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/wrap.html" class="external-link">unwrap</a></span><span class="op">(</span><span class="va">worldclim</span><span class="op">)</span> <span class="co">#Unpack raster</span></span>
<span><span class="co"># Flag duplicates based in raster cells and keep the most recent </span></span>
<span><span class="va">occ_dup3</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/flag_duplicates.html">flag_duplicates</a></span><span class="op">(</span>occ <span class="op">=</span> <span class="va">new_occ</span>, continuous_variable <span class="op">=</span> <span class="st">"year"</span>, </span>
<span>                            by_cell <span class="op">=</span> <span class="cn">TRUE</span>, raster_variable <span class="op">=</span> <span class="va">wc</span><span class="op">)</span></span></code></pre></div>
<p><br></p>
<p>If you are working with a large dataset, we recommend flagging and
removing duplicate records as a first step after data standardization.
More details on how to remove flagged records are provided below.</p>
</div>
<div class="section level2">
<h2 id="spatial-cleaning-coordinatecleaner">Spatial cleaning (<code>CoordinateCleaner</code>)<a class="anchor" aria-label="anchor" href="#spatial-cleaning-coordinatecleaner"></a>
</h2>
<p>After verifying the metadata, the next step is to address spatial
artifacts. For this stage, we integrate the
<code>CoordinateCleaner</code> package into our workflow. This package
provides a robust set of ready-to-use functions that are fully
compatible with <code>RuHere</code> outputs, allowing for automated
identification of common geographic errors in biodiversity data.</p>
<p>Spatial artifacts often occur when coordinates are assigned to
general locations, such as a country’s capital, a state center, or a
biodiversity institution, rather than the actual collection site.</p>
<div class="section level3">
<h3 id="implement-flags-from-coordinatecleaner">Implement flags from CoordinateCleaner<a class="anchor" aria-label="anchor" href="#implement-flags-from-coordinatecleaner"></a>
</h3>
<p><strong>CoordinateCleaner</strong> is an R package that performs
automated tests to identify suspicious geographic coordinates. Among its
various functions, it compares occurrence coordinates against reference
databases of country and province centroids, country capitals, urban
areas, and biodiversity institutions. For a comprehensive overview of
the available methods, see the paper linked <a href="https://besjournals.onlinelibrary.wiley.com/doi/10.1111/2041-210X.13152" class="external-link">here</a>.</p>
<p><strong>RuHere</strong> is fully compatible with the flags generated
by <strong>CoordinateCleaner</strong>, as both packages add logical flag
columns to the dataset (prefixed with <code>.</code>). To apply the
desired coordinate checks, you simply need to use the
<code><a href="https://ropensci.github.io/CoordinateCleaner/reference/clean_coordinates.html" class="external-link">clean_coordinates()</a></code> function:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Install the package if necessary</span></span>
<span><span class="co"># if(!require("CoordinateCleaner")){</span></span>
<span><span class="co">#   install.packages("CoordinateCleaner")</span></span>
<span><span class="co"># }</span></span>
<span></span>
<span><span class="co"># Loading the package</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ropensci.github.io/CoordinateCleaner/" class="external-link">CoordinateCleaner</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Run spatial check using some tests</span></span>
<span><span class="va">occ</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ropensci.github.io/CoordinateCleaner/reference/clean_coordinates.html" class="external-link">clean_coordinates</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">occ</span>,</span>
<span>                         tests <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"capitals"</span>, <span class="st">"centroids"</span>, <span class="st">"equal"</span>, </span>
<span>                                   <span class="st">"institutions"</span>, <span class="st">"zeros"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; Testing coordinate validity</span></span>
<span><span class="co">#&gt; Flagged 0 records.</span></span>
<span><span class="co">#&gt; Testing equal lat/lon</span></span>
<span><span class="co">#&gt; Flagged 3 records.</span></span>
<span><span class="co">#&gt; Testing zero coordinates</span></span>
<span><span class="co">#&gt; Flagged 6 records.</span></span>
<span><span class="co">#&gt; Testing country capitals</span></span>
<span><span class="co">#&gt; Flagged 23 records.</span></span>
<span><span class="co">#&gt; Testing country centroids</span></span>
<span><span class="co">#&gt; Flagged 7 records.</span></span>
<span><span class="co">#&gt; Testing biodiversity institutions</span></span>
<span><span class="co">#&gt; Flagged 6 records.</span></span>
<span><span class="co">#&gt; Flagged 39 of 4077 records, EQ = 0.01.</span></span></code></pre></div>
<p><br></p>
<p>The final columns of the occurrence dataset contain the results of
the <strong>CoordinateCleaner</strong> validation. The summary column
only reports whether a record passed all applied tests, and can be
ignored for the purposes of this vignette.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rspatial.github.io/terra/reference/headtail.html" class="external-link">head</a></span><span class="op">(</span><span class="va">occ</span><span class="op">[</span>,<span class="fl">19</span><span class="op">:</span><span class="fl">25</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="co">#&gt;   .val .equ .zer .cap .cen .inst .summary</span></span>
<span><span class="co">#&gt; 1 TRUE TRUE TRUE TRUE TRUE  TRUE     TRUE</span></span>
<span><span class="co">#&gt; 2 TRUE TRUE TRUE TRUE TRUE  TRUE     TRUE</span></span>
<span><span class="co">#&gt; 3 TRUE TRUE TRUE TRUE TRUE  TRUE     TRUE</span></span>
<span><span class="co">#&gt; 4 TRUE TRUE TRUE TRUE TRUE  TRUE     TRUE</span></span>
<span><span class="co">#&gt; 5 TRUE TRUE TRUE TRUE TRUE  TRUE     TRUE</span></span>
<span><span class="co">#&gt; 6 TRUE TRUE TRUE TRUE TRUE  TRUE     TRUE</span></span></code></pre></div>
<p><br></p>
</div>
</div>
<div class="section level2">
<h2 id="map-of-occurrence-flags">Map of occurrence flags<a class="anchor" aria-label="anchor" href="#map-of-occurrence-flags"></a>
</h2>
<p>Once records have been flagged, it is highly recommended to visualize
them to assess whether the flagging is accurate before proceeding with
final record removal.</p>
<p><em>RuHere</em> provides two options for mapping flagged records: an
interactive option via <code><a href="../reference/map_here.html">map_here()</a></code>, which uses the
<code>mapview</code> package, and a static option via
<code><a href="../reference/ggmap_here.html">ggmap_here()</a></code>, which uses <code>ggplot2</code>. Let’s see
the flagged record of the Paraná Pine:</p>
<blockquote>
<p><strong>Note:</strong> In this vignette, the map generated with
<code><a href="../reference/map_here.html">map_here()</a></code> is a static snapshot of the interactive map
produced in RStudio.</p>
</blockquote>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Interactive map with map_here()</span></span>
<span><span class="fu"><a href="../reference/map_here.html">map_here</a></span><span class="op">(</span><span class="va">occ</span>, species <span class="op">=</span> <span class="st">"Araucaria angustifolia"</span>, label <span class="op">=</span> <span class="st">"record_id"</span>, cex <span class="op">=</span> <span class="fl">4</span><span class="op">)</span></span></code></pre></div>
<p><img src="vignettes_img/IMG02.jpeg" class="r-plt" alt="" width="80%" style="display: block; margin: auto;"><br></p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Static map with ggplot</span></span>
<span><span class="fu"><a href="../reference/ggmap_here.html">ggmap_here</a></span><span class="op">(</span><span class="va">occ</span>, species <span class="op">=</span> <span class="st">"Araucaria angustifolia"</span>, </span>
<span>           show_no_flagged <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="co"># Do not show unflagged records</span></span></code></pre></div>
<p><img src="flagging_records_files/figure-html/unnamed-chunk-15-1.png" class="r-plt" alt="" width="80%" style="display: block; margin: auto;"><br></p>
<p>With <code><a href="../reference/ggmap_here.html">ggmap_here()</a></code>, we can also plot each flag in a
separate panel by setting <code>facet_wrap = TRUE</code>:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/ggmap_here.html">ggmap_here</a></span><span class="op">(</span><span class="va">occ</span>, species <span class="op">=</span> <span class="st">"Araucaria angustifolia"</span>, </span>
<span>           facet_wrap <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p><img src="flagging_records_files/figure-html/unnamed-chunk-16-1.png" class="r-plt" alt="" width="80%" style="display: block; margin: auto;"><br></p>
<div class="section level3">
<h3 id="get-consensus-across-multiple-flags">Get consensus across multiple flags<a class="anchor" aria-label="anchor" href="#get-consensus-across-multiple-flags"></a>
</h3>
<p>We can obtain a consensus across multiple flags. The consensus can be
computed in two ways: - A record is considered valid (<code>TRUE</code>)
<strong>only if all specified flags are valid</strong>
(<code>TRUE</code>). - A record is considered valid (<code>TRUE</code>)
<strong>if at least one specified flag is valid</strong>
(<code>TRUE</code>).</p>
<p>As an example, we compute a consensus using the <em>cultivated</em>
and <em>year</em> flags. In this case, cultivated records are flagged as
invalid only if they were also collected before 1980. By default, the
function creates a new column named <code>"consensus_flag"</code>, but a
custom name can be provided. Here, we name the new flag as
<code>"old_cultivated"</code>.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">occ_consensus</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/flag_consensus.html">flag_consensus</a></span><span class="op">(</span><span class="va">occ</span>, </span>
<span>                                flags <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"cultivated"</span>, <span class="st">"year"</span><span class="op">)</span>,</span>
<span>                                consensus_rule <span class="op">=</span> <span class="st">"any_true"</span>,</span>
<span>                                flag_name <span class="op">=</span> <span class="st">"old_cultivated"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Records flagged because they are cultivated and collected before 1980</span></span>
<span><span class="va">occ_consensus_flagged</span> <span class="op">&lt;-</span> <span class="va">occ_consensus</span><span class="op">[</span><span class="op">!</span><span class="va">occ_consensus</span><span class="op">$</span><span class="va">old_cultivated</span>, <span class="op">]</span></span>
<span><span class="va">occ_consensus_flagged</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"species"</span>, <span class="st">"cultivated_flag"</span>, <span class="st">"year_flag"</span>, <span class="st">"old_cultivated"</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="co">#&gt;                         species cultivated_flag year_flag old_cultivated</span></span>
<span><span class="co">#&gt; 1381     Araucaria angustifolia           FALSE     FALSE          FALSE</span></span>
<span><span class="co">#&gt; 1388     Araucaria angustifolia           FALSE     FALSE          FALSE</span></span>
<span><span class="co">#&gt; 1424     Araucaria angustifolia           FALSE     FALSE          FALSE</span></span>
<span><span class="co">#&gt; 4769 Handroanthus serratifolius           FALSE     FALSE          FALSE</span></span></code></pre></div>
<p><br></p>
<p>We can visualize this custom flag using <code><a href="../reference/map_here.html">map_here()</a></code> or
<code><a href="../reference/ggmap_here.html">ggmap_here()</a></code>. Because it is a user-defined flag, it must be
specified via the <code>additional_flags</code> and
<code>names_additional_flags</code> arguments, and a color must also be
provided for plotting:</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/ggmap_here.html">ggmap_here</a></span><span class="op">(</span><span class="va">occ_consensus</span>, </span>
<span>           flags <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"year"</span>, <span class="st">"cultivated"</span><span class="op">)</span>,            <span class="co"># Specific flags to show</span></span>
<span>           additional_flags <span class="op">=</span> <span class="st">"old_cultivated"</span>,        <span class="co"># Column name of the custom flag</span></span>
<span>           names_additional_flags <span class="op">=</span> <span class="st">"Old &amp; cultivated"</span>,<span class="co"># Label used in the legend</span></span>
<span>           col_additional_flags <span class="op">=</span> <span class="st">"red"</span>,                <span class="co"># Color for the custom flag</span></span>
<span>           show_no_flagged <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>                      <span class="co"># Do not show unflagged records</span></span></code></pre></div>
<p><img src="flagging_records_files/figure-html/unnamed-chunk-18-1.png" class="r-plt" alt="" width="80%" style="display: block; margin: auto;"><br></p>
</div>
<div class="section level3">
<h3 id="removing-flagged-records">Removing flagged records<a class="anchor" aria-label="anchor" href="#removing-flagged-records"></a>
</h3>
<p>After flagging potential issues, we can use the
<code><a href="../reference/remove_flagged.html">remove_flagged()</a></code> function to clean the dataset. This
function is highly flexible, allowing you to filter records based on the
flags generated and also apply manual overrides using the
<code>force_keep</code> and <code>force_remove</code> arguments. +
<code>force_keep</code>: a vector of record IDs that you want to keep in
the dataset, even if they were flagged as FALSE by one of the functions.
+ <code>force_remove</code>: a vector of record IDs that you want to
exclude, even if they passed all automated tests (flagged as TRUE).</p>
<p>As an example, suppose that the records <code>"gbif_17175"</code> and
<code>"gbif_6108"</code> are known, valid herbarium specimens that were
mistakenly flagged as cultivated, while <code>"gbif_5516"</code> and
<code>"specieslink_1091"</code> are records you know to be incorrect but
were not captured by any automated flag.</p>
<p>We can also specify a directory in which to save the removed records.
In this example, we use a temporary directory, but in practice you
should define a permanent location:</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create directory to save removed records</span></span>
<span><span class="va">path_to_save</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"removed_records"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/files2.html" class="external-link">dir.create</a></span><span class="op">(</span><span class="va">path_to_save</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Identify records to force keeping and removing</span></span>
<span><span class="va">to_keep</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"gbif_17175"</span>, <span class="st">"gbif_6108"</span><span class="op">)</span></span>
<span><span class="va">to_remove</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"gbif_5516"</span>, <span class="st">"specieslink_1091"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Remove flagged records with manual control</span></span>
<span><span class="co"># and save removed records to a folder</span></span>
<span><span class="va">occ_cleaned</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/remove_flagged.html">remove_flagged</a></span><span class="op">(</span>occ <span class="op">=</span> <span class="va">occ</span>,</span>
<span>                              flags <span class="op">=</span> <span class="st">"all"</span>,  </span>
<span>                              column_id <span class="op">=</span> <span class="st">"record_id"</span>,</span>
<span>                              force_keep <span class="op">=</span> <span class="va">to_keep</span>,</span>
<span>                              force_remove <span class="op">=</span> <span class="va">to_remove</span>,</span>
<span>                              save_flagged <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                              output_dir <span class="op">=</span> <span class="va">path_to_save</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Total number of records</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/dimensions.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">occ</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 4077</span></span>
<span><span class="co"># Number of valid records</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/dimensions.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">occ_cleaned</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 3837</span></span>
<span><span class="co"># Number of records removed</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/dimensions.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">occ</span><span class="op">)</span> <span class="op">-</span> <span class="fu"><a href="https://rspatial.github.io/terra/reference/dimensions.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">occ_cleaned</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 240</span></span></code></pre></div>
<p>We can inspect the directory specified in <code>path_to_save</code>
to see the files containing the removed records. By default, the files
are saved in GZIP format, which is a compressed format that can be read
using data.table::fread().</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">fs</span><span class="fu">::</span><span class="fu"><a href="https://fs.r-lib.org/reference/dir_tree.html" class="external-link">dir_tree</a></span><span class="op">(</span><span class="va">path_to_save</span><span class="op">)</span></span>
<span><span class="co">#&gt; Temp/removed_records</span></span>
<span><span class="co">#&gt; ├── Biodiversity Institution.gz</span></span>
<span><span class="co">#&gt; ├── Capital centroid.gz</span></span>
<span><span class="co">#&gt; ├── Country-Province centroid.gz</span></span>
<span><span class="co">#&gt; ├── Cultivated.gz</span></span>
<span><span class="co">#&gt; ├── Equal lat-long.gz</span></span>
<span><span class="co">#&gt; └── Zero lat-long.gz</span></span></code></pre></div>
<p>This approach provides a simple and transparent way to maintain
control over the cleaning process, allowing you to incorporate your
expert knowledge as researcher to complement automated data-quality
checks.</p>
</div>
<div class="section level3">
<h3 id="summarizing-flags">Summarizing flags<a class="anchor" aria-label="anchor" href="#summarizing-flags"></a>
</h3>
<p>After flagging the records, we can create a bar plot summarizing the
number of records flagged by each flagging function:</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">flag_summary</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/summarize_flags.html">summarize_flags</a></span><span class="op">(</span><span class="va">occ</span><span class="op">)</span></span></code></pre></div>
<p><br></p>
<p>The function returns a <code>data.frame</code> summarizing the number
of records per flag and a <code>ggplot2</code> object displaying this
summary as a bar plot:</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Data.frame summarizing the number of records per flag</span></span>
<span><span class="va">flag_summary</span><span class="op">$</span><span class="va">df_summary</span></span>
<span><span class="co">#&gt;                        Flag    n</span></span>
<span><span class="co">#&gt; 4            Equal lat-long    3</span></span>
<span><span class="co">#&gt; 5             Zero lat-long    6</span></span>
<span><span class="co">#&gt; 8  Biodiversity Institution    6</span></span>
<span><span class="co">#&gt; 7 Country-Province centroid    7</span></span>
<span><span class="co">#&gt; 1                Cultivated   14</span></span>
<span><span class="co">#&gt; 6          Capital centroid   23</span></span>
<span><span class="co">#&gt; 9                     Valid 4025</span></span></code></pre></div>
<p><br></p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Bar plot</span></span>
<span><span class="va">flag_summary</span><span class="op">$</span><span class="va">plot_summary</span></span></code></pre></div>
<p><img src="flagging_records_files/figure-html/unnamed-chunk-23-1.png" class="r-plt" alt="" width="80%" style="display: block; margin: auto;"></p>
<p>The function can also read flagged occurrence data that were saved
when records were removed. To do so, simply specify the same directory
used in <code><a href="../reference/remove_flagged.html">remove_flagged()</a></code>:</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Summarize removed records using saved data</span></span>
<span><span class="va">flag_summary_dir</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/summarize_flags.html">summarize_flags</a></span><span class="op">(</span>flagged_dir <span class="op">=</span> <span class="va">path_to_save</span>, </span>
<span>                                    show_no_flagged <span class="op">=</span> <span class="cn">FALSE</span>, <span class="co">#Do not show unflagged records</span></span>
<span>                                    fill <span class="op">=</span> <span class="st">"firebrick"</span><span class="op">)</span> <span class="co"># Change color of bars</span></span>
<span><span class="va">flag_summary_dir</span><span class="op">$</span><span class="va">plot_summary</span></span></code></pre></div>
<p><img src="flagging_records_files/figure-html/unnamed-chunk-24-1.png" class="r-plt" alt="" width="80%" style="display: block; margin: auto;"><br></p>
<p>Since the output is a <code>ggplot2</code> object, it can be saved
using <code><a href="https://ggplot2.tidyverse.org/reference/ggsave.html" class="external-link">ggplot2::ggsave()</a></code>:</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsave.html" class="external-link">ggsave</a></span><span class="op">(</span>filename <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">path_to_save</span>, <span class="st">"Summary.png"</span><span class="op">)</span>, </span>
<span>                plot <span class="op">=</span> <span class="va">flag_summary_dir</span><span class="op">$</span><span class="va">plot_summary</span>, width <span class="op">=</span> <span class="fl">8</span>, height <span class="op">=</span> <span class="fl">5</span>, </span>
<span>                dpi <span class="op">=</span> <span class="fl">600</span><span class="op">)</span></span></code></pre></div>
<p><br></p>
<p>In the next vignette, we demonstrate how to use expert-derived
information from other biodiversity databases, such as the IUCN and the
World Checklist of Vascular Plants, to identify records that fall
outside the natural range of a species.</p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Weverton C. F. Trindade, Fernanda S. Caron.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
